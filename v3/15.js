(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1011:function(t,e){t.exports='<h1 id="nightingale-linegraph-track">nightingale-linegraph-track</h1>\n<p><a href="https://www.npmjs.com/package/nightingale-linegraph-track"><img src="https://img.shields.io/npm/v/nightingale-linegraph-track.svg" alt="Published on NPM"></a></p>\n<p>Nightingale line graph track component is used to display multiple line graphs (either linear or d3 curves). It inherits from Protvista-track.</p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;nightingale-linegraph-track&gt;&lt;/nightingale-linegraph-track&gt;</code></pre>\n<h2 id="api-reference">API Reference</h2>\n<h3 id="properties">Properties</h3>\n<h4 id="length-number"><code>length: number</code></h4>\n<p>The protein or nucleic acid sequence length.</p>\n<h4 id="height-number-optional"><code>height: number (optional)</code></h4>\n<p>The height of the track.</p>\n<h4 id="data-array"><code>data: Array</code></h4>\n<p>The data expects the following structure.</p>\n<pre><code class="language-javascript">{\n    name: String,\n    range:[min, max],\n    colour?: Line colour,\n        (Colour will be assigned if not provided. Use &quot;none&quot; for no line colour)\n    fill?: Create area plot using given fill colour (default &quot;none&quot;),\n    lineCurve?: &#39;curveLinear&#39;(default)|&#39;curveBasis&#39;|&#39;curveCardinal&#39;|&#39;curveStep&#39;|&#39;curveNatural&#39;,\n        (More curves - https://github.com/d3/d3-shape/blob/v2.0.0/README.md#curves)\n    values: [\n        {\n            position: Number,\n            value: Number\n        }\n    ]\n}</code></pre>\n<h4 id="also-see-protvista-track">also see <a href="https://github.com/ebi-webcomponents/nightingale/blob/master/packages/protvista-track/README.md#properties">protvista-track</a></h4>\n'},159:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),o=n(859),a=n(111),l=n(35),s=n(1011),u=n.n(s),c=n(860);e.default=function(){return Object(i.useEffect)((function(){Object(a.a)("nightingale-linegraph-track",o.a),document.querySelector("#track").data=c}),[]),r.a.createElement(i.Fragment,null,r.a.createElement(l.default,{content:u.a}),r.a.createElement("nightingale-linegraph-track",{id:"track",length:"100",height:"50"}))}},593:function(t,e,n){"use strict";function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var i,r,o=[],a=!0,l=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){l=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"b",(function(){return T})),n.d(e,"e",(function(){return F})),n.d(e,"a",(function(){return M})),n.d(e,"d",(function(){return N})),n.d(e,"c",(function(){return H})),n.d(e,"f",(function(){return R}));var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,i=void 0===n?-1/0:n,r=e.max,a=void 0===r?1/0:r;o(this,t),this.segments=[],this.max=a,this.min=i,this.regionString=null}var e,n,r;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var i=n.start,r=n.end,o=n.color;if(e)return"".concat(i,":").concat(r).concat(o?":".concat(o):"");var a=i===t.min?"":i,l=r===t.max?"":r;return"".concat(a,":").concat(l).concat(o?":".concat(o):"")})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var n=i(t.split(":"),4),r=n[0],o=n[1],a=n[2];if(void 0!==n[3])throw new Error("there should be at most 2 ':' per region. Region: ".concat(t));var l=r?Number(r):e.min,s=o?Number(o):e.max,u=""!==a?a:void 0;if(l>s){var c=[s,l];l=c[0],s=c[1]}if(l<e.min&&(l=e.min),s>e.max&&(s=e.max),Number.isNaN(l))throw new Error("The parsed value of ".concat(r," is NaN. Region: ").concat(t));if(Number.isNaN(s))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));if(u&&!u.match(/^#[0-9a-f]{6,8}$/i))throw new Error("The parsed value of ".concat(a," is not a color in hex format. Region: ").concat(t));return{start:l,end:s,color:u}})):this.segments=[]}}])&&a(e.prototype,n),r&&a(e,r),t}();function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},c=function(){function t(e){var n=e.element,i=e.min,r=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.element._highlightcolor="#FFEB3B66",this.region=new l({min:i,max:r}),this.fixedHighlight=null}var e,n,i;return e=t,(n=[{key:"max",set:function(t){this.region.max=t}},{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),this.element._highlightcolor=this.element.getAttribute("highlightcolor")||"#FFEB3B66",null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(u(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(u(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(u(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("pointer-events","none").merge(e).attr("fill",(function(e){return e.color?e.color:t.element._highlightcolor})).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}}])&&s(e.prototype,n),i&&s(e,i),t}();function h(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var f=function(t){return t};function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var e,n,i;return e=t,(n=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var n=this.element.getBoundingClientRect(),i=n.height,r=n.width,o=n.x,a=n.y;return t>o&&e<o+r&&e>a&&e<a+i}},{key:"wheel",value:function(t){var e=t.x,n=t.y,i=t.timeStamp;this.isWheelEventInsideElement(e,n)?i<this.timeStampWheelOutside+400?this.blockScroll(i):this.setElementScrollable(!0):this.blockScroll(i)}}])&&p(e.prototype,n),i&&p(e,i),t}();function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=y(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function v(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function k(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),t}function S(t,e,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=L(t);if(e){var r=L(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return j(this,n)}}function j(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=["left","right","top","bottom"],x=C.map((function(t){return"margin".concat(t)})),T=l,F=c,M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var i=t.split(",").map((function(t){return t.split(":")}));if(i.length<2)throw new Error("There should be at least 2 points to create a scale");e=i.map((function(t){var e=t[0].trim().toUpperCase();if(!h(e))throw new Error("The color '".concat(e," is not valid'"));return e})),n=i.map((function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n}))}return{range:e,domain:n}},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,i=void 0===n?f:n,r=e.valueFormatter,o=void 0===r?f:r;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map((function(t){return t.split(":")})),l={};return a.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));l[i(t[0])]=o(t[1])})),l}return{}},H=g,R=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialValue:{top:0,bottom:0,left:0,right:0}},i=function(t){O(i,t);var e=A(i);function i(){var t;return _(this,i),(t=e.call(this)).margin=n.initialValue,t}return k(i,[{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&x.includes(t)&&(this[t]=n),S(L(i.prototype),"attributeChangedCallback",this).call(this,t,e,n)}}],[{key:"observedAttributes",get:function(){return[].concat(v(S(L(i),"observedAttributes",this)),v(x))}}]),i}(t),r=m(C);try{var o=function(){var t=e.value;Object.defineProperty(i.prototype,"margin".concat(t),{get:function(){return this.margin[t]||0},set:function(e){this.margin[t]=+e}})};for(r.s();!(e=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}return i}},594:function(t,e,n){"use strict";var i=n(608),r=n(604);e.a=function(t){return Object(r.a)(t)&&Object(i.a)(t)}},595:function(t,e,n){"use strict";e.a=function(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}},596:function(t,e,n){"use strict";var i=n(599);e.a=function(t,e){return!!(null==t?0:t.length)&&Object(i.a)(t,e,0)>-1}},598:function(t,e,n){"use strict";var i=n(614);var r=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},o=Math.max;var a=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,l=o(i.length-e,0),s=Array(l);++a<l;)s[a]=i[e+a];a=-1;for(var u=Array(e+1);++a<e;)u[a]=i[a];return u[e]=n(s),r(t,this,u)}};var l=function(t){return function(){return t}},s=n(663),u=s.a?function(t,e){return Object(s.a)(t,"toString",{configurable:!0,enumerable:!1,value:l(e),writable:!0})}:i.a,c=Date.now;var h=function(t){var e=0,n=0;return function(){var i=c(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(u);e.a=function(t,e){return h(a(t,e,i.a),t+"")}},599:function(t,e,n){"use strict";var i=function(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1};var r=function(t){return t!=t};var o=function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1};e.a=function(t,e,n){return e==e?o(t,e,n):i(t,r,n)}},603:function(t,e,n){"use strict";n.r(e),n.d(e,"DefaultLayout",(function(){return R})),n.d(e,"getColorByType",(function(){return G}));var i=n(585),r=n(599),o=n(608),a=n(643),l=n(622),s=n(604);var u=function(t){return"string"==typeof t||!Object(l.a)(t)&&Object(s.a)(t)&&"[object String]"==Object(a.a)(t)},c=/\s/;var h=function(t){for(var e=t.length;e--&&c.test(t.charAt(e)););return e},f=/^\s+/;var p=function(t){return t?t.slice(0,h(t)+1).replace(f,""):t},g=n(653),d=n(652),m=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,y=/^0o[0-7]+$/i,b=parseInt;var _=function(t){if("number"==typeof t)return t;if(Object(d.a)(t))return NaN;if(Object(g.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(g.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=p(t);var n=v.test(t);return n||y.test(t)?b(t.slice(2),n?2:8):m.test(t)?NaN:+t};var w=function(t){return t?(t=_(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var k=function(t){var e=w(t),n=e%1;return e==e?n?e-n:e:0},S=n(590);var O=function(t,e){return Object(S.a)(e,(function(e){return t[e]}))},E=n(661);var A=function(t){return null==t?[]:O(t,Object(E.a)(t))},j=Math.max;var L=function(t,e,n,i){t=Object(o.a)(t)?t:A(t),n=n&&!i?k(n):0;var a=t.length;return n<0&&(n=j(a+n,0)),u(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Object(r.a)(t,e,n)>-1},C=n(632),x=n(619),T=n(613),F=n(609);function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var N=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"isContinuous",value:function(t){return"bridge"!==(t=t.toLowerCase())}}],(n=[{key:"getFeatureShape",value:function(t,e,n,i){return i=i||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+i]&&(i="rectangle"),this["_"+i]()}},{key:"_rectangle",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}},{key:"_roundRectangle",value:function(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 -6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 -6,-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,-6Z"}},{key:"_line",value:function(){return"M0,".concat(this._ftHeight/2," L").concat(this._ftWidth,",").concat(this._ftHeight/2)}},{key:"_bridge",value:function(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}},{key:"_getMiddleLine",value:function(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}},{key:"_diamond",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}},{key:"_chevron",value:function(){var t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_catFace",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_triangle",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_wave",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getPolygon",value:function(t){for(var e="M ",n=this._ftWidth/2,i=0;i<t;i++)e+=5*Math.cos(2*Math.PI*i/t)+n+","+(5*Math.sin(2*Math.PI*i/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_hexagon",value:function(){return this._getPolygon(6)}},{key:"_pentagon",value:function(){return this._getPolygon(5)}},{key:"_circle",value:function(){var t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}},{key:"_arrow",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_doubleBar",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getBrokenEnd",value:function(){var t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}},{key:"_getBrokenStart",value:function(){var t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}},{key:"_discontinuosStart",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuos",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuosEnd",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}},{key:"_helix",value:function(){for(var t=2.5,e=2.5,n=Math.round(this._ftWidth/5),i="",r=0;r<n;r++)i+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+",2.5 "+e+", 0 C"+(e-t)+",2.5 "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5;return i}},{key:"_strand",value:function(){var t=0;this._ftWidth>5&&(t=this._ftWidth-5);var e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+"M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z"}}])&&M(e.prototype,n),i&&M(e,i),t}();function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var R=function(){function t(e){var n=e.layoutHeight,i=e.padding,r=void 0===i?1:i,o=e.minHeight,a=void 0===o?17:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._padding=r,this._minHeight=a,this._layoutHeight=n}var e,n,i;return e=t,(n=[{key:"init",value:function(t){this._features=t}},{key:"getFeatureYPos",value:function(){var t=this.getFeatureHeight();return this._layoutHeight/2-t/2}},{key:"getFeatureHeight",value:function(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}])&&H(e.prototype,n),i&&H(e,i),t}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=q(t);if(e){var r=q(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return D(this,n)}}function D(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Z=function(t,e){return e.some((function(e){return n=t,i=e,!(Number(i.start)>Number(n.end)||Number(i.end)<Number(n.start));var n,i}))},z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(o,t);var e,n,i,r=B(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t)).featuresMap=new Map,e._rowHeight=0,e._rows=[],e._minHeight=15,e}return e=o,(n=[{key:"init",value:function(t){var e=this;t.forEach((function(t){var n=e._rows.findIndex((function(e){return!Z(t,e)}));n>=0?(e._rows[n].push(t),e.featuresMap.set(t,n)):(e._rows.push([t]),e.featuresMap.set(t,e._rows.length-1))})),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}},{key:"getOffset",value:function(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}},{key:"getFeatureYPos",value:function(t){var e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}},{key:"getFeatureHeight",value:function(){return this._rowHeight-2*this._padding}}])&&W(e.prototype,n),i&&W(e,i),o}(R),U={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},X=function(t){if(U[t.toUpperCase()])return U[t.toUpperCase()].shape;var e=Object.values(U).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e?e.shape:"rectangle"},G=function(t){if(U[t.toUpperCase()])return U[t.toUpperCase()].color;var e=Object.values(U).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e||console.log(t),e?e.color:"black"};function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t){return function(t){if(Array.isArray(t))return V(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Q(t,e,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=it(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=it(t);if(e){var r=it(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return nt(this,n)}}function nt(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(a,t);var e,n,r,o=et(a);function a(){return K(this,a),o.apply(this,arguments)}return e=a,r=[{key:"normalizeLocations",value:function(t){return t.map((function(t){var e=t.locations,n=t.start,i=t.end;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:i}]}]})}))}},{key:"observedAttributes",get:function(){return F.a.observedAttributes.concat(["highlight","color","shape","filters"])}}],(n=[{key:"getLayout",value:function(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new z({layoutHeight:this._height}):new R({layoutHeight:this._height})}},{key:"connectedCallback",value:function(){var t=this;Q(it(a.prototype),"connectedCallback",this).call(this),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new N,this._layoutObj=this.getLayout(),this._data&&this._createTrack(),this.addEventListener("load",(function(e){L(t.children,e.target)&&(t.data=e.detail.payload)}))}},{key:"processData",value:function(t){this._originalData=a.normalizeLocations(t)}},{key:"data",set:function(t){this.processData(t),this._applyFilters(),this._layoutObj=this.getLayout(),this._createTrack()}},{key:"filters",set:function(t){this._filters=t,this._applyFilters(),this._createTrack()}},{key:"_getFeatureColor",value:function(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?G(t.type):t.feature&&t.feature.type?G(t.feature.type):"black"}},{key:"_getFeatureFillColor",value:function(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}},{key:"_getShape",value:function(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?X(t.type):t.feature&&t.feature.type?X(t.feature.type):"rectangle"}},{key:"_createTrack",value:function(){this._layoutObj.init(this._data),Object(i.select)(this).selectAll("div").remove(),this.svg=Object(i.select)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}},{key:"_createFeatures",value:function(){var t=this;this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",(function(t){return"g_".concat(t.accession)})).selectAll("g.location-group").data((function(t){return t.locations.map((function(e){return Object.assign({},e,{feature:t})}))})).enter().append("g").attr("class","location-group");var e=this.locations.selectAll("g.fragment-group").data((function(t){return t.fragments.map((function(e){return Object.assign({},e,{feature:t.feature})}))})).enter().append("g").attr("class","fragment-group");e.append("path").attr("class",(function(e){return"".concat(t._getShape(e)," feature")})).attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("fill",(function(e){return t._getFeatureFillColor(e)})).attr("stroke",(function(e){return t._getFeatureColor(e)})).style("fill-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})).style("stroke-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})),e.append("rect").attr("class","outer-rectangle feature").attr("width",(function(e){return t.getSingleBaseWidth()*(e.end?e.end-e.start+1:1)})).attr("height",(function(e){return t._layoutObj.getFeatureHeight(e)})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("fill","transparent").attr("stroke","transparent").call(this.bindEvents,this)}},{key:"_applyFilters",value:function(){var t=this;if(!this._filters||this._filters.length<=0)this._data=this._originalData;else{var e=Object(C.a)(this._filters,"category"),n=Object.values(e).map((function(e){var n=e.map((function(e){return e.filterFn(t._originalData)}));return x.a.apply(void 0,$(n))})),i=T.a.apply(void 0,$(n));this._data=i}}},{key:"refresh",value:function(){var t=this;if(this.xScale&&this.seq_g){var e=this.seq_g.selectAll("g.fragment-group").data(this._data.reduce((function(t,e){return t.concat(e.locations.reduce((function(t,n){return t.concat(n.fragments.map((function(t){return Object.assign({},t,{feature:e})})))}),[]))}),[]));e.selectAll("path.feature").attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),e.selectAll("rect.outer-rectangle").attr("width",(function(e){return t.getSingleBaseWidth()*(e.end?e.end-e.start+1:1)})).attr("height",(function(e){return t._layoutObj.getFeatureHeight(e)})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),this._updateHighlight()}}},{key:"_updateHighlight",value:function(){this.trackHighlighter.updateHighlight()}}])&&J(e.prototype,n),r&&J(e,r),a}(F.a);e.default=rt},609:function(t,e,n){"use strict";var i=n(585),r=n(593),o=n(665);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var i,r,o=[],a=!0,l=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){l=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){var e="function"==typeof Map?new Map:void 0;return(f=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return p(t,arguments,m(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d(i,t)})(t)}function p(t,e,n){return(p=g()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&d(r,n.prototype),r}).apply(null,arguments)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(v,t);var e,n,a,s,f,p=(e=v,n=g(),function(){var t,i=m(e);if(n){var r=m(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return c(this,t)});function v(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),t=p.call(this),v._polyfillElementClosest(),t._updateScaleDomain=t._updateScaleDomain.bind(h(t)),t._initZoom=t._initZoom.bind(h(t)),t.zoomed=t.zoomed.bind(h(t)),t._applyZoomTranslation=t.applyZoomTranslation.bind(h(t)),t._resetEventHandler=t._resetEventHandler.bind(h(t));var e=!1;return t.applyZoomTranslation=function(){e||(e=!0,requestAnimationFrame((function(){e=!1,t._applyZoomTranslation()})))},t._onResize=t._onResize.bind(h(t)),t._listenForResize=t._listenForResize.bind(h(t)),t.trackHighlighter=new r.e({element:h(t),min:1}),t.scrollFilter=new r.c(h(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}return a=v,f=[{key:"observedAttributes",get:function(){return["displaystart","displayend","length","highlight"]}},{key:"_getClickCoords",value:function(){return i.event?[i.event.pageX,i.event.pageY]:null}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}}],(s=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",(function(t){console.error(t)})),"none"!==this._highlightEvent&&this.addEventListener("click",this._resetEventHandler),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),"none"!==this._highlightEvent&&this.removeEventListener("click",this._resetEventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"length",get:function(){return this._length},set:function(t){this._length=t,this.trackHighlighter.max=t}},{key:"xScale",get:function(){return this._xScale},set:function(t){this._xScale=t}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",get:function(){return this._svg},set:function(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()}},{key:"fixedHighlight",set:function(t){this.trackHighlighter.setFixedHighlight(t)}},{key:"getWidthWithMargins",value:function(){return this.width?this.width-this.margin.left-this.margin.right:0}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(i.scaleLinear)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){var t=this;this._zoom=Object(i.zoom)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter((function(){if(!(i.event instanceof WheelEvent))return!0;if(t.hasAttribute("scroll-filter")){var e=t.getAttribute("scrollable");if(e)return"true"===e}return!t.hasAttribute("use-ctrl-to-zoom")||i.event.ctrlKey})).on("zoom",this.zoomed)}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"attributeChangedCallback",value:function(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=i.event.transform.rescaleX(this._originXScale),!this.dontDispatch){var t=l(this.xScale.domain(),2),e=t[0],n=t[1];this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,e),displayend:Math.min(this.length,Math.max(n-1,e+1))},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,i.zoomIdentity.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new o.a(this._onResize),this._ro.observe(this)}},{key:"_resetEventHandler",value:function(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}},{key:"getXFromSeqPosition",value:function(t){return this.margin.left+this.xScale(t)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"createEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;e&&(e=e.feature?e.feature:e);var s={eventtype:t,coords:v._getClickCoords(),feature:e,target:l};return n&&(e&&e.fragments?s.highlight=e.fragments.map((function(t){return"".concat(t.start,":").concat(t.end)})).join(","):i.event&&i.event.shiftKey&&this._highlight?s.highlight="".concat(this._highlight,",").concat(o,":").concat(a):s.highlight=o&&a?"".concat(o,":").concat(a):null),r&&(s.selectedid=e&&e.protvistaFeatureId),new CustomEvent("change",{detail:s,bubbles:!0,cancelable:!0})}},{key:"bindEvents",value:function(t,e){t.on("mouseover",(function(t,n,i){e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,!1,t.start,t.end,i[n]))})).on("mouseout",(function(){e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))})).on("click",(function(t,n,i){e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,!0,t.start,t.end,i[n]))}))}}])&&u(a.prototype,s),f&&u(a,f),v}(f(HTMLElement));e.a=Object(r.f)(v,{initialValue:{top:10,right:10,bottom:10,left:10}})},613:function(t,e,n){"use strict";var i=n(590),r=n(621),o=n(596),a=n(595),l=n(664),s=n(616),u=Math.min;var c=function(t,e,n){for(var c=n?a.a:o.a,h=t[0].length,f=t.length,p=f,g=Array(f),d=1/0,m=[];p--;){var v=t[p];p&&e&&(v=Object(i.a)(v,Object(l.a)(e))),d=u(v.length,d),g[p]=!n&&(e||h>=120&&v.length>=120)?new r.a(p&&v):void 0}v=t[0];var y=-1,b=g[0];t:for(;++y<h&&m.length<d;){var _=v[y],w=e?e(_):_;if(_=n||0!==_?_:0,!(b?Object(s.a)(b,w):c(m,w,n))){for(p=f;--p;){var k=g[p];if(!(k?Object(s.a)(k,w):c(t[p],w,n)))continue t}b&&b.push(w),m.push(_)}}return m},h=n(598),f=n(594);var p=function(t){return Object(f.a)(t)?t:[]},g=Object(h.a)((function(t){var e=Object(i.a)(t,p);return e.length&&e[0]===t[0]?c(e):[]}));e.a=g},619:function(t,e,n){"use strict";var i=n(682),r=n(598),o=n(621),a=n(596),l=n(595),s=n(616),u=n(676);var c=function(){},h=n(623),f=u.a&&1/Object(h.a)(new u.a([,-0]))[1]==1/0?function(t){return new u.a(t)}:c;var p=function(t,e,n){var i=-1,r=a.a,u=t.length,c=!0,p=[],g=p;if(n)c=!1,r=l.a;else if(u>=200){var d=e?null:f(t);if(d)return Object(h.a)(d);c=!1,r=s.a,g=new o.a}else g=e?[]:p;t:for(;++i<u;){var m=t[i],v=e?e(m):m;if(m=n||0!==m?m:0,c&&v==v){for(var y=g.length;y--;)if(g[y]===v)continue t;e&&g.push(v),p.push(m)}else r(g,v,n)||(g!==p&&g.push(v),p.push(m))}return p},g=n(594),d=Object(r.a)((function(t){return p(Object(i.a)(t,1,g.a,!0))}));e.a=d},859:function(t,e,n){"use strict";var i=n(603),r=n(585);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g(t);if(e){var r=g(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(l,t);var e,n,i,o=f(l);function l(){return s(this,l),o.apply(this,arguments)}return e=l,(n=[{key:"connectedCallback",value:function(){c(g(l.prototype),"connectedCallback",this).call(this),this._height=Number(this.getAttribute("height"))||40,this._type=this.getAttribute("type")||"line-graph-track",this._yScale=Object(r.scaleLinear)(),this._data&&this._createTrack()}},{key:"data",set:function(t){this._data=t,this._createTrack()}},{key:"_createTrack",value:function(){var t=this;Object(r.select)(this).selectAll("svg").remove(),this.svg=Object(r.select)(this).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg);var e=[],n=[],i=[];this._data.forEach((function(t){e.push.apply(e,a(t.range)),n.push(Object(r.min)(t.values,(function(t){return t.position}))),i.push(Object(r.max)(t.values,(function(t){return t.position})))})),this.minRange=Object(r.min)(e),this.maxRange=Object(r.max)(e),this.beginning=Object(r.min)(n),this.end=Object(r.max)(i),this.chartGroup=this.svg.append("g").attr("class","chart-group"),this._initYScale(),this.chart=this.chartGroup.selectAll(".chart").data(this._data).enter().append("g").attr("class","chart"),this.chart.append("path").attr("class","graph").attr("id",(function(t){return t.name})).attr("d",(function(e){return e.colour=e.colour||Object(r.interpolateRainbow)(Math.random()),e.fill=e.fill||"none",t.drawLine(e)(e.values)})).attr("fill",(function(t){return t.fill})).attr("stroke",(function(t){return t.colour})).attr("transform","translate(0,0)");var o=this.chartGroup.append("g").attr("class","mouse-over-effects"),l=this.chartGroup.selectAll("path.graph"),s=o.selectAll(".mouse-per-line").data(this._data).enter().append("g").attr("class","mouse-per-line");s.append("circle").attr("r",7).style("stroke",(function(t){return t.colour})).style("fill","none").style("stroke-width","1px").style("opacity","0"),s.append("text").attr("transform","translate(10,3)");var u=this;o.append("rect").attr("width",this.width).attr("height",this._height).attr("fill","none").attr("pointer-events","all").on("mouseout",(function(){r.selectAll(".mouse-per-line circle").style("opacity","0"),r.selectAll(".mouse-per-line text").style("opacity","0")})).on("mousemove",(function(){var e=r.mouse(t);if(e[0]<u.xScale(u.beginning)||e[0]>u.xScale(u.end)+u.getSingleBaseWidth())r.selectAll(".mouse-per-line circle").style("opacity","0"),r.selectAll(".mouse-per-line text").style("opacity","0");else{var n={},i=Math.floor(u.xScale.invert(e[0]));r.selectAll(".mouse-per-line circle").style("opacity",(function(t){var e=t.values.find((function(t){return t.position===i}));return e&&e.value?"1":"0"})),r.selectAll(".mouse-per-line text").style("opacity","1"),r.selectAll(".mouse-per-line text").text((function(t){var e=t.values.find((function(t){return t.position===i}));return n[t.name]=e,e?e.value:""})),r.selectAll(".mouse-per-line").attr("transform",(function(t,n){for(var i=0,r=l.nodes()[n].getTotalLength(),o=null,a={};o=Math.floor((i+r)/2),a=l.nodes()[n].getPointAtLength(o),o!==r&&o!==i||a.x===e[0];)if(a.x>e[0])r=o;else{if(!(a.x<e[0]))break;i=o}return"translate(".concat(e[0],",").concat(a.y,")")}));var o={eventtype:"mouseover",feature:n,highlight:"".concat(i,":").concat(i),type:t._type,target:t};t.dispatchEvent(new CustomEvent("change",{detail:o,bubbles:!0,cancelable:!0}))}}))}},{key:"refresh",value:function(){var t=this;this.chart&&(this.chart.selectAll("path.graph").attr("d",(function(e){return t.drawLine(e)(e.values)})),this._updateHighlight())}},{key:"_initYScale",value:function(){this._yScale.domain([this.minRange,this.maxRange]).range([this._height,0])}},{key:"drawLine",value:function(t){var e=this,n=t.lineCurve||"curveLinear";return("none"!==t.fill?Object(r.area)().y1((function(t){return e._yScale(t.value)})).y0((function(){return e._yScale(0)})):Object(r.line)().y((function(t){return e._yScale(t.value)}))).defined((function(t){return null!==t.value})).x((function(t){return e.getXFromSeqPosition(t.position+1)-e.getSingleBaseWidth()/2})).curve(r[n])}}])&&u(e.prototype,n),i&&u(e,i),l}(i.default);e.a=d},860:function(t){t.exports=JSON.parse('[{"name":"chart1","colour":"#0000ee","fill":"#5555ee","range":[0,50],"values":[{"position":41,"value":20},{"position":42,"value":40},{"position":43,"value":10},{"position":44,"value":0},{"position":45,"value":49},{"position":46,"value":34},{"position":47,"value":17},{"position":48,"value":20},{"position":49,"value":40},{"position":50,"value":10},{"position":51,"value":0},{"position":52,"value":49},{"position":53,"value":34},{"position":54,"value":17},{"position":55,"value":20},{"position":56,"value":40},{"position":57,"value":10},{"position":58,"value":0},{"position":59,"value":49},{"position":60,"value":null},{"position":61,"value":null},{"position":62,"value":34},{"position":63,"value":34},{"position":64,"value":34}]},{"name":"chart2","range":[0,100],"lineCurve":"curveStep","values":[{"position":41,"value":0},{"position":42,"value":10},{"position":43,"value":10},{"position":44,"value":20},{"position":45,"value":60},{"position":46,"value":100},{"position":47,"value":40},{"position":48,"value":0},{"position":49,"value":50},{"position":50,"value":10},{"position":51,"value":20},{"position":52,"value":60},{"position":53,"value":70},{"position":54,"value":40},{"position":55,"value":30},{"position":56,"value":50},{"position":57,"value":10},{"position":58,"value":20},{"position":59,"value":60}]}]')}}]);