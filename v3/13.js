(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1016:function(t,e){t.exports='<h1 id="protvista-filter">protvista-filter</h1>\n<p><a href="https://www.npmjs.com/package/protvista-filter"><img src="https://img.shields.io/npm/v/protvista-filter.svg" alt="Published on NPM"></a></p>\n<p>A custom element to filter data</p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;protvista-filter for=&quot;filtered-component-id&quot;&gt;&lt;/protvista-filter&gt;</code></pre>\n<h2 id="api-reference">API Reference</h2>\n<h2 id="properties">Properties</h2>\n<h4 id="filters-array"><code>filters</code>: <code>Array</code></h4>\n<p>The filter configuration</p>\n<pre><code class="language-js">[\n  {\n    name: &quot;filter_name&quot;,\n    type: {\n      name: &quot;group_name&quot;,\n      text: &quot;Group Label&quot;\n    },\n    options: {\n      labels: [&quot;Filter option label&quot;],\n      colors: [&quot;#333&quot;] // Array so you can specify colour ranges\n    },\n    filterData: item =&gt; {} // the filter function\n  }\n];</code></pre>\n<h3 id="events">Events</h3>\n<p>When an option is selected, a <code>change</code> event is emitted, with type <code>activefilters</code>. It contains an array of the selected filters, which contains callback function to apply to the data.</p>\n'},170:function(t,e,n){"use strict";n.r(e);var r,i,o,a,c,u=n(0),s=n.n(u),l=n(629),f=n(803),h=n(63),p=n(632);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(l,t);var e,n,u,s=v(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this)).filters=[],t.selectedFilters=new Set,t}return e=l,u=[{key:"properties",get:function(){return{filters:{type:Array},selectedFilters:{type:Set},for:{type:String}}}},{key:"styles",get:function(){return Object(h.b)(c||(c=g(["\n      :host {\n        font-size: 0.8rem;\n      }\n\n      :host[disabled] {\n        opacity: 0.5;\n      }\n\n      .protvista_checkbox {\n        position: relative;\n        cursor: pointer;\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        margin-top: 10px;\n        line-height: 24px;\n        outline: none;\n      }\n\n      .protvista_checkbox_input {\n        position: absolute;\n        opacity: 0;\n        cursor: pointer;\n        height: 0;\n        width: 0;\n      }\n\n      .checkmark {\n        opacity: 0.4;\n        height: 25px;\n        width: 25px;\n        background-color: #eee;\n        border-radius: 4px;\n        box-sizing: border-box;\n        border: 1px solid #bdc3c7;\n      }\n\n      .protvista_checkbox_input:checked ~ .checkmark {\n        opacity: 1;\n      }\n\n      .protvista_checkbox_label {\n        margin-left: 0.2rem;\n        line-height: 1rem;\n      }\n    "])))}}],(n=[{key:"connectedCallback",value:function(){m(w(l.prototype),"connectedCallback",this).call(this),this.addEventListener("filterChange",this._onFilterChange),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this))}},{key:"disconnectedCallback",value:function(){m(w(l.prototype),"disconnectedCallback",this).call(this),this.manager&&this.manager.unregister(this),this.removeEventListener("filterChange",this._onFilterChange)}},{key:"render",value:function(){var t=this,e=Object(p.a)(this.filters,(function(t){return t.type.text}));return Object(h.c)(r||(r=g(["\n      ","\n    "])),Object.keys(e).map((function(n){return Object(h.c)(i||(i=g(["\n            <h4>","</h4>\n            <div>\n              ","\n            </div>\n          "])),n,e[n].map((function(e){return Object(h.c)(o||(o=g(["\n                    ","\n                  "])),t.getCheckBox(e))})))})))}},{key:"getCheckBox",value:function(t){var e=this,n=t.name,r=t.options,i=r.labels;null==r.colors.length&&(r.colors=[r.colors]);var o=r.colors.length>1;return Object(h.c)(a||(a=g(['\n      <label\n        class="protvista_checkbox ','"\n        tabindex="0"\n      >\n        <input\n          type="checkbox"\n          class="protvista_checkbox_input"\n          ?checked="true"\n          .value="','"\n          @change="','"\n        />\n        <span\n          class="checkmark"\n          style=','\n        ></span>\n        <span class="protvista_checkbox_label">\n          ',"\n        </span>\n      </label>\n    "])),o?"compound":"",n,(function(){return e.toggleFilter(n)}),"background: ".concat(o?"\n            linear-gradient(".concat(r.colors[0],",\n            ").concat(r.colors[1],")\n          "):r.colors[0],";"),i.join("/"))}},{key:"toggleFilter",value:function(t){var e=this;this.selectedFilters.has(t)?this.selectedFilters.delete(t):this.selectedFilters.add(t),this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,detail:{type:"filters",handler:"property",for:this.for,value:this.filters.filter((function(t){return e.selectedFilters.has(t.name)})).map((function(t){return{category:t.type.name,filterFn:t.filterData}}))}}))}}])&&y(e.prototype,n),u&&y(e,u),l}(h.a),S=n(603),k=n(745),E=n(620),j=n(701),M=n(111),x=n(35),P=n(1016),A=n.n(P),C=Math.sqrt(50),N=Math.sqrt(10),F=Math.sqrt(2);function R(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=C?10:o>=N?5:o>=F?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=C?10:o>=N?5:o>=F?2:1)}var L=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},D=function(t){var e=t,n=t;function r(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;n(t[o],e)<0?r=o+1:i=o}return r}return 1===t.length&&(e=function(e,n){return t(e)-n},n=function(t){return function(e,n){return L(t(e),n)}}(t)),{left:r,center:function(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);var a=r(t,n,i,o-1);return a>i&&e(t[a-1],n)>-e(t[a],n)?a-1:a},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;n(t[o],e)>0?i=o:r=o+1}return r}}};var T=D(L),I=T.right,H=(T.left,D((function(t){return null===t?NaN:+t})).center,I),q=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function B(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function W(){}var V="\\s*([+-]?\\d+)\\s*",z="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",U="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G=/^#([0-9a-f]{3,8})$/,Z=new RegExp("^rgb\\("+[V,V,V]+"\\)$"),X=new RegExp("^rgb\\("+[U,U,U]+"\\)$"),$=new RegExp("^rgba\\("+[V,V,V,z]+"\\)$"),Y=new RegExp("^rgba\\("+[U,U,U,z]+"\\)$"),K=new RegExp("^hsl\\("+[z,U,U]+"\\)$"),Q=new RegExp("^hsla\\("+[z,U,U,z]+"\\)$"),J={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function tt(){return this.rgb().formatHex()}function et(){return this.rgb().formatRgb()}function nt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=G.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?rt(e):3===n?new ct(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?it(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?it(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Z.exec(t))?new ct(e[1],e[2],e[3],1):(e=X.exec(t))?new ct(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=$.exec(t))?it(e[1],e[2],e[3],e[4]):(e=Y.exec(t))?it(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=K.exec(t))?ft(e[1],e[2]/100,e[3]/100,1):(e=Q.exec(t))?ft(e[1],e[2]/100,e[3]/100,e[4]):J.hasOwnProperty(t)?rt(J[t]):"transparent"===t?new ct(NaN,NaN,NaN,0):null}function rt(t){return new ct(t>>16&255,t>>8&255,255&t,1)}function it(t,e,n,r){return r<=0&&(t=e=n=NaN),new ct(t,e,n,r)}function ot(t){return t instanceof W||(t=nt(t)),t?new ct((t=t.rgb()).r,t.g,t.b,t.opacity):new ct}function at(t,e,n,r){return 1===arguments.length?ot(t):new ct(t,e,n,null==r?1:r)}function ct(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ut(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)}function st(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function lt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ft(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new pt(t,e,n,r)}function ht(t){if(t instanceof pt)return new pt(t.h,t.s,t.l,t.opacity);if(t instanceof W||(t=nt(t)),!t)return new pt;if(t instanceof pt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,c=o-i,u=(o+i)/2;return c?(a=e===o?(n-r)/c+6*(n<r):n===o?(r-e)/c+2:(e-n)/c+4,c/=u<.5?o+i:2-o-i,a*=60):c=u>0&&u<1?0:a,new pt(a,c,u,t.opacity)}function pt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function dt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function gt(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}q(W,nt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:tt,formatHex:tt,formatHsl:function(){return ht(this).formatHsl()},formatRgb:et,toString:et}),q(ct,at,B(W,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ut,formatHex:ut,formatRgb:st,toString:st})),q(pt,(function(t,e,n,r){return 1===arguments.length?ht(t):new pt(t,e,n,null==r?1:r)}),B(W,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new pt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new pt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ct(dt(t>=240?t-240:t+120,i,r),dt(t,i,r),dt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var yt=function(t){return function(){return t}};function mt(t,e){return function(n){return t+n*e}}function bt(t){return 1==(t=+t)?vt:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):yt(isNaN(e)?n:e)}}function vt(t,e){var n=e-t;return n?mt(t,n):yt(isNaN(t)?e:t)}var _t=function t(e){var n=bt(e);function r(t,e){var r=n((t=at(t)).r,(e=at(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=vt(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function wt(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),c=new Array(i);for(n=0;n<i;++n)r=at(e[n]),o[n]=r.r||0,a[n]=r.g||0,c[n]=r.b||0;return o=t(o),a=t(a),c=t(c),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=c(t),r+""}}}wt((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,c=r<e-1?t[r+2]:2*o-i;return gt((n-r/e)*e,a,i,o,c)}})),wt((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],c=t[(r+2)%e];return gt((n-r/e)*e,i,o,a,c)}}));var Ot=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function St(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kt(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Ft(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var Et=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},jt=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}};function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var xt=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===Mt(t)||(t={}),null!==e&&"object"===Mt(e)||(e={}),e)n in t?r[n]=Ft(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Pt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,At=new RegExp(Pt.source,"g");var Ct=function(t,e){var n,r,i,o=Pt.lastIndex=At.lastIndex=0,a=-1,c=[],u=[];for(t+="",e+="";(n=Pt.exec(t))&&(r=At.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),c[a]?c[a]+=i:c[++a]=i),(n=n[0])===(r=r[0])?c[a]?c[a]+=r:c[++a]=r:(c[++a]=null,u.push({i:a,x:jt(n,r)})),o=At.lastIndex;return o<e.length&&(i=e.slice(o),c[a]?c[a]+=i:c[++a]=i),c.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)c[(n=u[r]).i]=n.x(t);return c.join("")})};function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ft=function(t,e){var n,r=Nt(e);return null==e||"boolean"===r?yt(e):("number"===r?jt:"string"===r?(n=nt(e))?(e=n,_t):Ct:e instanceof nt?_t:e instanceof Date?Et:St(e)?Ot:Array.isArray(e)?kt:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?xt:jt)(t,e)},Rt=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}};function Lt(t){return+t}var Dt=[0,1];function Tt(t){return t}function It(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Ht(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=It(i,r),o=n(a,o)):(r=It(r,i),o=n(o,a)),function(t){return o(r(t))}}function qt(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=It(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=H(t,e,1,r)-1;return o[n](i[n](e))}}function Bt(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Wt(){var t,e,n,r,i,o,a=Dt,c=Dt,u=Ft,s=Tt;function l(){var t,e,n,u=Math.min(a.length,c.length);return s!==Tt&&(t=a[0],e=a[u-1],t>e&&(n=t,t=e,e=n),s=function(n){return Math.max(t,Math.min(e,n))}),r=u>2?qt:Ht,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),c,u)))(t(s(e)))}return f.invert=function(n){return s(e((o||(o=r(c,a.map(t),jt)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Lt),l()):a.slice()},f.range=function(t){return arguments.length?(c=Array.from(t),l()):c.slice()},f.rangeRound=function(t){return c=Array.from(t),u=Rt,l()},f.clamp=function(t){return arguments.length?(s=!!t||Tt,l()):s!==Tt},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function Vt(){return Wt()(Tt,Tt)}function zt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Ut=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gt(t){if(!(e=Ut.exec(t)))throw new Error("invalid format: "+t);var e;return new Zt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Zt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Gt.prototype=Zt.prototype,Zt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function Xt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}var $t,Yt,Kt,Qt,Jt=function(t){return(t=Xt(Math.abs(t)))?t[1]:NaN},te=function(t,e){var n=Xt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},ee={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return te(100*t,e)},r:te,s:function(t,e){var n=Xt(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-($t=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Xt(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},ne=function(t){return t},re=Array.prototype.map,ie=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Yt=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?ne:(e=re.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,c=e[0],u=0;i>0&&c>0&&(u+c+1>r&&(c=Math.max(1,r-u)),o.push(t.substring(i-=c,i+c)),!((u+=c+1)>r));)c=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",c=void 0===t.numerals?ne:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(re.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Gt(t)).fill,n=t.align,f=t.sign,h=t.symbol,p=t.zero,d=t.width,g=t.comma,y=t.precision,m=t.trim,b=t.type;"n"===b?(g=!0,b="g"):ee[b]||(void 0===y&&(y=12),m=!0,b="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var v="$"===h?i:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",_="$"===h?o:/[%p]/.test(b)?u:"",w=ee[b],O=/[defgprs%]/.test(b);function S(t){var i,o,u,h=v,S=_;if("c"===b)S=w(t)+S,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),y),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==f&&(k=!1),h=(k?"("===f?f:s:"-"===f||"("===f?"":f)+h,S=("s"===b?ie[8+$t/3]:"")+S+(k&&"("===f?")":""),O)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){S=(46===u?a+t.slice(i+1):t.slice(i))+S,t=t.slice(0,i);break}}g&&!p&&(t=r(t,1/0));var E=h.length+t.length+S.length,j=E<d?new Array(d-E+1).join(e):"";switch(g&&p&&(t=r(j+t,j.length?d-S.length:1/0),j=""),n){case"<":t=h+t+S+j;break;case"=":t=h+j+t+S;break;case"^":t=j.slice(0,E=j.length>>1)+h+t+S+j.slice(E);break;default:t=j+h+t+S}return c(t)}return y=void 0===y?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),S.toString=function(){return t+""},S}return{format:f,formatPrefix:function(t,e){var n=f(((t=Gt(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Jt(e)/3))),i=Math.pow(10,-r),o=ie[8+r/3];return function(t){return n(i*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),Kt=Yt.format,Qt=Yt.formatPrefix;function oe(t,e,n,r){var i,o=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=C?i*=10:o>=N?i*=5:o>=F&&(i*=2),e<t?-i:i}(t,e,n);switch((r=Gt(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Jt(e)/3)))-Jt(Math.abs(t)))}(o,a))||(r.precision=i),Qt(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Jt(e)-Jt(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Jt(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Kt(r)}function ae(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,a,c=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=R(t,e,n))||!isFinite(a))return[];if(a>0){var u=Math.round(t/a),s=Math.round(e/a);for(u*a<t&&++u,s*a>e&&--s,o=new Array(i=s-u+1);++c<i;)o[c]=(u+c)*a}else{a=-a;var l=Math.round(t*a),f=Math.round(e*a);for(l/a<t&&++l,f/a>e&&--f,o=new Array(i=f-l+1);++c<i;)o[c]=(l+c)/a}return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return oe(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,c=o.length-1,u=o[a],s=o[c],l=10;for(s<u&&(i=u,u=s,s=i,i=a,a=c,c=i);l-- >0;){if((i=R(u,s,n))===r)return o[a]=u,o[c]=s,e(o);if(i>0)u=Math.floor(u/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,s=Math.floor(s*i)/i}r=i}return t},t}function ce(t){return function(t){if(Array.isArray(t))return ue(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ue(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?se(Object(n),!0).forEach((function(e){fe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var he="#990000",pe="#99cc00",de="#002594",ge="#8FE3FF",ye="#009e73",me=[/disease/i,/pathogenic\b/i,/risk factor/i],be=[/benign/i],ve=[/uncertain/i,/conflicting/i,/unclassified/i],_e=function(t,e){return e.some((function(e){return e.test(t)}))},we=function(t,e){return t.map((function(t){var n=t.variants.filter((function(t){return e(t)}));return le(le({},t),{},{variants:ce(n)})}))},Oe=[{name:"disease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely disease"],colors:[he]},filterData:function(t){return we(t,(function(t){return _e(t.clinicalSignificances,me)}))}},{name:"predicted",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Predicted deleterious","Predicted benign"],colors:[de,ge]},filterData:function(t){return we(t,(function(t){return void 0!==t.polyphenScore||void 0!==t.siftScore}))}},{name:"nonDisease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely benign"],colors:[pe]},filterData:function(t){return we(t,(function(t){return _e(t.clinicalSignificances,be)}))}},{name:"uncertain",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Uncertain"],colors:[ye]},filterData:function(t){return we(t,(function(t){return void 0===t.clinicalSignificances&&void 0===t.polyphenScore&&void 0===t.siftScore||_e(t.clinicalSignificances,ve)}))}},{name:"UniProt",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["UniProt reviewed"],colors:["#9f9f9f"]},filterData:function(t){return we(t,(function(t){return t.xrefNames&&(t.xrefNames.includes("uniprot")||t.xrefNames.includes("UniProt"))}))}},{name:"ClinVar",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["ClinVar reviewed"],colors:["#9f9f9f"]},filterData:function(t){return we(t,(function(t){return t.xrefNames&&(t.xrefNames.includes("ClinVar")||t.xrefNames.includes("clinvar"))}))}},{name:"LSS",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["Large scale studies"],colors:["#9f9f9f"]},filterData:function(t){return we(t,(function(t){return"large_scale_study"===t.sourceType||"mixed"===t.sourceType}))}}],Se=function t(){var e=Vt();return e.copy=function(){return Bt(e,t())},zt.apply(e,arguments),ae(e)}().domain([0,1]).range([de,ge]),ke=function(t){var e,n,r=[{variants:[t]}];return Oe.find((function(t){return"disease"===t.name})).filterData(r)[0].variants.length>0?he:Oe.find((function(t){return"nonDisease"===t.name})).filterData(r)[0].variants.length>0?pe:Oe.find((function(t){return"uncertain"===t.name})).filterData(r)[0].variants.length>0?ye:Oe.find((function(t){return"predicted"===t.name})).filterData(r)[0].variants.length>0?(e=t.polyphenScore,n=t.siftScore,Se((n||0+(1-e?e:1))/(e&&n?2:1))):ye},Ee=Oe,je=[{name:"Type",type:{name:"Type",text:"Filter Type"},options:{labels:["Dissulfide bond"],colors:["#CCC"]},filterData:function(t){return t.filter((function(t){return"DISULFID"===t.type}))}},{name:"carbohyd",type:{name:"Type",text:"Filter Type"},options:{labels:["Carbohydrate"],colors:["#CCC"]},filterData:function(t){return t.filter((function(t){return"CARBOHYD"===t.type}))}}];e.default=function(){Object(M.a)("protvista-variation",f.a),Object(M.a)("data-loader",l.a),Object(M.a)("protvista-track",S.default),Object(M.a)("protvista-feature-adapter",E.a),Object(M.a)("protvista-variation-adapter",k.a),Object(M.a)("protvista-manager",j.a),Object(M.a)("protvista-filter",O);var t=Object(u.useRef)(null),e=Object(u.useRef)(null),n=Object(u.useRef)(null);return Object(u.useEffect)((function(){null!==t&&(t.current.filters=Ee,n.current.filters=je),null!==e&&(e.current.colorConfig=ke)})),s.a.createElement(u.Fragment,null,s.a.createElement(x.default,{content:A.a}),s.a.createElement("protvista-manager",{attributes:"activefilters filters"},s.a.createElement("h3",null,"Track Filter"),s.a.createElement("div",{style:{display:"flex"}},s.a.createElement("protvista-filter",{style:{minWidth:"20%"},for:"my-track",ref:n}),s.a.createElement("protvista-track",{style:{minWidth:"70%"},length:"770",id:"my-track"},s.a.createElement("protvista-feature-adapter",{id:"adapter1"},s.a.createElement("data-loader",null,s.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM"}))))),s.a.createElement("h3",null,"Variation filter"),s.a.createElement("div",{style:{display:"flex"}},s.a.createElement("protvista-filter",{style:{minWidth:"20%"},for:"my-variation-track",ref:t}),s.a.createElement("protvista-variation",{length:"770",style:{minWidth:"70%"},id:"my-variation-track",ref:e},s.a.createElement("protvista-variation-adapter",null,s.a.createElement("data-loader",null,s.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/variation/P05067"})))))))}},593:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){c=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"b",(function(){return N})),n.d(e,"e",(function(){return F})),n.d(e,"a",(function(){return R})),n.d(e,"d",(function(){return L})),n.d(e,"c",(function(){return D})),n.d(e,"f",(function(){return T}));var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,r=void 0===n?-1/0:n,i=e.max,a=void 0===i?1/0:i;o(this,t),this.segments=[],this.max=a,this.min=r,this.regionString=null}var e,n,i;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var r=n.start,i=n.end,o=n.color;if(e)return"".concat(r,":").concat(i).concat(o?":".concat(o):"");var a=r===t.min?"":r,c=i===t.max?"":i;return"".concat(a,":").concat(c).concat(o?":".concat(o):"")})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var n=r(t.split(":"),4),i=n[0],o=n[1],a=n[2];if(void 0!==n[3])throw new Error("there should be at most 2 ':' per region. Region: ".concat(t));var c=i?Number(i):e.min,u=o?Number(o):e.max,s=""!==a?a:void 0;if(c>u){var l=[u,c];c=l[0],u=l[1]}if(c<e.min&&(c=e.min),u>e.max&&(u=e.max),Number.isNaN(c))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));if(Number.isNaN(u))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));if(s&&!s.match(/^#[0-9a-f]{6,8}$/i))throw new Error("The parsed value of ".concat(a," is not a color in hex format. Region: ").concat(t));return{start:c,end:u,color:s}})):this.segments=[]}}])&&a(e.prototype,n),i&&a(e,i),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},l=function(){function t(e){var n=e.element,r=e.min,i=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.element._highlightcolor="#FFEB3B66",this.region=new c({min:r,max:i}),this.fixedHighlight=null}var e,n,r;return e=t,(n=[{key:"max",set:function(t){this.region.max=t}},{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),this.element._highlightcolor=this.element.getAttribute("highlightcolor")||"#FFEB3B66",null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(s(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(s(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(s(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("pointer-events","none").merge(e).attr("fill",(function(e){return e.color?e.color:t.element._highlightcolor})).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}}])&&u(e.prototype,n),r&&u(e,r),t}();function f(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var h=function(t){return t};function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;p(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null,this.scrollDelay=n}var e,n,r;return e=t,(n=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),this.scrollDelay)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"wheel",value:function(t){var e=t.target,n=t.timeStamp;this.element.contains(e)?n<this.timeStampWheelOutside+this.scrollDelay?this.blockScroll(n):this.setElementScrollable(!0):this.blockScroll(n)}}])&&d(e.prototype,n),r&&d(e,r),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=v(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function b(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e,n){return e&&O(t.prototype,e),n&&O(t,n),t}function k(t,e,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=P(t);if(e){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function x(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=["left","right","top","bottom"],C=A.map((function(t){return"margin".concat(t)})),N=c,F=l,R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var r=t.split(",").map((function(t){return t.split(":")}));if(r.length<2)throw new Error("There should be at least 2 points to create a scale");e=r.map((function(t){var e=t[0].trim().toUpperCase();if(!f(e))throw new Error("The color '".concat(e," is not valid'"));return e})),n=r.map((function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n}))}return{range:e,domain:n}},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,r=void 0===n?h:n,i=e.valueFormatter,o=void 0===i?h:i;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map((function(t){return t.split(":")})),c={};return a.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));c[r(t[0])]=o(t[1])})),c}return{}},D=g,T=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialValue:{top:0,bottom:0,left:0,right:0}},r=function(t){E(r,t);var e=M(r);function r(){var t;return w(this,r),(t=e.call(this)).margin=n.initialValue,t}return S(r,[{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&C.includes(t)&&(this[t]=n),k(P(r.prototype),"attributeChangedCallback",this).call(this,t,e,n)}}],[{key:"observedAttributes",get:function(){return[].concat(b(k(P(r),"observedAttributes",this)),b(C))}}]),r}(t),i=m(A);try{var o=function(){var t=e.value;Object.defineProperty(r.prototype,"margin".concat(t),{get:function(){return this.margin[t]||0},set:function(e){this.margin[t]=+e}})};for(i.s();!(e=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}return r}},594:function(t,e,n){"use strict";var r=n(608),i=n(604);e.a=function(t){return Object(i.a)(t)&&Object(r.a)(t)}},595:function(t,e,n){"use strict";e.a=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},596:function(t,e,n){"use strict";var r=n(599);e.a=function(t,e){return!!(null==t?0:t.length)&&Object(r.a)(t,e,0)>-1}},598:function(t,e,n){"use strict";var r=n(614);var i=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},o=Math.max;var a=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,c=o(r.length-e,0),u=Array(c);++a<c;)u[a]=r[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=r[a];return s[e]=n(u),i(t,this,s)}};var c=function(t){return function(){return t}},u=n(663),s=u.a?function(t,e){return Object(u.a)(t,"toString",{configurable:!0,enumerable:!1,value:c(e),writable:!0})}:r.a,l=Date.now;var f=function(t){var e=0,n=0;return function(){var r=l(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(s);e.a=function(t,e){return f(a(t,e,r.a),t+"")}},599:function(t,e,n){"use strict";var r=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var i=function(t){return t!=t};var o=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};e.a=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},603:function(t,e,n){"use strict";n.r(e),n.d(e,"DefaultLayout",(function(){return D})),n.d(e,"getColorByType",(function(){return Z}));var r=n(585),i=n(599),o=n(608),a=n(643),c=n(622),u=n(604);var s=function(t){return"string"==typeof t||!Object(c.a)(t)&&Object(u.a)(t)&&"[object String]"==Object(a.a)(t)},l=/\s/;var f=function(t){for(var e=t.length;e--&&l.test(t.charAt(e)););return e},h=/^\s+/;var p=function(t){return t?t.slice(0,f(t)+1).replace(h,""):t},d=n(653),g=n(652),y=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,b=/^0o[0-7]+$/i,v=parseInt;var _=function(t){if("number"==typeof t)return t;if(Object(g.a)(t))return NaN;if(Object(d.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(d.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=p(t);var n=m.test(t);return n||b.test(t)?v(t.slice(2),n?2:8):y.test(t)?NaN:+t};var w=function(t){return t?(t=_(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var O=function(t){var e=w(t),n=e%1;return e==e?n?e-n:e:0},S=n(590);var k=function(t,e){return Object(S.a)(e,(function(e){return t[e]}))},E=n(661);var j=function(t){return null==t?[]:k(t,Object(E.a)(t))},M=Math.max;var x=function(t,e,n,r){t=Object(o.a)(t)?t:j(t),n=n&&!r?O(n):0;var a=t.length;return n<0&&(n=M(a+n,0)),s(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Object(i.a)(t,e,n)>-1},P=n(632),A=n(619),C=n(613),N=n(609);function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var R=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"isContinuous",value:function(t){return"bridge"!==(t=t.toLowerCase())}}],(n=[{key:"getFeatureShape",value:function(t,e,n,r){return r=r||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+r]&&(r="rectangle"),this["_"+r]()}},{key:"_rectangle",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}},{key:"_roundRectangle",value:function(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 -6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 -6,-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,-6Z"}},{key:"_line",value:function(){return"M0,".concat(this._ftHeight/2," L").concat(this._ftWidth,",").concat(this._ftHeight/2)}},{key:"_bridge",value:function(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}},{key:"_getMiddleLine",value:function(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}},{key:"_diamond",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}},{key:"_chevron",value:function(){var t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_catFace",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_triangle",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_wave",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getPolygon",value:function(t){for(var e="M ",n=this._ftWidth/2,r=0;r<t;r++)e+=5*Math.cos(2*Math.PI*r/t)+n+","+(5*Math.sin(2*Math.PI*r/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_hexagon",value:function(){return this._getPolygon(6)}},{key:"_pentagon",value:function(){return this._getPolygon(5)}},{key:"_circle",value:function(){var t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}},{key:"_arrow",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_doubleBar",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getBrokenEnd",value:function(){var t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}},{key:"_getBrokenStart",value:function(){var t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}},{key:"_discontinuosStart",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuos",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuosEnd",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}},{key:"_helix",value:function(){for(var t=2.5,e=2.5,n=Math.round(this._ftWidth/5),r="",i=0;i<n;i++)r+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+",2.5 "+e+", 0 C"+(e-t)+",2.5 "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5;return r}},{key:"_strand",value:function(){var t=0;this._ftWidth>5&&(t=this._ftWidth-5);var e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+"M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z"}}])&&F(e.prototype,n),r&&F(e,r),t}();function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=function(){function t(e){var n=e.layoutHeight,r=e.padding,i=void 0===r?1:r,o=e.minHeight,a=void 0===o?17:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._padding=i,this._minHeight=a,this._layoutHeight=n}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this._features=t}},{key:"getFeatureYPos",value:function(){var t=this.getFeatureHeight();return this._layoutHeight/2-t/2}},{key:"getFeatureHeight",value:function(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}])&&L(e.prototype,n),r&&L(e,r),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=W(t);if(e){var i=W(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return B(this,n)}}function B(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V=function(t,e){return e.some((function(e){return n=t,r=e,!(Number(r.start)>Number(n.end)||Number(r.end)<Number(n.start));var n,r}))},z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(o,t);var e,n,r,i=q(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).featuresMap=new Map,e._rowHeight=0,e._rows=[],e._minHeight=15,e}return e=o,(n=[{key:"init",value:function(t){var e=this;t.forEach((function(t){var n=e._rows.findIndex((function(e){return!V(t,e)}));n>=0?(e._rows[n].push(t),e.featuresMap.set(t,n)):(e._rows.push([t]),e.featuresMap.set(t,e._rows.length-1))})),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}},{key:"getOffset",value:function(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}},{key:"getFeatureYPos",value:function(t){var e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}},{key:"getFeatureHeight",value:function(){return this._rowHeight-2*this._padding}}])&&I(e.prototype,n),r&&I(e,r),o}(D),U={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},EPITOPE:{name:"epitope",label:"Epitopes",tooltip:"",shape:"rectangle",color:"#4ade33"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},G=function(t){if(U[t.toUpperCase()])return U[t.toUpperCase()].shape;var e=Object.values(U).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e?e.shape:"rectangle"},Z=function(t){if(U[t.toUpperCase()])return U[t.toUpperCase()].color;var e=Object.values(U).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e||console.log(t),e?e.color:"black"};function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e,n){return(J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt(t);if(e){var i=rt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(a,t);var e,n,i,o=et(a);function a(){return K(this,a),o.apply(this,arguments)}return e=a,i=[{key:"normalizeLocations",value:function(t){return t.map((function(t){var e=t.locations,n=t.start,r=t.end;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:r}]}]})}))}},{key:"observedAttributes",get:function(){return N.a.observedAttributes.concat(["highlight","color","shape","filters"])}}],(n=[{key:"getLayout",value:function(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new z({layoutHeight:this._height}):new D({layoutHeight:this._height})}},{key:"connectedCallback",value:function(){var t=this;J(rt(a.prototype),"connectedCallback",this).call(this),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new R,this._layoutObj=this.getLayout(),this._data&&this._createTrack(),this.addEventListener("load",(function(e){x(t.children,e.target)&&(t.data=e.detail.payload)}))}},{key:"processData",value:function(t){this._originalData=a.normalizeLocations(t)}},{key:"data",set:function(t){this.processData(t),this._applyFilters(),this._layoutObj=this.getLayout(),this._createTrack()}},{key:"filters",set:function(t){this._filters=t,this._applyFilters(),this._createTrack()}},{key:"_getFeatureColor",value:function(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?Z(t.type):t.feature&&t.feature.type?Z(t.feature.type):"black"}},{key:"_getFeatureFillColor",value:function(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}},{key:"_getShape",value:function(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?G(t.type):t.feature&&t.feature.type?G(t.feature.type):"rectangle"}},{key:"_createTrack",value:function(){this._layoutObj.init(this._data),Object(r.select)(this).selectAll("div").remove(),this.svg=Object(r.select)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}},{key:"_createFeatures",value:function(){var t=this;this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",(function(t){return"g_".concat(t.accession)})).selectAll("g.location-group").data((function(t){return t.locations.map((function(e){return Object.assign({},e,{feature:t})}))})).enter().append("g").attr("class","location-group");var e=this.locations.selectAll("g.fragment-group").data((function(t){return t.fragments.map((function(e){return Object.assign({},e,{feature:t.feature})}))})).enter().append("g").attr("class","fragment-group");e.append("path").attr("class",(function(e){return"".concat(t._getShape(e)," feature")})).attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("fill",(function(e){return t._getFeatureFillColor(e)})).attr("stroke",(function(e){return t._getFeatureColor(e)})).style("fill-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})).style("stroke-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9}));var n=e.selectAll("g.residue-group").data((function(t){var e;return t.feature.ptms?[null===(e=t.feature.ptms)||void 0===e?void 0:e.map((function(e){return Object.assign({},e,{feature:t.feature,position:e.position})}))]:[]})).enter().append("g").attr("class","residue-group");e.append("rect").attr("class","outer-rectangle feature").attr("width",(function(e){return t.getSingleBaseWidth()*(e.end?e.end-e.start+1:1)})).attr("height",(function(e){return t._layoutObj.getFeatureHeight(e)})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("fill","transparent").attr("stroke","transparent").call(this.bindEvents,this),n.selectAll("g.residue").data((function(t){return t})).enter().append("path").attr("class",(function(e){return"".concat(t._getShape(e)," residue")})).attr("d",(function(e){var n=1;return t.length>500&&(n=t.getSingleBaseWidth()<4?4:1),t._featureShape.getFeatureShape(t.getSingleBaseWidth()/2,t._layoutObj.getFeatureHeight(),n,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(Number(e.feature.start)+Number(e.position)-1)+t.getSingleBaseWidth()/4,",\n          ").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("fill","#06038D").style("fill-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})).style("stroke-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})).call(this.bindEvents,this)}},{key:"_applyFilters",value:function(){var t=this;if(!this._filters||this._filters.length<=0)this._data=this._originalData;else{var e=Object(P.a)(this._filters,"category"),n=Object.values(e).map((function(e){var n=e.map((function(e){return e.filterFn(t._originalData)}));return A.a.apply(void 0,$(n))})),r=C.a.apply(void 0,$(n));this._data=r}}},{key:"refresh",value:function(){var t=this;if(this.xScale&&this.seq_g){var e=this.seq_g.selectAll("g.fragment-group").data(this._data.reduce((function(t,e){return t.concat(e.locations.reduce((function(t,n){return t.concat(n.fragments.map((function(t){return Object.assign({},t,{feature:e})})))}),[]))}),[])),n=this.seq_g.selectAll("g.residue-group").data(this._data.reduce((function(t,e){var n;return t.concat([null===(n=e.ptms)||void 0===n?void 0:n.reduce((function(t){return t.concat((function(t){return Object.assign({},t,{feature:e,position:t.position})}))}),[])])}),[]));e.selectAll("path.feature").attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),n.selectAll("path.residue").attr("d",(function(e){var n=1;return t.length>500&&(n=t.getSingleBaseWidth()<4?4:1),t._featureShape.getFeatureShape(t.getSingleBaseWidth()/2,t._layoutObj.getFeatureHeight(e),n,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(Number(e.feature.start)+Number(e.position)-1)+t.getSingleBaseWidth()/4,",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),e.selectAll("rect.outer-rectangle").attr("width",(function(e){return t.getSingleBaseWidth()*(e.end?e.end-e.start+1:1)})).attr("height",(function(e){return t._layoutObj.getFeatureHeight(e)})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),this._updateHighlight()}}},{key:"_updateHighlight",value:function(){this.trackHighlighter.updateHighlight()}}])&&Q(e.prototype,n),i&&Q(e,i),a}(N.a);e.default=it},609:function(t,e,n){"use strict";var r=n(585),i=n(593),o=n(665);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){c=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p(t,arguments,y(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,t)})(t)}function p(t,e,n){return(p=d()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&g(i,n.prototype),i}).apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(m,t);var e,n,a,u,h,p=(e=m,n=d(),function(){var t,r=y(e);if(n){var i=y(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return l(this,t)});function m(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),t=p.call(this),m._polyfillElementClosest(),t._updateScaleDomain=t._updateScaleDomain.bind(f(t)),t._initZoom=t._initZoom.bind(f(t)),t.zoomed=t.zoomed.bind(f(t)),t._applyZoomTranslation=t.applyZoomTranslation.bind(f(t)),t._resetEventHandler=t._resetEventHandler.bind(f(t));var e=!1;return t.applyZoomTranslation=function(){e||(e=!0,requestAnimationFrame((function(){e=!1,t._applyZoomTranslation()})))},t._onResize=t._onResize.bind(f(t)),t._listenForResize=t._listenForResize.bind(f(t)),t.trackHighlighter=new i.e({element:f(t),min:1}),t.scrollFilter=new i.c(f(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}return a=m,h=[{key:"observedAttributes",get:function(){return["displaystart","displayend","length","highlight"]}},{key:"_getClickCoords",value:function(){return r.event?[r.event.pageX,r.event.pageY]:null}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}}],(u=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",(function(t){console.error(t)})),"none"!==this._highlightEvent&&this.addEventListener("click",this._resetEventHandler),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),"none"!==this._highlightEvent&&this.removeEventListener("click",this._resetEventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"length",get:function(){return this._length},set:function(t){this._length=t,this.trackHighlighter.max=t}},{key:"xScale",get:function(){return this._xScale},set:function(t){this._xScale=t}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",get:function(){return this._svg},set:function(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()}},{key:"fixedHighlight",set:function(t){this.trackHighlighter.setFixedHighlight(t)}},{key:"getWidthWithMargins",value:function(){return this.width?this.width-this.margin.left-this.margin.right:0}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(r.scaleLinear)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){var t=this;this._zoom=Object(r.zoom)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter((function(){if(!(r.event instanceof WheelEvent))return!0;if(t.hasAttribute("no-scroll"))return!1;if(t.hasAttribute("filter-scroll")){var e=t.getAttribute("scrollable");if(e)return"true"===e}return!t.hasAttribute("use-ctrl-to-zoom")||r.event.ctrlKey})).on("zoom",this.zoomed)}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"attributeChangedCallback",value:function(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=r.event.transform.rescaleX(this._originXScale),!this.dontDispatch){var t=c(this.xScale.domain(),2),e=t[0],n=t[1];this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,e),displayend:Math.min(this.length,Math.max(n-1,e+1))},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.zoomIdentity.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new o.a(this._onResize),this._ro.observe(this)}},{key:"_resetEventHandler",value:function(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}},{key:"getXFromSeqPosition",value:function(t){return this.margin.left+this.xScale(t)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"createEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;e&&(e=e.feature?e.feature:e);var u={eventtype:t,coords:m._getClickCoords(),feature:e,target:c};return n&&(e&&e.fragments?u.highlight=e.fragments.map((function(t){return"".concat(t.start,":").concat(t.end)})).join(","):r.event&&r.event.shiftKey&&this._highlight?u.highlight="".concat(this._highlight,",").concat(o,":").concat(a):u.highlight=o&&a?"".concat(o,":").concat(a):null),i&&(u.selectedid=e&&e.protvistaFeatureId),new CustomEvent("change",{detail:u,bubbles:!0,cancelable:!0})}},{key:"bindEvents",value:function(t,e){t.on("mouseover",(function(t,n,r){e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,!1,t.start,t.end,r[n]))})).on("mouseout",(function(){e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))})).on("click",(function(t,n,r){e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,!0,t.start,t.end,r[n]))}))}}])&&s(a.prototype,u),h&&s(a,h),m}(h(HTMLElement));e.a=Object(i.f)(m,{initialValue:{top:10,right:10,bottom:10,left:10}})},613:function(t,e,n){"use strict";var r=n(590),i=n(621),o=n(596),a=n(595),c=n(664),u=n(616),s=Math.min;var l=function(t,e,n){for(var l=n?a.a:o.a,f=t[0].length,h=t.length,p=h,d=Array(h),g=1/0,y=[];p--;){var m=t[p];p&&e&&(m=Object(r.a)(m,Object(c.a)(e))),g=s(m.length,g),d[p]=!n&&(e||f>=120&&m.length>=120)?new i.a(p&&m):void 0}m=t[0];var b=-1,v=d[0];t:for(;++b<f&&y.length<g;){var _=m[b],w=e?e(_):_;if(_=n||0!==_?_:0,!(v?Object(u.a)(v,w):l(y,w,n))){for(p=h;--p;){var O=d[p];if(!(O?Object(u.a)(O,w):l(t[p],w,n)))continue t}v&&v.push(w),y.push(_)}}return y},f=n(598),h=n(594);var p=function(t){return Object(h.a)(t)?t:[]},d=Object(f.a)((function(t){var e=Object(r.a)(t,p);return e.length&&e[0]===t[0]?l(e):[]}));e.a=d},619:function(t,e,n){"use strict";var r=n(682),i=n(598),o=n(621),a=n(596),c=n(595),u=n(616),s=n(676);var l=function(){},f=n(623),h=s.a&&1/Object(f.a)(new s.a([,-0]))[1]==1/0?function(t){return new s.a(t)}:l;var p=function(t,e,n){var r=-1,i=a.a,s=t.length,l=!0,p=[],d=p;if(n)l=!1,i=c.a;else if(s>=200){var g=e?null:h(t);if(g)return Object(f.a)(g);l=!1,i=u.a,d=new o.a}else d=e?[]:p;t:for(;++r<s;){var y=t[r],m=e?e(y):y;if(y=n||0!==y?y:0,l&&m==m){for(var b=d.length;b--;)if(d[b]===m)continue t;e&&d.push(m),p.push(y)}else i(d,m,n)||(d!==p&&d.push(m),p.push(y))}return p},d=n(594),g=Object(i.a)((function(t){return p(Object(r.a)(t,1,d.a,!0))}));e.a=g},620:function(t,e,n){"use strict";n.d(e,"d",(function(){return j})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return l}));var r=n(743),i=[{name:"ECO:0000269",description:"Manual assertion based on experiment",shortDescription:"Publication",acronym:"EXP",isManual:!0},{name:"ECO:0000303",description:"Manual assertion based on opinion",shortDescription:"Publication",acronym:"NAS",isManual:!0},{name:"ECO:0000305",description:"Manual assertion inferred by curator",shortDescription:"Curated",acronym:"IC",isManual:!0},{name:"ECO:0000250",description:"Manual assertion inferred from sequence similarity",shortDescription:"By similarity",acronym:"ISS",isManual:!0},{name:"ECO:0000255",description:"Manual assertion according to rules",shortDescription:"Sequence Analysis",acronym:"ISM",isManual:!0},{name:"ECO:0007744",description:"Manual assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXM",isManual:!0},{name:"ECO:0000312",description:"Manual assertion inferred from database entries",shortDescription:"Imported",acronym:"MI",isManual:!0},{name:"ECO:0000256",description:"Automatic assertion according to rules",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000259",description:"Automatic assertion inferred from signature match",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0007829",description:"Automatic assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXA"},{name:"ECO:0000213",description:"Automatic assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXA"},{name:"ECO:0000244",description:"Manual assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXM",isManual:!0},{name:"ECO:0000313",description:"Automatic assertion inferred from database entries",shortDescription:"Imported",acronym:"AI"},{name:"ECO:0000260",description:"Manual assertion inferred from signature match",shortDescription:"InterPro annotation",acronym:"SGNM",isManual:!0}];function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(t){return t?"\n      <ul>".concat(t.map((function(t){var e=i.find((function(e){return e.name===t.code}));return e?"<li title='".concat(e.description,'\' style="padding: .25rem 0">').concat(e.shortDescription,":&nbsp;").concat(t.source?function(t){var e;if((null===(e=t.name)||void 0===e?void 0:e.toLowerCase())==="PubMed".toLowerCase())return"".concat(t.id,"&nbsp;(<a href='").concat(t.url,"' style=\"color:#FFF\" target='_blank'>").concat(t.name,"</a>&nbsp;<a href='").concat(t.alternativeUrl,"' style=\"color:#FFF\" target='_blank'>EuropePMC</a>)");var n="&nbsp;<a href='".concat(t.url,"' style=\"color:#FFF\" target='_blank'>").concat(t.id,"</a>");return t.name?t.name.startsWith("Hpp")?"".concat(n,"&nbsp;(").concat(t.name.slice(3),")"):"".concat(n,"&nbsp;(").concat(t.name,")"):n}(t.source):"","</li>"):""})).join(""),"</ul>\n    "):""},f=function(t){return"<ul>".concat(t.map((function(t){return'<li style="padding: .25rem 0">'.concat(t.name," ").concat(t.url?'<a href="'.concat(t.url,'" style="color:#FFF" target="_blank">').concat(t.id,"</a>"):"".concat(t.name," ").concat(t.id),"</li>")})).join(""),"</ul>")},h={A:"alanine",S:"serine",T:"threonine",Y:"tyrosine"},p=function(t,e){var n=t.peptide,r=t.begin,i=Number(r)+e.position-1,o=n.charAt(e.position-1);return"".concat(i," phospho").concat(h[o])},d=function(t){var e="PROTEOMICS_PTM"===t.type?function(t){if(!t)return"";var e=t.flatMap((function(t){return t.dbReferences.map((function(t){return t.id}))})),n=o(new Set(e.flat()));return"\n  <ul>".concat(n.map((function(t){var e="Glue project"===t?"PXD012174":t;return"<li title='".concat(e,'\' style="padding: .25rem 0">').concat(e,'&nbsp;(<a href="').concat("https://www.ebi.ac.uk/pride/archive/projects/").concat(e,'" style="color:#FFF" target="_blank">PRIDE</a>\n      ').concat("Glue project"===t?')</li><li title="publication" style="padding: .25rem 0">Publication:&nbsp;31819260&nbsp;(<a href="https://pubmed.ncbi.nlm.nih.gov/31819260" style="color:#FFF" target="_blank">PubMed</a>)</li>':'&nbsp;<a href="http://www.peptideatlas.org/builds/rice/phospho/" style="color:#FFF" target="_blank">PeptideAtlas</a>)</li>')})).join(""),"</ul>\n")}(t.ptms):l(t.evidences),n="PROTEOMICS_PTM"===t.type&&t.ptms.map((function(e){return p(t,e)})),r="PROTEOMICS_PTM"===t.type&&t.ptms.flatMap((function(t){return t.dbReferences.map((function(t){return t.id}))})),i=t.description;if("BINDING"===t.type||"Binding site"===t.type){var a="";t.ligandPart&&(a+="".concat(t.ligandPart.name," of ")),t.ligand&&(a+=t.ligand.name),t.description&&(a+="; ".concat(t.description)),i=a}try{return"\n      ".concat(i?"<h5>Description</h5><p>".concat(i,"</p>"):"","\n      ").concat(t.matchScore?"<h5>Match score</h5><p>".concat(t.matchScore,"%</p>"):"","\n      ").concat(t.ftId?"<h5>Feature ID</h5><p>".concat(t.ftId,"</p>"):"","\n      ").concat(t.alternativeSequence?"<h5>Alternative sequence</h5><p>".concat(t.alternativeSequence,"</p>"):"","\n      ").concat(n?'<h5 data-article-id="ptm_processing_section">PTMs</h5><ul>'.concat(n.map((function(t){return"<li>".concat(t,"</li>")})).join(""),"</ul>\n            "):"","\n      ").concat(t.peptide&&"PROTEOMICS_PTM"===t.type?'<h5 data-article-id="mod_res_large_scale#what-is-the-goldsilverbronze-criterion">Peptidoform</h5><p>'.concat(function(t,e){if(!e)return"";var n=e.map((function(t){return{name:t.name,position:t.position}})),r="",i=0;return n.forEach((function(e){r="".concat(r).concat(t.slice(i,e.position),"[").concat(e.name,"]"),i=e.position})),r="".concat(r).concat(t.slice(i)),"<p>".concat(r,"</p>")}(t.peptide,t.ptms),"</p>"):"","\n      ").concat(t.peptide&&"PROTEOMICS_PTM"!==t.type?"<h5>Peptide</h5><p>".concat(t.peptide,"</p>"):""," \n      ").concat(t.xrefs?"<h5>Cross-references</h5>".concat(f(t.xrefs)):"","\n      ").concat(e?"<h5>Evidence</h5>".concat(e):"","\n      ").concat(t.ptms&&r&&!r.includes("Glue project")?'<hr /><h5 data-article-id="mod_res_large_scale#what-is-the-goldsilverbronze-criterion">PTM statistical attributes</h5><ul>'.concat(t.ptms.map((function(e){return e.dbReferences.map((function(n){return"<li><b>".concat(n.id,'</b></li>\n                      <li style="text-indent: 1em"><b>').concat(p(t,e),'</b></li>\n                      <li style="text-indent: 2em">PubMed ID: <a href="https://europepmc.org/article/MED/').concat(n.properties["Pubmed ID"],'" style="color:#FFF" target="_blank">\n                      ').concat(n.properties["Pubmed ID"],'</a>\n                      </li>\n                      <li style="text-indent: 2em"><span data-article-id="mod_res_large_scale#confidence-score">Confidence score</span>: ').concat(n.properties["Confidence score"],'</li>\n                      <li style="text-indent: 2em">Universal Spectrum Id: \n                      <a href="http://proteomecentral.proteomexchange.org/usi/?usi=').concat(n.properties["Universal Spectrum Id"],'" style="color:#FFF" target="_blank">View on ProteomeXchange</a>\n                      </li>\n                      <li style="text-indent: 2em">PSM Count (0.05 gFLR): ').concat(n.properties["PSM Count (0.05 gFLR)"],'</li>\n                      <li style="text-indent: 2em">Final site probability: ').concat(n.properties["Final site probability"],"</li>\n                      ")})).join("")})).join(""),"</ul>"):"","\n        ")}catch(t){return console.error(t),""}};function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){var e="function"==typeof Map?new Map:void 0;return(b=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return v(t,arguments,O(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),w(r,t)})(t)}function v(t,e,n){return(v=_()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&w(i,n.prototype),i}).apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j=function(t){var e=[],n=t.features;return n&&n.length>0&&(e=function(t){return t.map((function(t){var e={};return t.begin&&(e.start=t.begin),u(u({},t),e)}))}(e=n.map((function(t){return k(k({},t),{},{tooltipContent:d(t),protvistaFeatureId:Object(r.a)()})})))),e},M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(c,t);var e,n,r,i,o,a=(e=c,n=_(),function(){var t,r=O(e);if(n){var i=O(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return m(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this))._adaptedData=[],t}return r=c,(i=[{key:"connectedCallback",value:function(){this.subscribers=this.getAttribute("subscribers"),this._filters=this.getAttribute("filters")?this.getAttribute("filters").split(","):[],this._addLoaderListeners()}},{key:"data",set:function(t){this._emitEvent(t)}},{key:"subscribers",get:function(){return this._subscribers},set:function(t){t&&(this._subscribers=t.split(","))}},{key:"parseEntry",value:function(t){this._adaptedData=j(t)}},{key:"filterData",value:function(){var t=this;Array.isArray(this._adaptedData)&&this._filters.length>0&&(this._adaptedData=this._adaptedData.filter((function(e){return t._filters.includes(e.type)})))}},{key:"adaptedData",get:function(){return this._adaptedData}},{key:"_setSubscriberData",value:function(){var t=this;this.subscribers.forEach((function(e){var n=document.querySelector(e);n?n.data=t._adaptedData:console.error("Element with id '".concat(e,"' not found"))}))}},{key:"_emitEvent",value:function(t){this.parseEntry(t),this.filterData(),this.subscribers&&this._setSubscriberData(),this.dispatchEvent(new CustomEvent("load",{detail:{payload:this._adaptedData},bubbles:!0,cancelable:!0}))}},{key:"_addLoaderListeners",value:function(){var t=this;this.addEventListener("load",(function(e){if(e.target!==t){e.stopPropagation();try{if(e.detail.payload.errorMessage)throw e.detail.payload.errorMessage;t._emitEvent(e.detail.payload)}catch(e){t.dispatchEvent(new CustomEvent("error",{detail:e,bubbles:!0,cancelable:!0}))}}}))}}])&&y(r.prototype,i),o&&y(r,o),c}(b(HTMLElement));e.a=M},629:function(t,e,n){"use strict";n.d(e,"b",(function(){return m}));var r=n(675);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){u=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,t)})(t)}function l(t,e,n){return(l=f()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},y=new Map,m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Headers({accept:"application/json"}),n=y.get(t);if(n)return n;var r=g(void 0,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.fetch(t,{headers:e});case 2:if((r=n.sent).ok){n.next=5;break}throw new Error("Request Failed: Status = ".concat(r.status,"; URI = ").concat(t,"; Time = ").concat(new Date));case 5:if(204!==r.status){n.next=7;break}return n.abrupt("return",{payload:null,headers:r.headers});case 7:return n.next=9,r.json();case 9:return i=n.sent,n.abrupt("return",{payload:i,headers:r.headers});case 11:case"end":return n.stop()}}),n)})));return y.set(t,r),r.catch((function(){return y.delete(t)})),r},b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(y,t);var e,n,i,a,s,l=(e=y,n=f(),function(){var t,r=p(e);if(n){var i=p(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return u(this,t)});function y(){var t;return d(this,y),(t=l.call(this))._data=null,t.selector=(t.getAttribute("selector")||"").trim()||function(t){return t},t}return i=y,s=[{key:"is",get:function(){return"data-loader"}}],(a=[{key:"fetch",value:function(){return g(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,i,a,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=this.children,(e=Array.from(s).filter((function(t){return t.matches('source[src], script[type="application/json"]')}))).length){t.next=3;break}return t.abrupt("return");case 3:n=[],a=o(e),t.prev=5,a.s();case 7:if((c=a.n()).done){t.next=31;break}if(u=c.value,t.prev=9,!(u instanceof HTMLSourceElement)){t.next=22;break}return t.t0=Object,t.t1=Object,t.t2={},t.next=16,m(u.src);case 16:t.t3=t.sent,t.t4=t.t1.assign.call(t.t1,t.t2,t.t3),t.t5={srcElement:u,src:u.src},i=t.t0.assign.call(t.t0,t.t4,t.t5),t.next=23;break;case 22:i={payload:JSON.parse(u.textContent)};case 23:return t.abrupt("break",31);case 26:t.prev=26,t.t6=t.catch(9),n.push(t.t6);case 29:t.next=7;break;case 31:t.next=36;break;case 33:t.prev=33,t.t7=t.catch(5),a.e(t.t7);case 36:return t.prev=36,a.f(),t.finish(36);case 39:if(i){t.next=43;break}this._errors=n;try{this.dispatchEvent(new CustomEvent("error",{detail:n,bubbles:!0,cancelable:!0}))}catch(t){console.error(t)}return t.abrupt("return");case 43:"string"==typeof this.selector?this._data=Object(r.a)(i.payload,this.selector):this._data=this.selector(i.payload),i.payload=this.data,this.dispatchEvent(new CustomEvent("load",{detail:i,bubbles:!0,cancelable:!0}));case 46:case"end":return t.stop()}var s}),t,this,[[5,33,36,39],[9,26]])})))}},{key:"data",get:function(){return this._data}},{key:"loaded",get:function(){return!!this.data}},{key:"errors",get:function(){return this._errors}},{key:"selector",get:function(){return this._selector},set:function(t){this._selector=t}},{key:"connectedCallback",value:function(){this.fetch()}}])&&c(i.prototype,a),s&&c(i,s),y}(s(HTMLElement));e.a=b},701:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,h(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function s(t,e,n){return(s=l()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,r,o,u,s=(e=p,n=l(),function(){var t,r=h(e);if(n){var i=h(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return c(this,t)});function p(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=s.call(this)).protvistaElements=new Set,t.attributeValues=new Map,t.propertyValues=new Map,t.mouseOver=!1,t}return r=p,u=[{key:"observedAttributes",get:function(){return["attributes","length","displaystart","displayend","highlight"]}}],(o=[{key:"length",get:function(){return this.attributeValues.get("length")},set:function(t){this.attributeValues.set("length",t)}},{key:"displaystart",get:function(){return this.attributeValues.get("displaystart")},set:function(t){this.attributeValues.set("displaystart",t)}},{key:"displayend",get:function(){return this.attributeValues.get("displayend")},set:function(t){this.attributeValues.set("displayend",t)}},{key:"highlight",get:function(){return this.attributeValues.get("highlight")},set:function(t){this.attributeValues.set("highlight",t)}},{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){if("attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute");this.attributeValues=new Map(this._attributes.filter((function(t){return!p.observedAttributes.includes(t)})).map((function(t){return[t,null]})))}else"length"===t&&(this.length=n),"displaystart"===t&&(this.displaystart=n),"displayend"===t&&(this.displayend=n),"highlight"===t&&(this.highlight=n);this.applyAttributes()}}},{key:"register",value:function(t){this.protvistaElements.add(t),this.applyAttributes()}},{key:"unregister",value:function(t){this.protvistaElements.delete(t)}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"applyAttributes",value:function(){var t=this;this.protvistaElements.forEach((function(e){t.attributeValues.forEach((function(t,n){!1===t||null==t?e.removeAttribute(n):e.setAttribute(n,"boolean"==typeof t?"":t)}))}))}},{key:"applyProperties",value:function(t){var e=this;if(t){var n=this.querySelector("#".concat(t));this.propertyValues.forEach((function(t,e){n[e]=t}))}else this.protvistaElements.forEach((function(t){e.propertyValues.forEach((function(e,n){t[n]=e}))}))}},{key:"isRegisteredAttribute",value:function(t){return i(this.attributeValues.keys()).includes(t)||p.observedAttributes.includes(t)}},{key:"_changeListener",value:function(t){var e=this;if(t.detail)switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:this.isRegisteredAttribute(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach((function(n){e.isRegisteredAttribute(n)&&e.attributeValues.set(n,t.detail[n])})),this.applyAttributes()}}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}}])&&a(r.prototype,o),u&&a(r,u),p}(u(HTMLElement));e.a=p},743:function(t,e,n){"use strict";var r,i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(t){return"string"==typeof t&&a.test(t)},u=[],s=0;s<256;++s)u.push((s+256).toString(16).substr(1));var l,f,h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n},p=0,d=0;e.a=function(t,e,n){var r=e&&n||0,i=e||new Array(16),a=(t=t||{}).node||l,c=void 0!==t.clockseq?t.clockseq:f;if(null==a||null==c){var u=t.random||(t.rng||o)();null==a&&(a=l=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==c&&(c=f=16383&(u[6]<<8|u[7]))}var s=void 0!==t.msecs?t.msecs:Date.now(),g=void 0!==t.nsecs?t.nsecs:d+1,y=s-p+(g-d)/1e4;if(y<0&&void 0===t.clockseq&&(c=c+1&16383),(y<0||s>p)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=s,d=g,f=c;var m=(1e4*(268435455&(s+=122192928e5))+g)%4294967296;i[r++]=m>>>24&255,i[r++]=m>>>16&255,i[r++]=m>>>8&255,i[r++]=255&m;var b=s/4294967296*1e4&268435455;i[r++]=b>>>8&255,i[r++]=255&b,i[r++]=b>>>24&15|16,i[r++]=b>>>16&255,i[r++]=c>>>8|128,i[r++]=255&c;for(var v=0;v<6;++v)i[r+v]=a[v];return e||h(i)}},745:function(t,e,n){"use strict";var r,i,o,a,c,u,s,l=n(620),f=n(743),h=n(632),p=function(t){var e,n,r,i,o,a;return"\n                <h5>Variant</h5><p>".concat(t.wildType," > ").concat(t.alternativeSequence||"","</p>\n                ").concat(t.populationFrequencies?(a=t.populationFrequencies,"<hr/><h5>Population frequencies</h5>".concat(a.map((function(t){return"<p>".concat(t.frequency," - ").concat(t.populationName," (").concat(t.source,")</p>")})).join(""))):"","\n                ").concat(t.consequenceType?"<h5>Consequence</h5><p>".concat(t.consequenceType,"</p>"):"","\n                ").concat(t.somaticStatus?"<h5>Somatic</h5><p>".concat(0===t.somaticStatus?"No":"Yes","</p>"):"","\n                ").concat((null===(e=t.genomicLocation)||void 0===e?void 0:e.length)?"<h5>Location</h5><p>".concat(t.genomicLocation.join(", "),"</p>"):"","\n                ").concat(t.ftId?"<h5>Feature ID</h5><p>".concat(t.ftId,"</p>"):"","\n                ").concat(t.descriptions?(o=t.descriptions,"<hr/><h5>Description</h5>".concat(o.map((function(t){return"<p>".concat(t.value,"</p>")})).join(""),"\n  ")):"","\n                ").concat(t.association?(i=t.association,null==i?void 0:i.map((function(t){return"\n              <h4>Disease association</h4><p>".concat(t.name,"</p>\n              ").concat(t.description?"<>".concat(t.description,"</p>"):"","\n              ").concat(t.dbReferences?"<h5>Cross-references</h5>".concat(Object(l.b)(t.dbReferences)):"","\n              ").concat(Object(l.c)(t.evidences),"\n          ")})).join("")):"","\n                ").concat(t.predictions?(n=t.predictions,r=Object(h.a)(n,"predAlgorithmNameType"),Object.keys(r).map((function(t){var e=Object(h.a)(r[t],"predictionValType");return{algorithm:t,values:Object.keys(e).map((function(t){return{name:t,count:e[t].length}}))}})).map((function(t){return"<h6>".concat(t.algorithm,'</h6><ul class="no-bullet">').concat(t.values.map((function(t){return"<li>".concat(t.name,"</li>")})).join(""),"</ul>")})).join("")):"","\n                ").concat(function(t){if(t.locations.some((function(t){return"EnsemblViruses"===t.source}))){var e=t.xrefs.find((function(t){return"ENA"===t.name}));return e.id?'<h5>Ensembl COVID-19</h5>\n          <p>\n          <a href="https://covid-19.ensembl.org/Sars_cov_2/Variation/Explore?v='.concat(e.id,'" target="_blank" rel="noopener noreferrer">').concat(e.id,"</a>\n        </p>"):""}return""}(t),"\n                \n        ")};function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.A="A",t.C="C",t.D="D",t.E="E",t.Empty="*",t.F="F",t.G="G",t.H="H",t.I="I",t.K="K",t.L="L",t.M="M",t.N="N",t.Nl="NL",t.P="P",t.Q="Q",t.R="R",t.S="S",t.T="T",t.V="V",t.W="W",t.Y="Y"}(r||(r={})),function(t){t.CLINVAR="ClinVar",t.ESP="ESP",t.EXAC="ExAC",t.GENOMES1K="1000Genomes",t.BOVINE_SNP50="BovineSNP50",t.BOVINE_LD="BovineLD",t.BOVINE_HD="BovineHD",t.EQUINE_SNP50="EquineSNP50",t.CHICKEN_600K="Chicken600K",t.KG_HQ="1kg_hq",t.COSMIC="cosmic curated",t.REVIEWED="reviewed",t.UNIPROT="UniProt",t.DBSNP="dbSNP",t.ENSEMBL="Ensembl",t.ENSEMBL_PLANTS="EnsemblPlants",t.VECTORBASE="VectorBase",t.REFSEQ="RefSeq",t.DBGAP="dbGaP",t.DDD="DDD",t.PHARMCOGKB="PharmGKB",t.ENSEMBL_FUNGI="EnsemblFungi",t.ENSEMBL_METAZOA="EnsemblMetazoa",t.GNOMAD_V2="gnomAD_v2.0",t.GNOMAD_V3="gnomAD_v3.0",t.TCGA="NCI-TCGA",t.TCGA_COSMIC="NCI-TCGA Cosmic",t.DECIPHER="ddG2P",t.TOPMED="TOPMed",t.GNOMAD="gnomAD",t.PHARMGKB="pharmgkb",t.SGRP="SGRP",t.SGD="SGD",t.JEFFARES_SNPS="Jeffares_SNPs",t.JEFFARES_INDELS="Jeffares_Indels",t.ENSEMBL_VIRUSES="EnsemblViruses"}(i||(i={})),function(t){t.Benign="Benign",t.Disease="Disease",t.LikelyBenign="Likely benign",t.LikelyPathogenic="Likely pathogenic",t.Pathogenic="Pathogenic",t.Protective="Protective",t.VariantOfUncertainSignificance="Variant of uncertain significance"}(o||(o={})),function(t){t.Empty="-",t.Frameshift="frameshift",t.InframeDeletion="inframe deletion",t.Insertion="insertion",t.Missense="missense",t.StopGained="stop gained"}(a||(a={})),function(t){t.PolyPhen="PolyPhen",t.Sift="SIFT"}(c||(c={})),function(t){t.Benign="benign",t.Deleterious="deleterious",t.DeleteriousLowConfidence="deleterious - low confidence",t.PossiblyDamaging="possibly damaging",t.ProbablyDamaging="probably damaging",t.Tolerated="tolerated",t.ToleratedLowConfidence="tolerated - low confidence",t.Unknown="unknown"}(u||(u={})),function(t){t.LargeScaleStudy="large_scale_study",t.Mixed="mixed",t.UniProt="uniprot"}(s||(s={}));var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(a,t);var e,n,i,o=v(a);function a(){return g(this,a),o.apply(this,arguments)}return e=a,i=[{key:"is",get:function(){return"protvista-variation-adapter"}}],(n=[{key:"connectedCallback",value:function(){m(w(a.prototype),"connectedCallback",this).call(this),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this))}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this)}},{key:"parseEntry",value:function(t){this._adaptedData=function(t){var e=t.sequence,n=t.features.map((function(t){var e,n,i,o;return Object.assign(Object.assign({},t),{accession:null===(e=t.genomicLocation)||void 0===e?void 0:e.join(", "),variant:t.alternativeSequence?t.alternativeSequence:r.Empty,start:t.begin,xrefNames:(n=t.xrefs,i=t.sourceType,o=n?n.map((function(t){return t.name})):[],"uniprot"!==i&&"mixed"!==i||o.push("uniprot"),o),hasPredictions:t.predictions&&t.predictions.length>0,tooltipContent:p(t),protvistaFeatureId:Object(f.a)()})}));return n?{sequence:e,variants:n}:null}(t)}}])&&y(e.prototype,n),i&&y(e,i),a}(l.a);e.a=O},803:function(t,e,n){"use strict";var r=n(603),i=n(585),o=n(619),a=n(613),c=n(632);var u=function(t){var e=t.variants,n=t.sequence;if(!n||!e)return null;var r=n.split("").map((function(t,e){return{type:"VARIANT",normal:t,pos:e+1,variants:[]}}));return e.forEach((function(t){r[t.start-1]&&r[t.start-1].variants.push(t)})),r};function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._frequency=Object(i.scalePow)().exponent(.001).domain([0,1]).range([5,10]),this.drawVariationPlot=this.drawVariationPlot.bind(this)}var e,n,r;return e=t,(n=[{key:"drawVariationPlot",value:function(t,e){var n=e.getSingleBaseWidth()/2;t.each((function(t,r,o){var a=Object(i.select)(o[r]),c=t.filter((function(t){return 0!==t.variants.length})),u=a.selectAll("g").data(c,(function(t){return t.pos}));u.exit().remove();var s=u.enter().append("g").merge(u).selectAll("circle").data((function(t){return t.variants}));s.exit().remove(),s.enter().append("circle").merge(s).attr("class","feature").attr("title",(function(t){return t.start})).attr("r",(function(t){return t.size?t.size:5})).attr("cx",(function(t){return e.getXFromSeqPosition(t.start)+n})).attr("cy",(function(t){return e._yScale(t.variant.charAt(0))})).attr("name",(function(t){var e="*"===t.alternativeSequence?"STOP":t.alternativeSequence;return t.internalId="var_".concat(t.wildType).concat(t.start).concat(e),t.internalId})).attr("fill",(function(t){return t.color?t.color:e._colorConfig(t)})).call(e.bindEvents,e)}))}}])&&s(e.prototype,n),r&&s(e,r),t}();function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n,r){return(d="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=m(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function g(t,e,n,r,i){if(!d(t,e,n,r||t)&&i)throw new Error("failed to set property");return n}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=m(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function m(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var k=["G","A","V","L","I","S","T","C","M","D","N","E","Q","R","K","H","F","Y","W","P","d","*"],E=function(t,e){if(!t||t.length<=0)return null;var n=t[0];return n.forEach((function(n,r){var i=t.map((function(t){return t[r].variants}));n.variants=e.apply(void 0,O(i))})),n},j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(f,t);var e,n,r,s=v(f);function f(){return h(this,f),s.apply(this,arguments)}return e=f,r=[{key:"css",get:function(){return"\n    <style>\n    protvista-variation {\n      display: flex;\n      width: 100%;\n    }\n    \n    protvista-variation svg {\n      background-color: #fff;\n    }\n    \n    protvista-variation circle {\n      opacity: 0.6;\n    }\n    protvista-variation circle:hover {\n      opacity: 0.9;\n    }\n    protvista-variation .tick line,\n    protvista-variation .axis path {\n      opacity: 0.1;\n    }\n    \n    .protvista-highlight {\n      fill: #ffe999;\n    }\n    \n    protvista-variation .variation-y-right line,\n    protvista-variation .axis path {\n      fill: none;\n      stroke: none;\n    }\n    \n    </style>\n    "}}],(n=[{key:"connectedCallback",value:function(){y(w(f.prototype),"connectedCallback",this).call(this);var t=document.createElement("style");t.innerHTML=f.css,this.appendChild(t),this._height=Number(this.getAttribute("height"))?Number(this.getAttribute("height")):430,this._width=this._width?this._width:0,this._yScale=Object(i.scaleLinear)(),this._yScale=Object(i.scalePoint)().domain(k).range([0,this._height-this.margin.top-this.margin.bottom])}},{key:"processData",value:function(t){this._originalData=u(t)}},{key:"_createFeatures",value:function(){this._variationPlot=new l;var t=y(w(f.prototype),"svg",this).select("g.sequence-features"),e=t.attr("transform","translate(0, ".concat(this.margin.top,")")).append("g");this._series=e.datum(this._data),this._axisLeft=t.append("g"),this._axisRight=t.append("g"),this.updateScale()}},{key:"filters",set:function(t){g(w(f.prototype),"filters",t,this,!0),this.updateData(this._data),this.refresh()}},{key:"_applyFilters",value:function(){var t=this;if(!this._filters||this._filters.length<=0)this._data=this._originalData;else{var e=Object(c.a)(this._filters,"category"),n=Object.values(e).map((function(e){var n=e.map((function(e){return e.filterFn(t._originalData)}));return E(n,o.a)}));this._data=E(n,a.a)}}},{key:"colorConfig",get:function(){return this._colorConfig},set:function(t){this._colorConfig=t}},{key:"refresh",value:function(){this._series&&(this.updateScale(),this._series.call(this._variationPlot.drawVariationPlot,this),this._updateHighlight())}},{key:"updateScale",value:function(){this._yAxisLScale=Object(i.axisLeft)().scale(this._yScale).tickSize(-this.getWidthWithMargins()),this._yAxisRScale=Object(i.axisRight)().scale(this._yScale),this._axisLeft.attr("class","variation-y-left axis").attr("transform","translate(".concat(this.margin.left,",0)")).call(this._yAxisLScale),this._axisRight.attr("transform","translate(".concat(this.getWidthWithMargins()-this.margin.right+2,", 0)")).attr("class","variation-y-right axis").call(this._yAxisRScale)}},{key:"updateData",value:function(t){this._series&&this._series.datum(t)}}])&&p(e.prototype,n),r&&p(e,r),f}(r.default);e.a=j}}]);