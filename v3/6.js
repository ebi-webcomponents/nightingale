(window.webpackJsonp=window.webpackJsonp||[]).push([[6,4],{1032:function(t){t.exports=JSON.parse('{"sequence":"MLPGLALLLLAAWTARALEVPTDGNAGLLAEPQIAMFCGRLNMHMNVQNGKWDSDPSGTKTCIDTKEGILQYCQEVYPELQITNVVEANQPVTIQNWCKRGRKQCKTHPHFVIPYRCLVGEFVSDALLVPDKCKFLHQERMDVCETHLHWHTVAKETCSEKSTNLHDYGMLLPCGIDKFRGVEFVCCPLAEESDNVDSADAEEDDSDVWWGGADTDYADGSEDKVVEVAEEEEVAEVEEEEADDDEDDEDGDEVEEEAEEPYEEATERTTSIATTTTTTTESVEEVVREVCSEQAETGPCRAMISRWYFDVTEGKCAPFFYGGCGGNRNNFDTEEYCMAVCGSAMSQSLLKTTQEPLARDPVKLPTTAASTPDAVDKYLETPGDENEHAHFQKAKERLEAKHRERMSQVMREWEEAERQAKNLPKADKKAVIQHFQEKVESLEQEAANERQQLVETHMARVEAMLNDRRRLALENYITALQAVPPRPRHVFNMLKKYVRAEQKDRQHTLKHFEHVRMVDPKKAAQIRSQVMTHLRVIYERMNQSLSLLYNVPAVAEEIQDEVDELLQKEQNYSDDVLANMISEPRISYGNDALMPSLTETKTTVELLPVNGEFSLDDLQPWHSFGADSVPANTENEVEPVDARPAADRGLTTRPGSGLTNIKTEEISEVKMDAEFRHDSGYEVHHQKLVFFAEDVGSNKGAIIGLMVGGVVIATVIVITLVMLKKKQYTSIHHGVVEVDAAVTPEERHLSKMQQNGYENPTYKFFEQMQN","variants":[{"accession":"feature1","variant":"V","start":1,"end":1,"color":"orange"},{"accession":"feature2","variant":"C","start":2,"end":2,"color":"#33d"},{"accession":"feature3","variant":"T","start":3,"end":3,"color":"#336"},{"accession":"feature4","variant":"D","start":1,"end":1,"color":"#73d"},{"accession":"feature5","variant":"A","start":25,"end":25,"size":20,"color":"#63e"},{"accession":"feature6","variant":"R","start":770,"color":"#35d"}]}')},1033:function(t){t.exports=JSON.parse('{"sequence":"MLPGLALLLLAAWTARALEVPTDGNAGLLAEPQIAMFCGRLNMHMNVQNGKWDSDPSGTKTCIDTKEGILQYCQEVYPELQITNVVEANQPVTIQNWCKRGRKQCKTHPHFVIPYRCLVGEFVSDALLVPDKCKFLHQERMDVCETHLHWHTVAKETCSEKSTNLHDYGMLLPCGIDKFRGVEFVCCPLAEESDNVDSADAEEDDSDVWWGGADTDYADGSEDKVVEVAEEEEVAEVEEEEADDDEDDEDGDEVEEEAEEPYEEATERTTSIATTTTTTTESVEEVVREVCSEQAETGPCRAMISRWYFDVTEGKCAPFFYGGCGGNRNNFDTEEYCMAVCGSAMSQSLLKTTQEPLARDPVKLPTTAASTPDAVDKYLETPGDENEHAHFQKAKERLEAKHRERMSQVMREWEEAERQAKNLPKADKKAVIQHFQEKVESLEQEAANERQQLVETHMARVEAMLNDRRRLALENYITALQAVPPRPRHVFNMLKKYVRAEQKDRQHTLKHFEHVRMVDPKKAAQIRSQVMTHLRVIYERMNQSLSLLYNVPAVAEEIQDEVDELLQKEQNYSDDVLANMISEPRISYGNDALMPSLTETKTTVELLPVNGEFSLDDLQPWHSFGADSVPANTENEVEPVDARPAADRGLTTRPGSGLTNIKTEEISEVKMDAEFRHDSGYEVHHQKLVFFAEDVGSNKGAIIGLMVGGVVIATVIVITLVMLKKKQYTSIHHGVVEVDAAVTPEERHLSKMQQNGYENPTYKFFEQMQN"}')},1034:function(t,e,n){var r,o,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! rasterizeHTML.js - v1.3.0 - 2018-03-18
* http://www.github.com/cburgmer/rasterizeHTML.js
* Copyright (c) 2018 Christoph Burgmer; Licensed MIT */void 0===(i=this)&&void 0!==window&&(i=window),r=[n(937),n(1040),n(1041),n(1042)],void 0===(o=function(t,e,n,r){return i.rasterizeHTML=(o=e,s=n,c=r,u=function(t){"use strict";var e={},n=[];e.joinUrl=function(e,n){return e?t.resolve(e,n):n},e.getConstantUniqueIdFor=function(t){return n.indexOf(t)<0&&n.push(t),n.indexOf(t)},e.clone=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n};var r=function(t){return function(t){return"object"===a(t)&&null!==t}(t)&&Object.prototype.toString.apply(t).match(/\[object (Canvas|HTMLCanvasElement)\]/i)};return e.parseOptionalParameters=function(t){var n={canvas:null,options:{}};return null==t[0]||r(t[0])?(n.canvas=t[0]||null,n.options=e.clone(t[1])):n.options=e.clone(t[0]),n},e}(t),l=function(t){"use strict";var e={},n=function(t,e,n){var r=t[e];return t[e]=function(){var t=Array.prototype.slice.call(arguments);return n.apply(this,[t,r])},r};return e.baseUrlRespectingXhr=function(e,r){return function(){var o=new e;return n(o,"open",(function(e,n){var o=e.shift(),i=e.shift(),a=t.joinUrl(r,i);return n.apply(this,[o,a].concat(e))})),o}},e.finishNotifyingXhr=function(t){var e,r=0,o=0,i=!1,a=new Promise((function(t){e=function(){r-o<=0&&i&&t({totalCount:r})}})),s=function(){var i=new t;return n(i,"send",(function(t,e){return r+=1,e.apply(this,arguments)})),i.addEventListener("load",(function(){o+=1,e()})),i};return s.waitForRequestsToFinish=function(){return i=!0,e(),a},s},e}(u),f=function(t){"use strict";var e={},n=function(t){return Array.prototype.slice.call(t)},r={active:!0,hover:!0,focus:!1,target:!1};return e.fakeUserAction=function(e,n,o){var i=e.querySelector(n),a=":"+o,s="rasterizehtml"+o;i&&(r[o]?t.addClassNameRecursively(i,s):t.addClassName(i,s),t.rewriteCssSelectorWith(e,a,"."+s))},e.persistInputValues=function(t){var e=t.querySelectorAll("input"),r=t.querySelectorAll("textarea"),o=function(t){return"checkbox"===t.type||"radio"===t.type};n(e).filter(o).forEach((function(t){t.checked?t.setAttribute("checked",""):t.removeAttribute("checked")})),n(e).filter((function(t){return!o(t)})).forEach((function(t){t.setAttribute("value",t.value)})),n(r).forEach((function(t){t.textContent=t.value}))},e.rewriteTagNameSelectorsToLowerCase=function(e){t.lowercaseCssTypeSelectors(e,t.findHtmlOnlyNodeNames(e))},e}(function(){"use strict";var t={},e=function(t){return Array.prototype.slice.call(t)};t.addClassName=function(t,e){t.className+=" "+e},t.addClassNameRecursively=function(e,n){t.addClassName(e,n),e.parentNode!==e.ownerDocument&&t.addClassNameRecursively(e.parentNode,n)};var n=function(t,n){var r=t.cssText.replace(/^[^\{]+/,"");!function(t,n){var r=t.parentStyleSheet,o=e(r.cssRules).indexOf(t);r.insertRule(n,o+1),r.deleteRule(o)}(t,n+" "+r)},r=function(t){var n;t.textContent=(n=t.sheet.cssRules,e(n).reduce((function(t,e){return t+e.cssText}),""))},o=function(t,o,i){var a=function(t){return"((?:^|[^.#:\\w])|(?=\\W))("+t.join("|")+")(?=\\W|$)"}(o);e(t.querySelectorAll("style")).forEach((function(t){var o,s,c;void 0===t.sheet&&(o=t,s=document.implementation.createHTMLDocument(""),(c=document.createElement("style")).textContent=o.textContent,s.body.appendChild(c),o.sheet=c.sheet);var u=e(t.sheet.cssRules).filter((function(t){return t.selectorText&&new RegExp(a,"i").test(t.selectorText)}));u.length&&(u.forEach((function(t){var e=t.selectorText.replace(new RegExp(a,"gi"),(function(t,e,n){return e+i(n)}));e!==t.selectorText&&n(t,e)})),r(t))}))};return t.rewriteCssSelectorWith=function(t,e,n){o(t,[e],(function(){return n}))},t.lowercaseCssTypeSelectors=function(t,e){o(t,e,(function(t){return t.toLowerCase()}))},t.findHtmlOnlyNodeNames=function(t){var e,n=t.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),r={},o={};do{e=n.currentNode.tagName.toLowerCase(),"http://www.w3.org/1999/xhtml"===n.currentNode.namespaceURI?r[e]=!0:o[e]=!0}while(n.nextNode());return Object.keys(r).filter((function(t){return!o[t]}))},t}()),h=function(t,e,n,r){"use strict";var o={executeJavascript:function(t,n){return new Promise((function(o){var i=function(t,e,n,r){var o=t.createElement(e);return o.style.visibility="hidden",o.style.width=n+"px",o.style.height=r+"px",o.style.position="absolute",o.style.top=-1e4-r+"px",o.style.left=-1e4-n+"px",t.getElementsByTagName("body")[0].appendChild(o),o}(r.document,"iframe",n.width,n.height),a=t.outerHTML,s=[],c=n.executeJsTimeout||0,u=function(){var t=i.contentDocument;r.document.getElementsByTagName("body")[0].removeChild(i),o({document:t,errors:s})},l=i.contentWindow.XMLHttpRequest,f=e.finishNotifyingXhr(l),h=e.baseUrlRespectingXhr(f,n.baseUrl);i.onload=function(){var t;(t=c,t>0?new Promise((function(e){setTimeout(e,t)})):Promise.resolve()).then(f.waitForRequestsToFinish).then(u)},i.contentDocument.open(),i.contentWindow.XMLHttpRequest=h,i.contentWindow.onerror=function(t){s.push({resourceType:"scriptExecution",msg:t})},i.contentDocument.write("<!DOCTYPE html>"),i.contentDocument.write(a),i.contentDocument.close()}))}},i=function(t,e,n,o,i){var a,s,c,u,l,f,h,p=Math.max(t.scrollWidth,t.clientWidth),d=Math.max(t.scrollHeight,t.clientHeight);return e?(a=(f=function(t,e){var n=t.querySelector(e);if(n)return n;if(t.ownerDocument.querySelector(e)===t)return t;throw{message:"Clipping selector not found"}}(t,e).getBoundingClientRect()).top,s=f.left,c=f.width,u=f.height):(a=0,s=0,c=p,u=d),h=function(t,e,n,r){return{width:Math.max(t.width*r,e),height:Math.max(t.height*r,n)}}({width:c,height:u},n,o,i),l=r.getComputedStyle(t.ownerDocument.documentElement).fontSize,{left:s,top:a,width:h.width,height:h.height,viewportWidth:p,viewportHeight:d,rootFontSize:l}};o.calculateDocumentContentSize=function(t,e){return new Promise((function(n,o){var a,s=e.zoom||1;a=function(t,e,n){var o=Math.floor(t/n),i=Math.floor(e/n);return function(t,e,n){var r=t.createElement("iframe");return r.style.width=e+"px",r.style.height=n+"px",r.style.visibility="hidden",r.style.position="absolute",r.style.top=-1e4-n+"px",r.style.left=-1e4-e+"px",r.style.borderWidth=0,r.sandbox="allow-same-origin",r.scrolling="no",r}(r.document,o,i)}(e.width,e.height,s),r.document.getElementsByTagName("body")[0].appendChild(a),a.onload=function(){var c,u=a.contentDocument;try{c=i(function(t,e){var n=t.tagName;return e.querySelector(n)}(t,u),e.clip,e.width,e.height,s),n(c)}catch(t){o(t)}finally{r.document.getElementsByTagName("body")[0].removeChild(a)}},a.contentDocument.open(),a.contentDocument.write("<!DOCTYPE html>"),a.contentDocument.write(function(t){var e=t.tagName.toLowerCase();return"html"===e||"body"===e?t.outerHTML:'<body style="margin: 0;">'+t.outerHTML+"</body>"}(t)),a.contentDocument.close()}))},o.parseHtmlFragment=function(t){var e=r.document.implementation.createHTMLDocument("");e.documentElement.innerHTML=t;var n=e.querySelector("body").firstChild;if(!n)throw"Invalid source";return n},o.parseHTML=function(t){var e=r.document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=t,function(t,e){var n,o,i,a,s=/<html((?:\s+[^>]*)?)>/im.exec(e),c=r.document.implementation.createHTMLDocument("");if(s)for(n="<div"+s[1]+"></div>",c.documentElement.innerHTML=n,i=c.querySelector("div"),o=0;o<i.attributes.length;o++)a=i.attributes[o],t.documentElement.setAttribute(a.name,a.value)}(e,t),e};var a=function(t){try{return n.failOnParseError(t)}catch(t){throw{message:"Invalid source",originalError:t}}};o.validateXHTML=function(t){var e=(new DOMParser).parseFromString(t,"application/xml");a(e)};var s=null,c=function(e,n){return new Promise((function(r,o){var i=new window.XMLHttpRequest,a=function(t,e){return"none"===e||"repeated"===e?(null!==s&&"repeated"===e||(s=Date.now()),t+"?_="+s):t}(t.joinUrl(n.baseUrl,e),n.cache),c=function(t){o({message:"Unable to load page",originalError:t})};i.addEventListener("load",(function(){200===i.status||0===i.status?r(i.responseXML):c(i.statusText)}),!1),i.addEventListener("error",(function(t){c(t)}),!1);try{i.open("GET",a,!0),i.responseType="document",i.send(null)}catch(t){c(t)}}))};return o.loadDocument=function(t,e){return c(t,e).then((function(t){return a(t)}))},o}(u,l,s,window),p=function(t){"use strict";var e,n={},r=function(t,e){return e?URL.createObjectURL(new Blob([t],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t)},o=function(t){t instanceof Blob&&URL.revokeObjectURL(t)},i='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>',a=function(t){return new Promise((function(e,n){var r=document.createElement("canvas"),o=new Image;o.onload=function(){var t=r.getContext("2d");try{t.drawImage(o,0,0),r.toDataURL("image/png"),e(!0)}catch(t){e(!1)}},o.onerror=n,o.src=t}))},s=function(){return new Promise((function(e,n){var s;(function(){if(t.Blob)try{return new Blob(["<b></b>"],{type:"text/xml"}),!0}catch(t){}return!1})()&&t.URL?(s=r(i,!0),a(s).then((function(t){return o(s),!t&&a(r(i,!1)).then((function(t){return t}))}),(function(){return!1}))).then((function(t){e(!t)}),(function(){n()})):e(!1)}))},c=function(t){return(void 0===e&&(e=s()),e).then((function(e){return r(t,e)}))};return n.renderSvg=function(t){return new Promise((function(e,n){var r,i,a=function(){r&&o(r)};(i=new Image).onload=function(){i.onload=null,i.onerror=null,a(),e(i)},i.onerror=function(){a(),n()},c(t).then((function(t){r=t,i.src=r}),n)}))},n}(window),d=function(t,e,n,r){"use strict";var o={},i=function(t){var e=Object.keys(t);return e.length?" "+e.map((function(e){return e+'="'+t[e]+'"'})).join(" "):""},a=function(t,n,o){var a=r.serializeToString(t);e.validateXHTML(a);var s,c,u=function(t){var e,n;return e=Math.round(t.viewportWidth),n=Math.round(t.viewportHeight),{x:-t.left,y:-t.top,width:e,height:n}}(n);return c=(s=u).style||"",s.style=c+"float: left;",function(t){t.externalResourcesRequired=!0}(u),'<svg xmlns="http://www.w3.org/2000/svg"'+i(function(t,e){var n=e||1,r={width:t.width,height:t.height,"font-size":t.rootFontSize};return 1!==n&&(r.style="transform:scale("+n+"); transform-origin: 0 0;"),r}(n,o))+'><style scoped="">html::-webkit-scrollbar { display: none; }</style><foreignObject'+i(u)+">"+a+"</foreignObject></svg>"};return o.getSvgForDocument=function(t,e,r){return n.rewriteTagNameSelectorsToLowerCase(t),a(t,e,r)},o.drawDocumentAsSvg=function(t,r){return["hover","active","focus","target"].forEach((function(e){r[e]&&n.fakeUserAction(t,r[e],e)})),e.calculateDocumentContentSize(t,r).then((function(e){return o.getSvgForDocument(t,e,r.zoom)}))},o}(0,h,f,o),y=function(t,e,n,r,o,i){"use strict";var a={},s=function(t){return{message:"Error rendering page",originalError:t}},c=function(t){return o.renderSvg(t).then((function(e){return{image:e,svg:t}}),(function(t){throw s(t)}))},u=function(t,e,n){return r.drawDocumentAsSvg(t,n).then(c).then((function(t){return e&&function(t,e){try{e.getContext("2d").drawImage(t,0,0)}catch(t){throw s(t)}}(t.image,e),t}))};return a.rasterize=function(r,o,a){var s;return(s=t.clone(a)).inlineScripts=!0===a.executeJs,i.inlineReferences(r,s).then((function(t){return a.executeJs?function(t,r){return e.executeJavascript(t,r).then((function(t){var e=t.document;return n.persistInputValues(e),{document:e,errors:t.errors}}))}(r,a).then((function(e){return{element:e.document.documentElement,errors:t.concat(e.errors)}})):{element:r,errors:t}})).then((function(t){return u(t.element,o,a).then((function(e){return{image:e.image,svg:e.svg,errors:t.errors}}))}))},a}(u,h,f,d,p,c),function(t,e,n){"use strict";var r={},o=function(e){var n,r=function(t,e){var n=t?t.width:300,r=t?t.height:200;return{width:void 0!==e.width?e.width:n,height:void 0!==e.height?e.height:r}}(e.canvas,e.options);return(n=t.clone(e.options)).width=r.width,n.height=r.height,n};r.drawDocument=function(){var e=arguments[0],r=Array.prototype.slice.call(arguments,1),i=t.parseOptionalParameters(r),a=e.documentElement?e.documentElement:e;return n.rasterize(a,i.canvas,o(i))};var i=function(t,n,o){var i=e.parseHTML(t);return r.drawDocument(i,n,o)};r.drawHTML=function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1),r=t.parseOptionalParameters(n);return i(e,r.canvas,r.options)};var a=function(n,o,i){return e.loadDocument(n,i).then((function(e){var a=function(e,n,r){var o=document.implementation.createHTMLDocument("");o.replaceChild(e.documentElement,o.documentElement);var i=r?t.clone(r):{};return r.baseUrl||(i.baseUrl=n),{document:o,options:i}}(e,n,i);return r.drawDocument(a.document,o,a.options)}))};return r.drawURL=function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1),r=t.parseOptionalParameters(n);return a(e,r.canvas,r.options)},r}(u,h,y));var o,s,c,u,l,f,h,p,d,y}.apply(e,r))||(t.exports=o)},1035:function(t,e,n){(function(t,r){var o;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! https://mths.be/punycode v1.4.1 by @mathias */!function(a){var s="object"==i(e)&&e&&!e.nodeType&&e,c="object"==i(t)&&t&&!t.nodeType&&t,u="object"==(void 0===r?"undefined":i(r))&&r;u.global!==u&&u.window!==u&&u.self!==u||(a=u);var l,f,h=2147483647,p=/^xn--/,d=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,v=String.fromCharCode;function b(t){throw new RangeError(g[t])}function _(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function w(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+_((t=t.replace(y,".")).split("."),e).join(".")}function S(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function O(t){return _(t,(function(t){var e="";return t>65535&&(e+=v((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=v(t)})).join("")}function E(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,n){var r=0;for(t=n?m(t/700):t>>1,t+=m(t/e);t>455;r+=36)t=m(t/35);return m(r+36*t/(t+38))}function k(t){var e,n,r,o,i,a,s,c,u,l,f,p=[],d=t.length,y=0,g=128,v=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&b("not-basic"),p.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<d;){for(i=y,a=1,s=36;o>=d&&b("invalid-input"),((c=(f=t.charCodeAt(o++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||c>m((h-y)/a))&&b("overflow"),y+=c*a,!(c<(u=s<=v?1:s>=v+26?26:s-v));s+=36)a>m(h/(l=36-u))&&b("overflow"),a*=l;v=x(y-i,e=p.length+1,0==i),m(y/e)>h-g&&b("overflow"),g+=m(y/e),y%=e,p.splice(y++,0,g)}return O(p)}function A(t){var e,n,r,o,i,a,s,c,u,l,f,p,d,y,g,_=[];for(p=(t=S(t)).length,e=128,n=0,i=72,a=0;a<p;++a)(f=t[a])<128&&_.push(v(f));for(r=o=_.length,o&&_.push("-");r<p;){for(s=h,a=0;a<p;++a)(f=t[a])>=e&&f<s&&(s=f);for(s-e>m((h-n)/(d=r+1))&&b("overflow"),n+=(s-e)*d,e=s,a=0;a<p;++a)if((f=t[a])<e&&++n>h&&b("overflow"),f==e){for(c=n,u=36;!(c<(l=u<=i?1:u>=i+26?26:u-i));u+=36)g=c-l,y=36-l,_.push(v(E(l+g%y,0))),c=m(g/y);_.push(v(E(c,0))),i=x(n,d,r==o),n=0,++r}++n,++e}return _.join("")}if(l={version:"1.4.1",ucs2:{decode:S,encode:O},decode:k,encode:A,toASCII:function(t){return w(t,(function(t){return d.test(t)?"xn--"+A(t):t}))},toUnicode:function(t){return w(t,(function(t){return p.test(t)?k(t.slice(4).toLowerCase()):t}))}},"object"==i(n(938))&&n(938))void 0===(o=function(){return l}.call(e,n,e,t))||(t.exports=o);else if(s&&c)if(t.exports==s)c.exports=l;else for(f in l)l.hasOwnProperty(f)&&(s[f]=l[f]);else a.punycode=l}(this)}).call(this,n(158)(t),n(112))},1036:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===r(t)&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},1037:function(t,e,n){"use strict";e.decode=e.parse=n(1038),e.encode=e.stringify=n(1039)},1038:function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var f,h,p,d,y=t[l].replace(s,"%20"),g=y.indexOf(n);g>=0?(f=y.substr(0,g),h=y.substr(g+1)):(f=y,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),r(a,p)?o(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},1039:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t){switch(r(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,c){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===r(t)?a(s(t),(function(r){var s=encodeURIComponent(o(r))+n;return i(t[r])?a(t[r],(function(t){return s+encodeURIComponent(o(t))})).join(e):s+encodeURIComponent(o(t[r]))})).join(e):c?encodeURIComponent(o(c))+n+encodeURIComponent(o(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},1040:function(t,e,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){var t=function(t){var e=t.tagName;return"http://www.w3.org/1999/xhtml"===t.namespaceURI&&(e=e.toLowerCase()),e},e=function(t){return Array.prototype.map.call(t.childNodes,(function(t){return r(t)})).join("")},n=function(n,r){var o="<"+t(n);return o+=function(t,e){return Array.prototype.map.call(t.attributes||t.attrs,(function(t){return t.name})).indexOf("xmlns")>=0||!e&&t.namespaceURI===t.parentNode.namespaceURI?"":' xmlns="'+t.namespaceURI+'"'}(n,r),Array.prototype.forEach.call(n.attributes||n.attrs,(function(t){o+=function(t){var e=t.value;return" "+t.name+'="'+function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}(e)+'"'}(t)})),n.childNodes.length>0?(o+=">",o+=e(n),o+="</"+t(n)+">"):o+="/>",o},r=function(t,r){var o=r&&r.rootNode;return"#document"===t.nodeName||"#document-fragment"===t.nodeName?e(t):t.tagName?n(t,o):"#text"===t.nodeName?function(t){var e=t.nodeValue||t.value||"";return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(t):"#comment"===t.nodeName?function(t){return"\x3c!--"+t.data.replace(/-/g,"&#45;")+"--\x3e"}(t):"#cdata-section"===t.nodeName?function(t){return"<![CDATA["+t.nodeValue+"]]>"}(t):void 0};return{serializeToString:function(t){return r(t,{rootNode:!0}).replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}}})?r.apply(e,o):r)||(t.exports=i)},1041:function(t,e,n){"use strict";var r=[new RegExp("^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)\n?</div>"),new RegExp("^(.+)\n")],o=function(t){var e,n,o,i,a=(e=t,n=new XMLSerializer,Array.prototype.map.call(e.childNodes,(function(t){return n.serializeToString(t)})).join(""));for(o=0;o<r.length;o++)if(i=r[o].exec(a))return i[1]};e.failOnParseError=function(t){return function(t){var e;if(null===t)throw new Error("Parse error");var n=function(t){return"parsererror"===t.documentElement.tagName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===t.documentElement.namespaceURI?t.documentElement:("xml"===t.documentElement.tagName||"html"===t.documentElement.tagName)&&t.documentElement.childNodes&&t.documentElement.childNodes.length>0&&"parsererror"===t.documentElement.childNodes[0].nodeName?t.documentElement.childNodes[0]:"html"===t.documentElement.tagName&&t.documentElement.childNodes&&t.documentElement.childNodes.length>0&&"body"===t.documentElement.childNodes[0].nodeName&&t.documentElement.childNodes[0].childNodes&&t.documentElement.childNodes[0].childNodes.length&&"parsererror"===t.documentElement.childNodes[0].childNodes[0].nodeName?t.documentElement.childNodes[0].childNodes[0]:void 0}(t);if(void 0!==n)throw e=o(n)||"Parse error",new Error(e)}(t),t}},1042:function(t,e,n){"use strict";var r=n(814),o=n(1043),i=n(1044),a=n(1045),s=n(872),c=function(t){return t.map((function(e,n){var o;return n===t.length-1&&(e={baseUrl:(o=e.baseUrl,r.joinUrl(o,"."))}),JSON.stringify(e)}))},u=function(t,e){return!1!==e.cache&&"none"!==e.cache&&e.cacheBucket?r.memoize(t,c,e.cacheBucket):t},l=function(t,e,n){var r=s.rulesForCssText(t);return a.loadCSSImportsForRules(r,e,n).then((function(e){return a.loadAndInlineCSSResourcesForRules(r,n).then((function(n){var o=e.errors.concat(n.errors),i=e.hasChanges||n.hasChanges;return i&&(t=s.cssRulesToText(r)),{hasChanges:i,content:t,errors:o}}))}))};e.loadAndInlineStyles=function(t,e){var n,o=function(t){var e=t.getElementsByTagName("style");return Array.prototype.filter.call(e,(function(t){return!t.attributes.type||"text/css"===t.attributes.type.value}))}(t),i=[],a=[];return(n=r.clone(e)).baseUrl=n.baseUrl||r.getDocumentBaseUrl(t),Promise.all(o.map((function(t){return function(t,e,n){var o=t.textContent;return u(l,e)(o,n,e).then((function(e){return e.hasChanges&&(t.childNodes[0].nodeValue=e.content),r.cloneArray(e.errors)}))}(t,n,a).then((function(t){i=i.concat(t)}))}))).then((function(){return i}))};var f=function(t,e){return r.ajax(t,e).then((function(t){return{content:t,cssRules:s.rulesForCssText(t)}})).then((function(e){var n=a.adjustPathsOfCssResources(t,e.cssRules);return{content:e.content,cssRules:e.cssRules,hasChanges:n}})).then((function(t){return a.loadCSSImportsForRules(t.cssRules,[],e).then((function(e){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||e.hasChanges,errors:e.errors}}))})).then((function(t){return a.loadAndInlineCSSResourcesForRules(t.cssRules,e).then((function(e){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||e.hasChanges,errors:t.errors.concat(e.errors)}}))})).then((function(t){var e=t.content;return t.hasChanges&&(e=s.cssRulesToText(t.cssRules)),{content:e,errors:t.errors}}))};e.loadAndInlineCssLinks=function(t,e){var n=function(t){var e=t.getElementsByTagName("link");return Array.prototype.filter.call(e,(function(t){return t.attributes.rel&&"stylesheet"===t.attributes.rel.value&&(!t.attributes.type||"text/css"===t.attributes.type.value)}))}(t),o=[];return Promise.all(n.map((function(t){return function(t,e){var n=t.attributes.href.value,o=r.getDocumentBaseUrl(t.ownerDocument),i=r.clone(e);return!i.baseUrl&&o&&(i.baseUrl=o),u(f,e)(n,i).then((function(t){return{content:t.content,errors:r.cloneArray(t.errors)}}))}(t,e).then((function(e){var n,r,i,a;n=t,r=e.content+"\n",a=n.parentNode,(r=r.trim())&&((i=n.ownerDocument.createElement("style")).type="text/css",i.appendChild(n.ownerDocument.createTextNode(r)),a.insertBefore(i,n)),a.removeChild(n),o=o.concat(e.errors)}),(function(t){o.push({resourceType:"stylesheet",url:t.url,msg:"Unable to load stylesheet "+t.url})}))}))).then((function(){return o}))},e.loadAndInlineImages=o.inline,e.loadAndInlineScript=i.inline,e.inlineReferences=function(t,n){var r=[],o=[e.loadAndInlineImages,e.loadAndInlineStyles,e.loadAndInlineCssLinks];return!1!==n.inlineScripts&&o.push(e.loadAndInlineScript),Promise.all(o.map((function(e){return e(t,n).then((function(t){r=r.concat(t)}))}))).then((function(){return r}))}},1043:function(t,e,n){"use strict";var r=n(814),o=function(t){return Array.prototype.slice.call(t)};e.inline=function(t,e){var n,i=o(t.getElementsByTagName("img")),a=o(t.getElementsByTagName("image")),s=(n=t.getElementsByTagName("input"),Array.prototype.filter.call(n,(function(t){return"image"===t.type}))),c=function(t){return t.filter((function(t){var e=null;return t.hasAttribute("src")?e=t.getAttribute("src"):t.hasAttributeNS("http://www.w3.org/1999/xlink","href")?e=t.getAttributeNS("http://www.w3.org/1999/xlink","href"):t.hasAttribute("href")&&(e=t.getAttribute("href")),null!==e&&!r.isDataUri(e)}))}(i=(i=i.concat(a)).concat(s));return r.collectAndReportErrors(c.map((function(t){return function(t,e){var n=null;t.hasAttribute("src")?n=t.getAttribute("src"):t.hasAttributeNS("http://www.w3.org/1999/xlink","href")?n=t.getAttributeNS("http://www.w3.org/1999/xlink","href"):t.hasAttribute("href")&&(n=t.getAttribute("href"));var o=r.getDocumentBaseUrl(t.ownerDocument),i=r.clone(e);return!i.baseUrl&&o&&(i.baseUrl=o),r.getDataURIForImageURL(n,i).then((function(t){return t}),(function(t){throw{resourceType:"image",url:t.url,msg:"Unable to load image "+t.url}}))}(t,e).then((function(e){t.attributes.src?t.attributes.src.value=e:t.attributes["xlink:href"]?t.attributes["xlink:href"].value=e:t.attributes.href&&(t.attributes.href.value=e)}))})))}},1044:function(t,e,n){"use strict";var r=n(814);e.inline=function(t,e){var n=function(t){var e=t.getElementsByTagName("script");return Array.prototype.filter.call(e,(function(t){return!!t.attributes.src}))}(t);return r.collectAndReportErrors(n.map((function(t){return function(t,e){var n=t.attributes.src.value,o=r.getDocumentBaseUrl(t.ownerDocument),i=r.clone(e);return!i.baseUrl&&o&&(i.baseUrl=o),r.ajax(n,i).catch((function(t){throw{resourceType:"script",url:t.url,msg:"Unable to load script "+t.url}}))}(t,e).then((function(e){!function(t,e){t.attributes.removeNamedItem("src"),t.textContent=e.replace(/<\//g,"<\\/")}(t,e)}))})))}},1045:function(t,e,n){"use strict";var r=n(814),o=n(872),i=n(1046),a=n(1047),s=function(t,e,n){t.style.setProperty(e,n,t.style.getPropertyPriority(e))},c=function(t){return t.filter((function(t){return t.type===window.CSSRule.STYLE_RULE&&(t.style.getPropertyValue("background-image")||t.style.getPropertyValue("background"))}))},u=function(t){var e=[];return t.forEach((function(t){t.style.getPropertyValue("background-image")?e.push({property:"background-image",value:t.style.getPropertyValue("background-image"),rule:t}):t.style.getPropertyValue("background")&&e.push({property:"background",value:t.style.getPropertyValue("background"),rule:t})})),e},l=function(t){return t.filter((function(t){return t.type===window.CSSRule.FONT_FACE_RULE&&t.style.getPropertyValue("src")}))},f=function(t){return t.filter((function(t){return t.type===window.CSSRule.IMPORT_RULE&&t.href}))},h=function(t){var e=[];return t.forEach((function(t,n){t.url&&!r.isDataUri(t.url)&&e.push(n)})),e},p=function(t){var e=[];return t.forEach((function(t,n){t.url&&!r.isDataUri(t.url)&&e.push(n)})),e};e.adjustPathsOfCssResources=function(t,e){var n=c(e),d=u(n),y=!1;return d.forEach((function(e){var n,o=i.parse(e.value),a=h(o);a.length>0&&(a.forEach((function(e){var n=o[e].url,i=r.joinUrl(t,n);o[e].url=i})),n=i.serialize(o),s(e.rule,e.property,n),y=!0)})),l(e).forEach((function(n){var i,s,c=n.style.getPropertyValue("src");try{i=a.parse(c)}catch(t){return}(s=p(i)).length>0&&(s.forEach((function(e){var n=i[e].url,o=r.joinUrl(t,n);i[e].url=o})),o.changeFontFaceRuleSrc(e,n,a.serialize(i)),y=!0)})),f(e).forEach((function(n){var i=n.href,a=r.joinUrl(t,i);o.exchangeRule(e,n,"@import url("+a+");"),y=!0})),y};var d=function(t,e,n){var r=t.indexOf(e);t.splice(r,1),n.forEach((function(e,n){t.splice(r+n,0,e)}))};e.loadCSSImportsForRules=function(t,n,i){var a=f(t),s=[],c=!1;return Promise.all(a.map((function(a){return function(t,n,i,a){var s,c=n.href;return c=o.unquoteString(c),s=r.joinUrl(a.baseUrl,c),i.indexOf(s)>=0?(d(t,n,[]),Promise.resolve([])):(i.push(s),r.ajax(c,a).then((function(r){var s=o.rulesForCssText(r);return e.loadCSSImportsForRules(s,i,a).then((function(r){return e.adjustPathsOfCssResources(c,s),d(t,n,s),r.errors}))}),(function(t){throw{resourceType:"stylesheet",url:t.url,msg:"Unable to load stylesheet "+t.url}})))}(t,a,n,i).then((function(t){s=s.concat(t),c=!0}),(function(t){s.push(t)}))}))).then((function(){return{hasChanges:c,errors:s}}))};var y=function(t,e){var n=c(t),o=u(n),a=[],l=!1;return Promise.all(o.map((function(t){return function(t,e){var n=i.parse(t),o=h(n),a=!1;return r.collectAndReportErrors(o.map((function(t){var o=n[t].url;return r.getDataURIForImageURL(o,e).then((function(e){n[t].url=e,a=!0}),(function(t){throw{resourceType:"backgroundImage",url:t.url,msg:"Unable to load background-image "+t.url}}))}))).then((function(t){return{backgroundValue:i.serialize(n),hasChanges:a,errors:t}}))}(t.value,e).then((function(e){e.hasChanges&&(s(t.rule,t.property,e.backgroundValue),l=!0),a=a.concat(e.errors)}))}))).then((function(){return{hasChanges:l,errors:a}}))},g=function(t,e){var n=l(t),i=[],s=!1;return Promise.all(n.map((function(n){return function(t,e){var n,o,i=!1;try{n=a.parse(t)}catch(t){n=[]}return o=p(n),r.collectAndReportErrors(o.map((function(t){var o=n[t],a=o.format||"woff";return r.binaryAjax(o.url,e).then((function(t){var e=btoa(t);o.url="data:font/"+a+";base64,"+e,i=!0}),(function(t){throw{resourceType:"fontFace",url:t.url,msg:"Unable to load font-face "+t.url}}))}))).then((function(t){return{srcDeclarationValue:a.serialize(n),hasChanges:i,errors:t}}))}(n.style.getPropertyValue("src"),e).then((function(e){e.hasChanges&&(o.changeFontFaceRuleSrc(t,n,e.srcDeclarationValue),s=!0),i=i.concat(e.errors)}))}))).then((function(){return{hasChanges:s,errors:i}}))};e.loadAndInlineCSSResourcesForRules=function(t,e){var n=!1,r=[];return Promise.all([y,g].map((function(o){return o(t,e).then((function(t){n=n||t.hasChanges,r=r.concat(t.errors)}))}))).then((function(){return{hasChanges:n,errors:r}}))}},1046:function(t,e,n){"use strict";var r=n(872);e.extractCssUrl=function(t){var e,n=/^url\(("[^"]+"|'[^']+'|[^\)]+)\)/;if(!n.test(t))throw new Error("Invalid url");return e=n.exec(t)[1],r.unquoteString(e.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1"))};e.parse=function(t){return function(t){var e,n="(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+)",r=new RegExp("(?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+","g"),o=[],i=function(t){var e,r=new RegExp(n,"g"),o=[];for(e=r.exec(t);e;)o.push(e[1]),e=r.exec(t);return o};if(t.match(new RegExp("^\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+)(?:\\s*,\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+))*\\s*$"))){for(e=r.exec(t);e;)o.push(i(e[0])),e=r.exec(t);return o}return[]}(t).map((function(t){var n=function(t){var n;for(n=0;n<t.length;n++)try{return{url:e.extractCssUrl(t[n]),idx:n}}catch(t){}}(t);return n?{preUrl:t.slice(0,n.idx),url:n.url,postUrl:t.slice(n.idx+1)}:{preUrl:t}}))},e.serialize=function(t){return t.map((function(t){var e=[].concat(t.preUrl);return t.url&&e.push('url("'+t.url+'")'),t.postUrl&&(e=e.concat(t.postUrl)),e.join(" ")})).join(", ")}},1047:function(t,e,n){var r,o,i,a;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}a=function(){return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){var n=e[a][1][t];return o(n||t)}),u,u.exports,t,e,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";function r(t,e,n,o){this.message=t,this.expected=e,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(r,Error),r.buildMessage=function(t,e){var n={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}return"Expected "+function(t){var e,r,o,i=new Array(t.length);for(e=0;e<t.length;e++)i[e]=(o=t[e],n[o.type](o));if(i.sort(),i.length>0){for(e=1,r=1;e<i.length;e++)i[e-1]!==i[e]&&(i[r]=i[e],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},e.exports={SyntaxError:r,parse:function(e,n){n=void 0!==n?n:{};var o,i={},a={start:A},s=A,c=w(",",!1),u=w("url(",!1),l=w(")",!1),f=w("format(",!1),h=w("local(",!1),p=/^[^)]/,d=S([")"],!0,!1),y=/^[ \t\r\n\f]/,g=S([" ","\t","\r","\n","\f"],!1,!1),m=0,v=[{line:1,column:1}],b=0,_=[];if("startRule"in n){if(!(n.startRule in a))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=a[n.startRule]}function w(t,e){return{type:"literal",text:t,ignoreCase:e}}function S(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function O(t){var n,r=v[t];if(r)return r;for(n=t-1;!v[n];)n--;for(r={line:(r=v[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return v[t]=r,r}function E(t,e){var n=O(t),r=O(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function x(t){m<b||(m>b&&(b=m,_=[]),_.push(t))}function k(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}function A(){var t,n;return(t=function t(){var n,r,o,a,s,u;if(n=m,(r=j())!==i){for(o=[],a=R();a!==i;)o.push(a),a=R();if(o!==i)if(44===e.charCodeAt(m)?(a=",",m++):(a=i,x(c)),a!==i){for(s=[],u=R();u!==i;)s.push(u),u=R();s!==i&&(u=t())!==i?(r=[r].concat(u),n=r):(m=n,n=i)}else m=n,n=i;else m=n,n=i}else m=n,n=i;return n===i&&(n=m,(r=j())!==i&&(r=[r]),n=r),n}())===i&&(t=m,(n="")!==i&&(n=[]),t=n),t}function j(){var t;return(t=function(){var t,n,r,o;if(t=m,(n=P())!==i){if(r=[],(o=R())!==i)for(;o!==i;)r.push(o),o=R();else r=i;r!==i&&(o=function(){var t,n,r,o;return t=m,"format("===e.substr(m,7)?(n="format(",m+=7):(n=i,x(f)),n!==i&&(r=C())!==i?(41===e.charCodeAt(m)?(o=")",m++):(o=i,x(l)),o!==i?t=n=r:(m=t,t=i)):(m=t,t=i),t}())!==i?t=n={url:n,format:o}:(m=t,t=i)}else m=t,t=i;return t===i&&(t=m,(n=P())!==i&&(n=function(t){return{url:t}}(n)),t=n),t}())===i&&(t=function(){var t,n,r,o;return t=m,"local("===e.substr(m,6)?(n="local(",m+=6):(n=i,x(h)),n!==i&&(r=C())!==i?(41===e.charCodeAt(m)?(o=")",m++):(o=i,x(l)),o!==i?t=n={local:r}:(m=t,t=i)):(m=t,t=i),t}()),t}function P(){var t,n,r,o;return t=m,"url("===e.substr(m,4)?(n="url(",m+=4):(n=i,x(u)),n!==i&&(r=C())!==i?(41===e.charCodeAt(m)?(o=")",m++):(o=i,x(l)),o!==i?t=n=r:(m=t,t=i)):(m=t,t=i),t}function C(){var t,n,r;if(m,t=[],p.test(e.charAt(m))?(n=e.charAt(m),m++):(n=i,x(d)),n!==i)for(;n!==i;)t.push(n),p.test(e.charAt(m))?(n=e.charAt(m),m++):(n=i,x(d));else t=i;return t!==i&&(r=t,t=T.extractValue(r.join(""))),t}function R(){var t;return y.test(e.charAt(m))?(t=e.charAt(m),m++):(t=i,x(g)),t}var T=t("../util");if((o=s())!==i&&m===e.length)return o;throw o!==i&&m<e.length&&x({type:"end"}),k(_,b<e.length?e.charAt(b):null,b<e.length?E(b,b+1):E(b,b))}}},{"../util":3}],2:[function(t,e,n){var r=t("./grammar");n.SyntaxError=function(t,e){this.message=t,this.offset=e},n.parse=function(t){try{return r.parse(t)}catch(t){throw new n.SyntaxError(t.message,t.offset)}},n.serialize=function(t){return t.map((function(t){var e;return t.url?(e='url("'+t.url+'")',t.format&&(e+=' format("'+t.format+'")')):e='local("'+t.local+'")',e})).join(", ")}},{"./grammar":1}],3:[function(t,e,n){n.extractValue=function(t){return e=function(t){return t.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1")}(t),r=/^'(.*)'$/,(n=/^"(.*)"$/).test(e)?e.replace(n,"$1"):r.test(e)?e.replace(r,"$1"):e;var e,n,r}},{}]},{},[2])(2)},"object"===s(e)&&void 0!==t?t.exports=a():(o=[],void 0===(i="function"==typeof(r=a)?r.apply(e,o):r)||(t.exports=i))},1048:function(t,e){t.exports='<h1 id="protvista-manager">protvista-manager</h1>\n<p><a href="https://www.npmjs.com/package/protvista-manager"><img src="https://img.shields.io/npm/v/protvista-manager.svg" alt="Published on NPM"></a></p>\n<p>It is a container for all the tracks and other inner components (e.g. protvista-navigation).</p>\n<p>This component is in charge of capturing the events that its protvista descendent trigger, and adjust element attributes accordingly.</p>\n<p>A protvista descendent is any element in its subtree which tag name starts with &#39;protvista&#39;.</p>\n<p>The children should fire events of the type change, and the detail object should contain the attributes <code>type</code> and <code>value</code>.</p>\n<p>Additionally, there are a set of pre-defined attributes which can be used with this component and will be propagated to descendents: <code>displaystart</code>, <code>displayend</code>, <code>highlight</code> and <code>length</code>. This is useful if you want to control things like zoom level from outside, for instance directly from your application.</p>\n<p>See it running <a href="https://ebi-webcomponents.github.io/nightingale/#/manager">Here</a>.</p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;protvista-manager attributes=&quot;attr1 attr2&quot;&gt;&lt;/protvista-manager&gt;</code></pre>\n<p>Here is an example of how the child components should fire the events:</p>\n<pre><code class="language-javascript">this.dispatchEvent(\n  new CustomEvent(&quot;change&quot;, {\n    detail: {\n      value: &quot;New value&quot;,\n      type: &quot;attr1&quot;,\n    },\n  })\n);</code></pre>\n<h2 id="api-reference">API Reference</h2>\n<h3 id="properties">Properties</h3>\n<h3 id="attributes">Attributes</h3>\n<h4 id="attributes-string"><code>attributes: string</code></h4>\n<h4 id="displaystart-number"><code>displaystart?: number</code></h4>\n<h4 id="displayend-number"><code>displayend?: number</code></h4>\n<h4 id="highlight-startendstartend"><code>highlight?: start:end,start:end,...</code></h4>\n<h4 id="length-number"><code>length?: number</code></h4>\n<p>List of attributes that this component will be propagating.</p>\n'},173:function(t,e,n){"use strict";n.r(e);var r,o,i=n(0),a=n.n(i),s=n(701),c=n(629),u=n(620),l=n(603),f=n(700),h=n(734),p=n(861),d=n(803),y=n(870),g=n(745),m=n(918),v=n(868),b=n.n(v),_=n(859),w=n(111),S=n(1032),O=n(1033),E=n(860),x=n(813),k=n(871),A=n(1034),j=n(28);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){var e="function"==typeof Map?new Map:void 0;return(D=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return F(t,arguments,I(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),N(r,t)})(t)}function F(t,e,n){return(F=M()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&N(o,n.prototype),o}).apply(null,arguments)}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(u,t);var e,n,i,a,s,c=(e=u,n=M(),function(){var t,r=I(e);if(n){var o=I(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return L(this,t)});function u(){return R(this,u),c.apply(this,arguments)}return i=u,(a=[{key:"connectedCallback",value:function(){this.elementId=this.getAttribute("element-id"),this.fillColor=this.getAttribute("background-color"),this.fileName=this.getAttribute("file-name")||"protvista",this.fileFormat=["png","jpeg","bmp","tiff","gif"].includes(this.getAttribute("file-format"))?this.getAttribute("file-format"):"png",this.renderContent()}},{key:"backgroundColor",set:function(t){this.fillColor=t}},{key:"saveSvg",value:function(){var t=this.parentElement,e=t.elementId,n=document.querySelector("#".concat(e));n.style.display="block","function"==typeof t.preSave&&t.preSave();var r=document.createElement("canvas"),o=window.getComputedStyle(n).getPropertyValue("width"),i=window.getComputedStyle(n).getPropertyValue("height");if(r.setAttribute("width",o),r.setAttribute("height",i),t.fillColor){var a=r.getContext("2d");a.fillStyle=t.fillColor,a.fillRect(0,0,Number(o),Number(i))}A.drawHTML(document.getElementById(e).innerHTML,r).then((function(){var e=r.toDataURL("image/".concat(t.fileFormat),1).replace("image/".concat(t.fileFormat),"image/octet-stream"),n=document.createElement("a");n.download="".concat(t.fileName,".").concat(t.fileFormat),n.href=e,document.body.appendChild(n),n.click()})).catch((function(t){console.log(t)})).finally((function(){n.style.display="","function"==typeof t.postSave&&t.postSave()}))}},{key:"renderContent",value:function(){var t;if(this.hasChildNodes()){var e=this.firstElementChild;"BUTTON"===e.tagName?(e.addEventListener("click",this.saveSvg),t=Object(j.a)(r||(r=C(["\n          ","\n        "])),e)):console.error("Only Buttons are accepted as children")}else t=Object(j.a)(o||(o=C(['\n        <button\n          style="background-color: #1878ba; color: white; cursor: pointer; display: inline-block;padding: 0.5rem 0.5rem; border-radius: 4px; margin-bottom: 5px;"\n          @click=',"\n        >\n          Download\n        </button>\n      "])),this.saveSvg);Object(j.b)(t,this)}}])&&T(i.prototype,a),s&&T(i,s),u}(D(HTMLElement)),V=n(665);function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G(t){var e="function"==typeof Map?new Map:void 0;return(G=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return z(t,arguments,Q(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Y(r,t)})(t)}function z(t,e,n){return(z=K()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Y(o,n.prototype),o}).apply(null,arguments)}function K(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X,Z,$=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(s,t);var e,n,r,o,i,a=(e=s,n=K(),function(){var t,r=Q(e);if(n){var o=Q(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return U(this,t)});function s(){return W(this,s),a.apply(this,arguments)}return r=s,i=[{key:"observedAttributes",get:function(){return["for"]}}],(o=[{key:"connectedCallback",value:function(){this.for=this.getAttribute("for"),this.renderWhenForElementIsReady()}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&("for"===t&&(this.for=n),this.renderWhenForElementIsReady())}},{key:"refreshOverlay",value:function(t){var e=this,n=document.getElementById(t);return function(){if(n){var t=n.getBoundingClientRect(),r=t.height,o=t.width;e.overlay.style.height="".concat(r,"px"),e.overlay.style.width="".concat(o,"px"),e.overlay.style.top="".concat(n.offsetTop,"px"),e.overlay.style.left="".concat(n.offsetLeft,"px")}}}},{key:"observeSizeChangeOfTarget",value:function(){var t=document.getElementById(this.for);this.sizeObserver=new V.a(this.refreshOverlay(this.for)),this.sizeObserver.observe(t),this.sizeObserver.observe(document.body)}},{key:"renderWhenForElementIsReady",value:function(){var t=this;this.observer&&this.observer.disconnect(),this.observer=new MutationObserver((function(){document.getElementById(t.for)&&(t.render(),t.observeSizeChangeOfTarget(),t.observer.disconnect())})),this.observer.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0})}},{key:"disconnectedCallback",value:function(){this.observer&&this.observer.disconnect(),this.sizeObserver&&this.sizeObserver.disconnect()}},{key:"getOffsetTop",value:function(t){return null===t?0:t.offsetTop+this.getOffsetTop(t.offsetParent)}},{key:"getOffsetLeft",value:function(t){return null===t?0:t.offsetLeft+this.getOffsetLeft(t.offsetParent)}},{key:"render",value:function(){var t=this,e="",n=document.getElementById(this.for);if(n){var r=n.getBoundingClientRect(),o=r.height,i=r.width;e='\n      <div style="\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: absolute;\n        top: '.concat(n.offsetTop,"px;\n        left: ").concat(n.offsetLeft,"px;\n        height: ").concat(o,"px;\n        width: ").concat(i,'px;\n        background: rgba(0,0,0,0.3);\n        pointer-events: none;\n        visibility: hidden;\n      ">\n        <header style="\n          text-align: center;\n          color: white;\n          font-size: 1.3em;\n          text-shadow: 1px 1px 1px darkslategrey;\n        ">\n          Use [CTRL] + scroll to zoom\n        </header>\n      </div>')}this.innerHTML=e,this.overlay=this.getElementsByTagName("div")[0],this.ticking=!1,document.addEventListener("mouseover",(function(e){var r=e.pageX,o=e.pageY,i=n.getBoundingClientRect(),a=i.height,s=i.width,c=t.getOffsetTop(n),u=t.getOffsetLeft(n);r>u&&r<u+s&&o>c&&o<c+a?t.over=!0:(t.over=!1,t.overlay.style.visibility="hidden")})),window.addEventListener("keydown",(function(e){e.ctrlKey&&(t.overlay.style.visibility="hidden")})),window.addEventListener("keyup",(function(e){17===e.keyCode&&(t.overlay.style.display="block")})),window.addEventListener("wheel",(function(e){!t.ticking&&t.over&&(window.requestAnimationFrame((function(){t.overlay.style.visibility=e.ctrlKey?"hidden":"visible",t.ticking=!1})),t.ticking=!0)}))}}])&&B(r.prototype,o),i&&B(r,i),s}(G(HTMLElement));function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nt(t,e){return!e||"object"!==J(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){var e="function"==typeof Map?new Map:void 0;return(rt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return ot(t,arguments,st(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),at(r,t)})(t)}function ot(t,e,n){return(ot=it()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&at(o,n.prototype),o}).apply(null,arguments)}function it(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(s,t);var e,n,r,o,i,a=(e=s,n=it(),function(){var t,r=st(e);if(n){var o=st(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return nt(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this)).attachShadow({mode:"open"}),t}return r=s,i=[{key:"observedAttributes",get:function(){return["length","displaystart","displayend"]}}],(o=[{key:"connectedCallback",value:function(){this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._scaleFactor=parseFloat(this.getAttribute("scalefactor"))||this._length/5,this._zoomToSeq=null!==this.querySelector('[slot="zoom-in-seq"]'),this.renderContent()}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&(this["_".concat(t)]=parseFloat(n))}},{key:"zoom",value:function(t){var e=0;"zoom-in"===t?e=this._scaleFactor:"zoom-out"===t?e=-this._scaleFactor:"zoom-in-seq"===t&&(e=this._displayend-this._displaystart-29);var n=this._displayend-e,r=this._displaystart;n>this._length&&(r-=n-this._length),this._displaystart<n&&this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,r),displayend:Math.min(n,this._length)},bubbles:!0,cancelable:!0}))}},{key:"renderContent",value:function(){var t=this,e=Object(j.a)(X||(X=tt(["\n      <style>\n        button {\n          display: inline-block;\n          border: none;\n          padding: var(--button-padding-v, 0.5rem) var(--button-padding-h, 1rem);\n          margin: var(--button-margin-v, 0) var(--button-margin-h, 0);\n          text-decoration: none;\n          background: var(--button-background, #d3d3d3);\n          color: var(--button-text-color);\n          font-family: var(--button-font-family, sans-serif);\n          font-size: var(--button-font-size, 1rem);\n          border-radius: var(--button-border-radius, 0);\n          cursor: pointer;\n          text-align: center;\n          transition: var(\n            --button-transition,\n            background 250ms ease-in-out,\n            transform 150ms ease\n          );\n          -webkit-appearance: none;\n          -moz-appearance: none;\n        }\n\n        button:hover,\n        button:focus {\n          background: var(--button-background-focus);\n        }\n      </style>\n      <button @click=",' title="Zoom Out">\n        <slot name="zoom-out">Zoom out</slot>\n      </button>\n      <button @click=',' title="Zoom In">\n        <slot name="zoom-in">Zoom in</slot>\n      </button>\n      ',"\n    "])),(function(){return t.zoom("zoom-out")}),(function(){return t.zoom("zoom-in")}),this._zoomToSeq?Object(j.a)(Z||(Z=tt(["<button\n            @click=",'\n            title="Zoom to sequence"\n          >\n            <slot name="zoom-in-seq"></slot>\n          </button>'])),(function(){return t.zoom("zoom-in-seq")})):"");Object(j.b)(e,this.shadowRoot)}}])&&et(r.prototype,o),i&&et(r,i),s}(rt(HTMLElement)),ut=n(35),lt=n(1048),ft=n.n(lt);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vt(t);if(e){var o=vt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mt(this,n)}}function mt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(v,t);var e,n,r,o=gt(v);function v(){return pt(this,v),o.apply(this,arguments)}return e=v,(n=[{key:"componentDidMount",value:function(){document.querySelector("#variation-track").data=S,document.querySelector("#linegraph").data=E,document.querySelector("#interpro-track-residues").data=x.e,document.querySelector("#interpro-track").data=x.b,document.querySelector("#interpro-track").contributors=x.d,document.querySelector("#sequence-track").data=O,document.querySelector("#sequence-track").fixedHighlight="400:600",document.querySelector("#sequence-coloured-track").data=O,document.querySelector("#sequence-coloured-track").fixedHighlight="400:600",document.querySelector("#sequence-coloured-track-iso").data=O,document.querySelector("#sequence-coloured-track-iso").fixedHighlight="400:600",document.querySelector("#links-track").data=x.c,document.querySelector("#track1").fixedHighlight="400:600",document.querySelector("#track2").fixedHighlight="400:600",document.querySelector("#track3").data=k,document.querySelector("#track3").fixedHighlight="400:600",document.querySelector("#interpro-track").fixedHighlight="400:600",document.querySelector("#interpro-track-residues").fixedHighlight="400:600",document.querySelector("#variation-track").fixedHighlight="400:600",document.querySelector("#variation-graph").fixedHighlight="400:600",document.querySelector("#saver").preSave=function(){var t=document.querySelector("#example"),e=document.createElement("h2");e.setAttribute("id","tmp_title_element"),e.innerHTML="ProtVista Snapshot",t.insertBefore(e,t.firstChild)},document.querySelector("#saver").postSave=function(){document.querySelector("#example").removeChild(document.getElementById("tmp_title_element"))},document.querySelector("#saver").backgroundColor="#ffffff",document.querySelector("#saver2").backgroundColor="#ddddee"}},{key:"render",value:function(){return Object(w.a)("protvista-manager",s.a),Object(w.a)("protvista-feature-adapter",u.a),Object(w.a)("protvista-track",l.default),Object(w.a)("protvista-navigation",f.a),Object(w.a)("protvista-sequence",h.a),Object(w.a)("protvista-coloured-sequence",p.a),Object(w.a)("protvista-interpro-track",m.a),Object(w.a)("protvista-variation",d.a),Object(w.a)("protvista-variation-graph",y.a),Object(w.a)("data-loader",c.a),Object(w.a)("protvista-variation-adapter",g.a),Object(w.a)("protvista-saver",H),Object(w.a)("protvista-overlay",$),Object(w.a)("protvista-zoom-tool",ct),Object(w.a)("protvista-links",b.a),Object(w.a)("nightingale-linegraph-track",_.a),a.a.createElement(i.Fragment,null,a.a.createElement(ut.default,{content:ft.a}),a.a.createElement("protvista-saver",{"element-id":"example",id:"saver"}),a.a.createElement("protvista-saver",{"element-id":"just-tracks",id:"saver2","file-name":"tracks","file-format":"jpeg"},a.a.createElement("button",null,"Download Just Tracks")),a.a.createElement("protvista-overlay",{for:"just-tracks"}),a.a.createElement("protvista-manager",{attributes:"variantfilters",displaystart:"1",displayend:"100",id:"example"},a.a.createElement("protvista-zoom-tool",{length:"770",style:{float:"right","--button-background":"#00639a","--button-text-color":"#FFFFFF","--button-background-focus":"#00a6d5","--button-border-radius":"4px"}},a.a.createElement("span",{slot:"zoom-in"},"+"),a.a.createElement("span",{slot:"zoom-in-seq"},"Zoom to Sequence")),a.a.createElement("protvista-navigation",{length:"770"}),a.a.createElement("div",{id:"just-tracks"},a.a.createElement("protvista-sequence",{length:"770",id:"sequence-track","highlight-event":"onmouseover","use-ctrl-to-zoom":!0}),a.a.createElement("protvista-coloured-sequence",{length:"770",id:"sequence-coloured-track",scale:"hydrophobicity-interface-scale",height:"10","highlight-event":"onmouseover","use-ctrl-to-zoom":!0}),a.a.createElement("protvista-coloured-sequence",{length:"770",id:"sequence-coloured-track-iso",scale:"isoelectric-point-scale",color_range:"white:0,dodgerblue:11",height:"10","use-ctrl-to-zoom":!0}),a.a.createElement("protvista-links",{id:"links-track",length:"770",height:20,"use-ctrl-to-zoom":!0}),a.a.createElement("protvista-track",{id:"track1",length:"770","use-ctrl-to-zoom":!0},a.a.createElement("protvista-feature-adapter",{id:"adapter1"},a.a.createElement("data-loader",null,a.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM"})))),a.a.createElement("protvista-track",{id:"track2",length:"770",layout:"non-overlapping","use-ctrl-to-zoom":!0},a.a.createElement("protvista-feature-adapter",{id:"adapter1"},a.a.createElement("data-loader",null,a.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM"})))),a.a.createElement("protvista-track",{id:"track3",length:"770",displaystart:"1",displayend:"80",layout:"non-overlapping","use-ctrl-to-zoom":!0}),a.a.createElement("protvista-interpro-track",{id:"interpro-track",length:"770",shape:"roundRectangle","highlight-event":"onmouseover",expanded:!0,"use-ctrl-to-zoom":!0}),a.a.createElement("protvista-interpro-track",{id:"interpro-track-residues",length:"770",shape:"roundRectangle","highlight-event":"onmouseover",expanded:!0,"use-ctrl-to-zoom":!0}),a.a.createElement("nightingale-linegraph-track",{id:"linegraph",length:"770"}),a.a.createElement("protvista-variation-graph",{id:"variation-graph",length:"770","use-ctrl-to-zoom":!0},a.a.createElement("protvista-variation-adapter",null,a.a.createElement("data-loader",null,a.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/variation/P05067"})))),a.a.createElement("protvista-variation",{id:"variation-track",length:"770","use-ctrl-to-zoom":!0}))))}}])&&dt(e.prototype,n),r&&dt(e,r),v}(i.Component);e.default=bt},593:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"b",(function(){return R})),n.d(e,"e",(function(){return T})),n.d(e,"a",(function(){return L})),n.d(e,"d",(function(){return D})),n.d(e,"c",(function(){return F})),n.d(e,"f",(function(){return M}));var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,r=void 0===n?-1/0:n,o=e.max,a=void 0===o?1/0:o;i(this,t),this.segments=[],this.max=a,this.min=r,this.regionString=null}var e,n,o;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var r=n.start,o=n.end,i=n.color;if(e)return"".concat(r,":").concat(o).concat(i?":".concat(i):"");var a=r===t.min?"":r,s=o===t.max?"":o;return"".concat(a,":").concat(s).concat(i?":".concat(i):"")})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var n=r(t.split(":"),4),o=n[0],i=n[1],a=n[2];if(void 0!==n[3])throw new Error("there should be at most 2 ':' per region. Region: ".concat(t));var s=o?Number(o):e.min,c=i?Number(i):e.max,u=""!==a?a:void 0;if(s>c){var l=[c,s];s=l[0],c=l[1]}if(s<e.min&&(s=e.min),c>e.max&&(c=e.max),Number.isNaN(s))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));if(Number.isNaN(c))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));if(u&&!u.match(/^#[0-9a-f]{6,8}$/i))throw new Error("The parsed value of ".concat(a," is not a color in hex format. Region: ").concat(t));return{start:s,end:c,color:u}})):this.segments=[]}}])&&a(e.prototype,n),o&&a(e,o),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},l=function(){function t(e){var n=e.element,r=e.min,o=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.element._highlightcolor="#FFEB3B66",this.region=new s({min:r,max:o}),this.fixedHighlight=null}var e,n,r;return e=t,(n=[{key:"max",set:function(t){this.region.max=t}},{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),this.element._highlightcolor=this.element.getAttribute("highlightcolor")||"#FFEB3B66",null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(u(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(u(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(u(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("pointer-events","none").merge(e).attr("fill",(function(e){return e.color?e.color:t.element._highlightcolor})).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}}])&&c(e.prototype,n),r&&c(e,r),t}();function f(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var h=function(t){return t};function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var e,n,r;return e=t,(n=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var n=this.element.getBoundingClientRect(),r=n.height,o=n.width,i=n.x,a=n.y;return t>i&&e<i+o&&e>a&&e<a+r}},{key:"wheel",value:function(t){var e=t.x,n=t.y,r=t.timeStamp;this.isWheelEventInsideElement(e,n)?r<this.timeStampWheelOutside+400?this.blockScroll(r):this.setElementScrollable(!0):this.blockScroll(r)}}])&&p(e.prototype,n),r&&p(e,r),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=v(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function m(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),t}function O(t,e,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=j(t);if(e){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=["left","right","top","bottom"],C=P.map((function(t){return"margin".concat(t)})),R=s,T=l,L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var r=t.split(",").map((function(t){return t.split(":")}));if(r.length<2)throw new Error("There should be at least 2 points to create a scale");e=r.map((function(t){var e=t[0].trim().toUpperCase();if(!f(e))throw new Error("The color '".concat(e," is not valid'"));return e})),n=r.map((function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n}))}return{range:e,domain:n}},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,r=void 0===n?h:n,o=e.valueFormatter,i=void 0===o?h:o;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map((function(t){return t.split(":")})),s={};return a.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));s[r(t[0])]=i(t[1])})),s}return{}},F=d,M=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialValue:{top:0,bottom:0,left:0,right:0}},r=function(t){E(r,t);var e=k(r);function r(){var t;return _(this,r),(t=e.call(this)).margin=n.initialValue,t}return S(r,[{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&C.includes(t)&&(this[t]=n),O(j(r.prototype),"attributeChangedCallback",this).call(this,t,e,n)}}],[{key:"observedAttributes",get:function(){return[].concat(m(O(j(r),"observedAttributes",this)),m(C))}}]),r}(t),o=g(P);try{var i=function(){var t=e.value;Object.defineProperty(r.prototype,"margin".concat(t),{get:function(){return this.margin[t]||0},set:function(e){this.margin[t]=+e}})};for(o.s();!(e=o.n()).done;)i()}catch(t){o.e(t)}finally{o.f()}return r}},594:function(t,e,n){"use strict";var r=n(608),o=n(604);e.a=function(t){return Object(o.a)(t)&&Object(r.a)(t)}},595:function(t,e,n){"use strict";e.a=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},596:function(t,e,n){"use strict";var r=n(599);e.a=function(t,e){return!!(null==t?0:t.length)&&Object(r.a)(t,e,0)>-1}},598:function(t,e,n){"use strict";var r=n(614);var o=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},i=Math.max;var a=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=i(r.length-e,0),c=Array(s);++a<s;)c[a]=r[e+a];a=-1;for(var u=Array(e+1);++a<e;)u[a]=r[a];return u[e]=n(c),o(t,this,u)}};var s=function(t){return function(){return t}},c=n(663),u=c.a?function(t,e){return Object(c.a)(t,"toString",{configurable:!0,enumerable:!1,value:s(e),writable:!0})}:r.a,l=Date.now;var f=function(t){var e=0,n=0;return function(){var r=l(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(u);e.a=function(t,e){return f(a(t,e,r.a),t+"")}},599:function(t,e,n){"use strict";var r=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1};var o=function(t){return t!=t};var i=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1};e.a=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},603:function(t,e,n){"use strict";n.r(e),n.d(e,"DefaultLayout",(function(){return M})),n.d(e,"getColorByType",(function(){return K}));var r=n(585),o=n(599),i=n(608),a=n(643),s=n(622),c=n(604);var u=function(t){return"string"==typeof t||!Object(s.a)(t)&&Object(c.a)(t)&&"[object String]"==Object(a.a)(t)},l=/\s/;var f=function(t){for(var e=t.length;e--&&l.test(t.charAt(e)););return e},h=/^\s+/;var p=function(t){return t?t.slice(0,f(t)+1).replace(h,""):t},d=n(653),y=n(652),g=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,v=/^0o[0-7]+$/i,b=parseInt;var _=function(t){if("number"==typeof t)return t;if(Object(y.a)(t))return NaN;if(Object(d.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(d.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=p(t);var n=m.test(t);return n||v.test(t)?b(t.slice(2),n?2:8):g.test(t)?NaN:+t};var w=function(t){return t?(t=_(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var S=function(t){var e=w(t),n=e%1;return e==e?n?e-n:e:0},O=n(590);var E=function(t,e){return Object(O.a)(e,(function(e){return t[e]}))},x=n(661);var k=function(t){return null==t?[]:E(t,Object(x.a)(t))},A=Math.max;var j=function(t,e,n,r){t=Object(i.a)(t)?t:k(t),n=n&&!r?S(n):0;var a=t.length;return n<0&&(n=A(a+n,0)),u(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Object(o.a)(t,e,n)>-1},P=n(632),C=n(619),R=n(613),T=n(609);function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"isContinuous",value:function(t){return"bridge"!==(t=t.toLowerCase())}}],(n=[{key:"getFeatureShape",value:function(t,e,n,r){return r=r||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+r]&&(r="rectangle"),this["_"+r]()}},{key:"_rectangle",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}},{key:"_roundRectangle",value:function(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 -6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 -6,-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,-6Z"}},{key:"_line",value:function(){return"M0,".concat(this._ftHeight/2," L").concat(this._ftWidth,",").concat(this._ftHeight/2)}},{key:"_bridge",value:function(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}},{key:"_getMiddleLine",value:function(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}},{key:"_diamond",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}},{key:"_chevron",value:function(){var t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_catFace",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_triangle",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_wave",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getPolygon",value:function(t){for(var e="M ",n=this._ftWidth/2,r=0;r<t;r++)e+=5*Math.cos(2*Math.PI*r/t)+n+","+(5*Math.sin(2*Math.PI*r/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_hexagon",value:function(){return this._getPolygon(6)}},{key:"_pentagon",value:function(){return this._getPolygon(5)}},{key:"_circle",value:function(){var t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}},{key:"_arrow",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_doubleBar",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getBrokenEnd",value:function(){var t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}},{key:"_getBrokenStart",value:function(){var t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}},{key:"_discontinuosStart",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuos",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuosEnd",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}},{key:"_helix",value:function(){for(var t=2.5,e=2.5,n=Math.round(this._ftWidth/5),r="",o=0;o<n;o++)r+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+",2.5 "+e+", 0 C"+(e-t)+",2.5 "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5;return r}},{key:"_strand",value:function(){var t=0;this._ftWidth>5&&(t=this._ftWidth-5);var e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+"M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z"}}])&&L(e.prototype,n),r&&L(e,r),t}();function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M=function(){function t(e){var n=e.layoutHeight,r=e.padding,o=void 0===r?1:r,i=e.minHeight,a=void 0===i?17:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._padding=o,this._minHeight=a,this._layoutHeight=n}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this._features=t}},{key:"getFeatureYPos",value:function(){var t=this.getFeatureHeight();return this._layoutHeight/2-t/2}},{key:"getFeatureHeight",value:function(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}])&&F(e.prototype,n),r&&F(e,r),t}();function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=W(t);if(e){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return q(this,n)}}function q(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(t,e){return e.some((function(e){return n=t,r=e,!(Number(r.start)>Number(n.end)||Number(r.end)<Number(n.start));var n,r}))},U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(i,t);var e,n,r,o=V(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).featuresMap=new Map,e._rowHeight=0,e._rows=[],e._minHeight=15,e}return e=i,(n=[{key:"init",value:function(t){var e=this;t.forEach((function(t){var n=e._rows.findIndex((function(e){return!B(t,e)}));n>=0?(e._rows[n].push(t),e.featuresMap.set(t,n)):(e._rows.push([t]),e.featuresMap.set(t,e._rows.length-1))})),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}},{key:"getOffset",value:function(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}},{key:"getFeatureYPos",value:function(t){var e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}},{key:"getFeatureHeight",value:function(){return this._rowHeight-2*this._padding}}])&&I(e.prototype,n),r&&I(e,r),i}(M),G={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},z=function(t){if(G[t.toUpperCase()])return G[t.toUpperCase()].shape;var e=Object.values(G).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e?e.shape:"rectangle"},K=function(t){if(G[t.toUpperCase()])return G[t.toUpperCase()].color;var e=Object.values(G).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e||console.log(t),e?e.color:"black"};function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t){return function(t){if(Array.isArray(t))return X(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e,n){return(J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt(t);if(e){var o=rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(a,t);var e,n,o,i=et(a);function a(){return Z(this,a),i.apply(this,arguments)}return e=a,o=[{key:"normalizeLocations",value:function(t){return t.map((function(t){var e=t.locations,n=t.start,r=t.end;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:r}]}]})}))}},{key:"observedAttributes",get:function(){return T.a.observedAttributes.concat(["highlight","color","shape","filters"])}}],(n=[{key:"getLayout",value:function(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new U({layoutHeight:this._height}):new M({layoutHeight:this._height})}},{key:"connectedCallback",value:function(){var t=this;J(rt(a.prototype),"connectedCallback",this).call(this),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new D,this._layoutObj=this.getLayout(),this._data&&this._createTrack(),this.addEventListener("load",(function(e){j(t.children,e.target)&&(t.data=e.detail.payload)}))}},{key:"processData",value:function(t){this._originalData=a.normalizeLocations(t)}},{key:"data",set:function(t){this.processData(t),this._applyFilters(),this._layoutObj=this.getLayout(),this._createTrack()}},{key:"filters",set:function(t){this._filters=t,this._applyFilters(),this._createTrack()}},{key:"_getFeatureColor",value:function(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?K(t.type):t.feature&&t.feature.type?K(t.feature.type):"black"}},{key:"_getFeatureFillColor",value:function(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}},{key:"_getShape",value:function(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?z(t.type):t.feature&&t.feature.type?z(t.feature.type):"rectangle"}},{key:"_createTrack",value:function(){this._layoutObj.init(this._data),Object(r.select)(this).selectAll("div").remove(),this.svg=Object(r.select)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}},{key:"_createFeatures",value:function(){var t=this;this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",(function(t){return"g_".concat(t.accession)})).selectAll("g.location-group").data((function(t){return t.locations.map((function(e){return Object.assign({},e,{feature:t})}))})).enter().append("g").attr("class","location-group");var e=this.locations.selectAll("g.fragment-group").data((function(t){return t.fragments.map((function(e){return Object.assign({},e,{feature:t.feature})}))})).enter().append("g").attr("class","fragment-group");e.append("path").attr("class",(function(e){return"".concat(t._getShape(e)," feature")})).attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("fill",(function(e){return t._getFeatureFillColor(e)})).attr("stroke",(function(e){return t._getFeatureColor(e)})).style("fill-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})).style("stroke-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})),e.append("rect").attr("class","outer-rectangle feature").attr("width",(function(e){return t.getSingleBaseWidth()*(e.end?e.end-e.start+1:1)})).attr("height",(function(e){return t._layoutObj.getFeatureHeight(e)})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("fill","transparent").attr("stroke","transparent").call(this.bindEvents,this)}},{key:"_applyFilters",value:function(){var t=this;if(!this._filters||this._filters.length<=0)this._data=this._originalData;else{var e=Object(P.a)(this._filters,"category"),n=Object.values(e).map((function(e){var n=e.map((function(e){return e.filterFn(t._originalData)}));return C.a.apply(void 0,Q(n))})),r=R.a.apply(void 0,Q(n));this._data=r}}},{key:"refresh",value:function(){var t=this;if(this.xScale&&this.seq_g){var e=this.seq_g.selectAll("g.fragment-group").data(this._data.reduce((function(t,e){return t.concat(e.locations.reduce((function(t,n){return t.concat(n.fragments.map((function(t){return Object.assign({},t,{feature:e})})))}),[]))}),[]));e.selectAll("path.feature").attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),e.selectAll("rect.outer-rectangle").attr("width",(function(e){return t.getSingleBaseWidth()*(e.end?e.end-e.start+1:1)})).attr("height",(function(e){return t._layoutObj.getFeatureHeight(e)})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),this._updateHighlight()}}},{key:"_updateHighlight",value:function(){this.trackHighlighter.updateHighlight()}}])&&$(e.prototype,n),o&&$(e,o),a}(T.a);e.default=ot},609:function(t,e,n){"use strict";var r=n(585),o=n(593),i=n(665);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p(t,arguments,g(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,t)})(t)}function p(t,e,n){return(p=d()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&y(o,n.prototype),o}).apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(m,t);var e,n,a,c,h,p=(e=m,n=d(),function(){var t,r=g(e);if(n){var o=g(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function m(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),t=p.call(this),m._polyfillElementClosest(),t._updateScaleDomain=t._updateScaleDomain.bind(f(t)),t._initZoom=t._initZoom.bind(f(t)),t.zoomed=t.zoomed.bind(f(t)),t._applyZoomTranslation=t.applyZoomTranslation.bind(f(t)),t._resetEventHandler=t._resetEventHandler.bind(f(t));var e=!1;return t.applyZoomTranslation=function(){e||(e=!0,requestAnimationFrame((function(){e=!1,t._applyZoomTranslation()})))},t._onResize=t._onResize.bind(f(t)),t._listenForResize=t._listenForResize.bind(f(t)),t.trackHighlighter=new o.e({element:f(t),min:1}),t.scrollFilter=new o.c(f(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}return a=m,h=[{key:"observedAttributes",get:function(){return["displaystart","displayend","length","highlight"]}},{key:"_getClickCoords",value:function(){return r.event?[r.event.pageX,r.event.pageY]:null}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}}],(c=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",(function(t){console.error(t)})),"none"!==this._highlightEvent&&this.addEventListener("click",this._resetEventHandler),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),"none"!==this._highlightEvent&&this.removeEventListener("click",this._resetEventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"length",get:function(){return this._length},set:function(t){this._length=t,this.trackHighlighter.max=t}},{key:"xScale",get:function(){return this._xScale},set:function(t){this._xScale=t}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",get:function(){return this._svg},set:function(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()}},{key:"fixedHighlight",set:function(t){this.trackHighlighter.setFixedHighlight(t)}},{key:"getWidthWithMargins",value:function(){return this.width?this.width-this.margin.left-this.margin.right:0}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(r.scaleLinear)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){var t=this;this._zoom=Object(r.zoom)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter((function(){if(!(r.event instanceof WheelEvent))return!0;if(t.hasAttribute("scroll-filter")){var e=t.getAttribute("scrollable");if(e)return"true"===e}return!t.hasAttribute("use-ctrl-to-zoom")||r.event.ctrlKey})).on("zoom",this.zoomed)}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"attributeChangedCallback",value:function(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=r.event.transform.rescaleX(this._originXScale),!this.dontDispatch){var t=s(this.xScale.domain(),2),e=t[0],n=t[1];this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,e),displayend:Math.min(this.length,Math.max(n-1,e+1))},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.zoomIdentity.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new i.a(this._onResize),this._ro.observe(this)}},{key:"_resetEventHandler",value:function(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}},{key:"getXFromSeqPosition",value:function(t){return this.margin.left+this.xScale(t)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"createEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;e&&(e=e.feature?e.feature:e);var c={eventtype:t,coords:m._getClickCoords(),feature:e,target:s};return n&&(e&&e.fragments?c.highlight=e.fragments.map((function(t){return"".concat(t.start,":").concat(t.end)})).join(","):r.event&&r.event.shiftKey&&this._highlight?c.highlight="".concat(this._highlight,",").concat(i,":").concat(a):c.highlight=i&&a?"".concat(i,":").concat(a):null),o&&(c.selectedid=e&&e.protvistaFeatureId),new CustomEvent("change",{detail:c,bubbles:!0,cancelable:!0})}},{key:"bindEvents",value:function(t,e){t.on("mouseover",(function(t,n,r){e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,!1,t.start,t.end,r[n]))})).on("mouseout",(function(){e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))})).on("click",(function(t,n,r){e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,!0,t.start,t.end,r[n]))}))}}])&&u(a.prototype,c),h&&u(a,h),m}(h(HTMLElement));e.a=Object(o.f)(m,{initialValue:{top:10,right:10,bottom:10,left:10}})},613:function(t,e,n){"use strict";var r=n(590),o=n(621),i=n(596),a=n(595),s=n(664),c=n(616),u=Math.min;var l=function(t,e,n){for(var l=n?a.a:i.a,f=t[0].length,h=t.length,p=h,d=Array(h),y=1/0,g=[];p--;){var m=t[p];p&&e&&(m=Object(r.a)(m,Object(s.a)(e))),y=u(m.length,y),d[p]=!n&&(e||f>=120&&m.length>=120)?new o.a(p&&m):void 0}m=t[0];var v=-1,b=d[0];t:for(;++v<f&&g.length<y;){var _=m[v],w=e?e(_):_;if(_=n||0!==_?_:0,!(b?Object(c.a)(b,w):l(g,w,n))){for(p=h;--p;){var S=d[p];if(!(S?Object(c.a)(S,w):l(t[p],w,n)))continue t}b&&b.push(w),g.push(_)}}return g},f=n(598),h=n(594);var p=function(t){return Object(h.a)(t)?t:[]},d=Object(f.a)((function(t){var e=Object(r.a)(t,p);return e.length&&e[0]===t[0]?l(e):[]}));e.a=d},619:function(t,e,n){"use strict";var r=n(682),o=n(598),i=n(621),a=n(596),s=n(595),c=n(616),u=n(676);var l=function(){},f=n(623),h=u.a&&1/Object(f.a)(new u.a([,-0]))[1]==1/0?function(t){return new u.a(t)}:l;var p=function(t,e,n){var r=-1,o=a.a,u=t.length,l=!0,p=[],d=p;if(n)l=!1,o=s.a;else if(u>=200){var y=e?null:h(t);if(y)return Object(f.a)(y);l=!1,o=c.a,d=new i.a}else d=e?[]:p;t:for(;++r<u;){var g=t[r],m=e?e(g):g;if(g=n||0!==g?g:0,l&&m==m){for(var v=d.length;v--;)if(d[v]===m)continue t;e&&d.push(m),p.push(g)}else o(d,m,n)||(d!==p&&d.push(m),p.push(g))}return p},d=n(594),y=Object(o.a)((function(t){return p(Object(r.a)(t,1,d.a,!0))}));e.a=y},620:function(t,e,n){"use strict";n.d(e,"d",(function(){return S})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c}));var r=n(743),o=[{name:"ECO:0000269",description:"Manual assertion based on experiment",shortDescription:"Publication",acronym:"EXP",isManual:!0},{name:"ECO:0000303",description:"Manual assertion based on opinion",shortDescription:"Publication",acronym:"NAS",isManual:!0},{name:"ECO:0000305",description:"Manual assertion inferred by curator",shortDescription:"Curated",acronym:"IC",isManual:!0},{name:"ECO:0000250",description:"Manual assertion inferred from sequence similarity",shortDescription:"By similarity",acronym:"ISS",isManual:!0},{name:"ECO:0000255",description:"Manual assertion according to rules",shortDescription:"Sequence Analysis",acronym:"ISM",isManual:!0},{name:"ECO:0007744",description:"Manual assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXM",isManual:!0},{name:"ECO:0000312",description:"Manual assertion inferred from database entries",shortDescription:"Imported",acronym:"MI",isManual:!0},{name:"ECO:0000256",description:"Automatic assertion according to rules",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000259",description:"Automatic assertion inferred from signature match",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0007829",description:"Automatic assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXA"},{name:"ECO:0000213",description:"Automatic assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXA"},{name:"ECO:0000244",description:"Manual assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXM",isManual:!0},{name:"ECO:0000313",description:"Automatic assertion inferred from database entries",shortDescription:"Imported",acronym:"AI"},{name:"ECO:0000260",description:"Manual assertion inferred from signature match",shortDescription:"InterPro annotation",acronym:"SGNM",isManual:!0}];function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(t){return t?"\n      <ul>".concat(t.map((function(t){var e,n=o.find((function(e){return e.name===t.code}));return n?"<li title='".concat(n.description,'\' style="padding: .25rem 0">').concat(n.shortDescription,":&nbsp;").concat(t.source?(e=t.source).name.toLowerCase()==="PubMed".toLowerCase()?"".concat(e.id,"&nbsp;(<a href='").concat(e.url,"' style=\"color:#FFF\" target='_blank'>").concat(e.name,"</a>&nbsp;<a href='").concat(e.alternativeUrl,"' style=\"color:#FFF\" target='_blank'>EuropePMC</a>)"):"&nbsp;<a href='".concat(e.url,"' style=\"color:#FFF\" target='_blank'>").concat(e.id,"</a>&nbsp;(").concat(e.name,")"):"","</li>"):""})).join(""),"</ul>\n    "):""},u=function(t){return"<ul>".concat(t.map((function(t){return'<li style="padding: .25rem 0">'.concat(t.name," ").concat(t.url?'<a href="'.concat(t.url,'" style="color:#FFF" target="_blank">').concat(t.id,"</a>"):"".concat(t.name," ").concat(t.id),"</li>")})).join(""),"</ul>")},l=function(t){var e=c(t.evidences);return"\n      ".concat(t.description?"<h5>Description</h5><p>".concat(t.description,"</p>"):"","\n      ").concat(t.matchScore?"<h5>Match score</h5><p>".concat(t.matchScore,"%</p>"):"","\n      ").concat(t.ftId?"<h5>Feature ID</h5><p>".concat(t.ftId,"</p>"):"","\n      ").concat(t.alternativeSequence?"<h5>Alternative sequence</h5><p>".concat(t.alternativeSequence,"</p>"):"","\n      ").concat(e?"<h5>Evidence</h5>".concat(e):"","\n      ").concat(t.xrefs?"<h5>Cross-references</h5>".concat(u(t.xrefs)):"","\n      ").concat(t.peptide?"<h5>Peptide</h5><p>".concat(t.peptide,"</p>"):"","\n      ").concat(t.ptms?"<h5>PTMs</h5><ul>".concat(t.ptms.map((function(t){return"<li>".concat(t.name," - position: ").concat(t.position,"</li>")})),"</ul>"):"","\n        ")};function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){var e="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return y(t,arguments,v(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,t)})(t)}function y(t,e,n){return(y=g()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&m(o,n.prototype),o}).apply(null,arguments)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(t){var e=[],n=t.features;return n&&n.length>0&&(e=function(t){return t.map((function(t){var e={};return t.begin&&(e.start=t.begin),a(a({},t),e)}))}(e=n.map((function(t){return _(_({},t),{},{tooltipContent:l(t),protvistaFeatureId:Object(r.a)()})})))),e},O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(s,t);var e,n,r,o,i,a=(e=s,n=g(),function(){var t,r=v(e);if(n){var o=v(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return p(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this))._adaptedData=[],t}return r=s,(o=[{key:"connectedCallback",value:function(){this.subscribers=this.getAttribute("subscribers"),this._filters=this.getAttribute("filters")?this.getAttribute("filters").split(","):[],this._addLoaderListeners()}},{key:"data",set:function(t){this._emitEvent(t)}},{key:"subscribers",get:function(){return this._subscribers},set:function(t){t&&(this._subscribers=t.split(","))}},{key:"parseEntry",value:function(t){this._adaptedData=S(t)}},{key:"filterData",value:function(){var t=this;Array.isArray(this._adaptedData)&&this._filters.length>0&&(this._adaptedData=this._adaptedData.filter((function(e){return t._filters.includes(e.type)})))}},{key:"adaptedData",get:function(){return this._adaptedData}},{key:"_setSubscriberData",value:function(){var t=this;this.subscribers.forEach((function(e){var n=document.querySelector(e);n?n.data=t._adaptedData:console.error("Element with id '".concat(e,"' not found"))}))}},{key:"_emitEvent",value:function(t){this.parseEntry(t),this.filterData(),this.subscribers&&this._setSubscriberData(),this.dispatchEvent(new CustomEvent("load",{detail:{payload:this._adaptedData},bubbles:!0,cancelable:!0}))}},{key:"_addLoaderListeners",value:function(){var t=this;this.addEventListener("load",(function(e){if(e.target!==t){e.stopPropagation();try{if(e.detail.payload.errorMessage)throw e.detail.payload.errorMessage;t._emitEvent(e.detail.payload)}catch(e){t.dispatchEvent(new CustomEvent("error",{detail:e,bubbles:!0,cancelable:!0}))}}}))}}])&&h(r.prototype,o),i&&h(r,i),s}(d(HTMLElement));e.a=O},629:function(t,e,n){"use strict";n.d(e,"b",(function(){return m}));var r=n(675);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,t)})(t)}function l(t,e,n){return(l=f()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&h(o,n.prototype),o}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var y=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},g=new Map,m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Headers({accept:"application/json"}),n=g.get(t);if(n)return n;var r=y(void 0,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.fetch(t,{headers:e});case 2:if((r=n.sent).ok){n.next=5;break}throw new Error("Request Failed: Status = ".concat(r.status,"; URI = ").concat(t,"; Time = ").concat(new Date));case 5:if(204!==r.status){n.next=7;break}return n.abrupt("return",{payload:null,headers:r.headers});case 7:return n.next=9,r.json();case 9:return o=n.sent,n.abrupt("return",{payload:o,headers:r.headers});case 11:case"end":return n.stop()}}),n)})));return g.set(t,r),r.catch((function(){return g.delete(t)})),r},v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(g,t);var e,n,o,a,u,l=(e=g,n=f(),function(){var t,r=p(e);if(n){var o=p(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return c(this,t)});function g(){var t;return d(this,g),(t=l.call(this))._data=null,t.selector=(t.getAttribute("selector")||"").trim()||function(t){return t},t}return o=g,u=[{key:"is",get:function(){return"data-loader"}}],(a=[{key:"fetch",value:function(){return y(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o,a,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=this.children,(e=Array.from(u).filter((function(t){return t.matches('source[src], script[type="application/json"]')}))).length){t.next=3;break}return t.abrupt("return");case 3:n=[],a=i(e),t.prev=5,a.s();case 7:if((s=a.n()).done){t.next=31;break}if(c=s.value,t.prev=9,!(c instanceof HTMLSourceElement)){t.next=22;break}return t.t0=Object,t.t1=Object,t.t2={},t.next=16,m(c.src);case 16:t.t3=t.sent,t.t4=t.t1.assign.call(t.t1,t.t2,t.t3),t.t5={srcElement:c,src:c.src},o=t.t0.assign.call(t.t0,t.t4,t.t5),t.next=23;break;case 22:o={payload:JSON.parse(c.textContent)};case 23:return t.abrupt("break",31);case 26:t.prev=26,t.t6=t.catch(9),n.push(t.t6);case 29:t.next=7;break;case 31:t.next=36;break;case 33:t.prev=33,t.t7=t.catch(5),a.e(t.t7);case 36:return t.prev=36,a.f(),t.finish(36);case 39:if(o){t.next=43;break}this._errors=n;try{this.dispatchEvent(new CustomEvent("error",{detail:n,bubbles:!0,cancelable:!0}))}catch(t){console.error(t)}return t.abrupt("return");case 43:"string"==typeof this.selector?this._data=Object(r.a)(o.payload,this.selector):this._data=this.selector(o.payload),o.payload=this.data,this.dispatchEvent(new CustomEvent("load",{detail:o,bubbles:!0,cancelable:!0}));case 46:case"end":return t.stop()}var u}),t,this,[[5,33,36,39],[9,26]])})))}},{key:"data",get:function(){return this._data}},{key:"loaded",get:function(){return!!this.data}},{key:"errors",get:function(){return this._errors}},{key:"selector",get:function(){return this._selector},set:function(t){this._selector=t}},{key:"connectedCallback",value:function(){this.fetch()}}])&&s(o.prototype,a),u&&s(o,u),g}(u(HTMLElement));e.a=v},700:function(t,e,n){"use strict";var r=n(585),o=n(593);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,h(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function u(t,e,n){return(u=l()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&f(o,n.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,o,i,c,u=(e=p,n=l(),function(){var t,r=h(e);if(n){var o=h(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return s(this,t)});function p(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=u.call(this))._x=null,t._padding=0,t.height=40,t.dontDispatch=!1,t}return o=p,c=[{key:"observedAttributes",get:function(){return["length","displaystart","displayend","highlightStart","highlightEnd","width","rulerstart"]}}],(i=[{key:"_refreshWidth",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth-this.margin.left-this.margin.right,this.width>0&&(this._padding=10)}},{key:"connectedCallback",value:function(){this._refreshWidth(),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._rulerstart=parseFloat(this.getAttribute("rulerStart"))||1,this._onResize=this._onResize.bind(this),this._createNavRuler()}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro&&this._ro.unobserve(this),window.removeEventListener("resize",this._onResize)}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&(this["_".concat(t)]=parseFloat(n),this._updateNavRuler())}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"_createNavRuler",value:function(){var t=this;this._x=Object(r.scaleLinear)().range([this._padding,this.width-this._padding]),this._x.domain([this._rulerstart,this._rulerstart+this._length-1]),Object(r.select)(this).selectAll("div").remove(),this._container=Object(r.select)(this).append("div").attr("class","container"),this._svg=this._container.append("svg").attr("id","").attr("width",this.width).attr("height",this.height),this._xAxis=Object(r.axisBottom)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",this.height-this._padding),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",this.height-this._padding).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(r.brushX)().extent([[this._padding,0],[this.width-this._padding,.51*this.height]]).on("brush",(function(){r.event.selection&&(t._displaystart=Object(r.format)("d")(t._x.invert(r.event.selection[0])),t._displayend=Object(r.format)("d")(t._x.invert(r.event.selection[1])),t.dontDispatch||t.dispatchEvent(new CustomEvent("change",{detail:{displayend:t._displayend,displaystart:t._displaystart,extra:{transform:r.event.transform}},bubbles:!0,cancelable:!0})),t._updateLabels(),t._updatePolygon())})),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}},{key:"_onResize",value:function(){this._refreshWidth(),this._x=this._x.range([this._padding,this.width-this._padding]),this._svg.attr("width",this.width),this._viewport.extent([[this._padding,0],[this.width-this._padding,.51*this.height]]),this._brushG.call(this._viewport),this._updateNavRuler()}},{key:"_updateNavRuler",value:function(){this._x&&(this._container.style("padding-left","".concat(this.margin.left,"px")).style("padding-right","".concat(this.margin.right,"px")).style("padding-top","".concat(this.margin.top,"px")).style("padding-bottom","".concat(this.margin.bottom,"px")),this._x.domain([this._rulerstart,this._rulerstart+this._length-1]),this._axis.call(this._xAxis),this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}},{key:"_updateLabels",value:function(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}},{key:"_updatePolygon",value:function(){this.polygon&&this.polygon.attr("points","".concat(this._x(this._displaystart),",").concat(this.height/2,"\n        ").concat(this._x(this._displayend),",").concat(this.height/2,"\n        ").concat(this.width,",").concat(this.height,"\n        0,").concat(this.height))}}])&&a(o.prototype,i),c&&a(o,c),p}(c(HTMLElement));e.a=Object(o.f)(p)},701:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,h(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function u(t,e,n){return(u=l()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&f(o,n.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,r,i,c,u=(e=p,n=l(),function(){var t,r=h(e);if(n){var o=h(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return s(this,t)});function p(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=u.call(this)).protvistaElements=new Set,t.attributeValues=new Map,t.propertyValues=new Map,t.mouseOver=!1,t}return r=p,c=[{key:"observedAttributes",get:function(){return["attributes","length","displaystart","displayend","highlight"]}}],(i=[{key:"length",get:function(){return this.attributeValues.get("length")},set:function(t){this.attributeValues.set("length",t)}},{key:"displaystart",get:function(){return this.attributeValues.get("displaystart")},set:function(t){this.attributeValues.set("displaystart",t)}},{key:"displayend",get:function(){return this.attributeValues.get("displayend")},set:function(t){this.attributeValues.set("displayend",t)}},{key:"highlight",get:function(){return this.attributeValues.get("highlight")},set:function(t){this.attributeValues.set("highlight",t)}},{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){if("attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute");this.attributeValues=new Map(this._attributes.filter((function(t){return!p.observedAttributes.includes(t)})).map((function(t){return[t,null]})))}else"length"===t&&(this.length=n),"displaystart"===t&&(this.displaystart=n),"displayend"===t&&(this.displayend=n),"highlight"===t&&(this.highlight=n);this.applyAttributes()}}},{key:"register",value:function(t){this.protvistaElements.add(t),this.applyAttributes()}},{key:"unregister",value:function(t){this.protvistaElements.delete(t)}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"applyAttributes",value:function(){var t=this;this.protvistaElements.forEach((function(e){t.attributeValues.forEach((function(t,n){!1===t||null==t?e.removeAttribute(n):e.setAttribute(n,"boolean"==typeof t?"":t)}))}))}},{key:"applyProperties",value:function(t){var e=this;if(t){var n=this.querySelector("#".concat(t));this.propertyValues.forEach((function(t,e){n[e]=t}))}else this.protvistaElements.forEach((function(t){e.propertyValues.forEach((function(e,n){t[n]=e}))}))}},{key:"isRegisteredAttribute",value:function(t){return o(this.attributeValues.keys()).includes(t)||p.observedAttributes.includes(t)}},{key:"_changeListener",value:function(t){var e=this;if(t.detail)switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:this.isRegisteredAttribute(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach((function(n){e.isRegisteredAttribute(n)&&e.attributeValues.set(n,t.detail[n])})),this.applyAttributes()}}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}}])&&a(r.prototype,i),c&&a(r,c),p}(c(HTMLElement));e.a=p},734:function(t,e,n){"use strict";var r=n(585),o=n(609);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n,r){return(c="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var o,i=l(t,e);if(i){if((o=Object.getOwnPropertyDescriptor(i,e)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,e)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,e,o)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=l(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,i,l=h(p);function p(){return a(this,p),l.apply(this,arguments)}return e=p,i=[{key:"observedAttributes",get:function(){return o.a.observedAttributes.concat("highlightstart","highlightend")}}],(n=[{key:"connectedCallback",value:function(){var t=this;u(d(p.prototype),"connectedCallback",this).call(this),this.sequence=this.getAttribute("sequence");var e=this.getAttribute("numberofticks");this.numberOfTicks=Number.isInteger(parseInt(e,10))?e:3,this.sequence&&this._createSequence(),this.addEventListener("load",(function(e){t.data=e.detail.payload}))}},{key:"data",get:function(){return this.sequence},set:function(t){"string"==typeof t?this.sequence=t:"sequence"in t&&(this.sequence=t.sequence),this.sequence&&!u(d(p.prototype),"svg",this)?this._createSequence():this.refresh()}},{key:"_getCharSize",value:function(){if(this.seq_g){var t=this.seq_g.select("text.base").node();if(t)this.chWidth=.8*t.getBBox().width,this.chHeight=1.6*t.getBBox().height;else{var e=this.seq_g.append("text").attr("class","base").text("T");this.chWidth=.8*e.node().getBBox().width,this.chHeight=1.6*e.node().getBBox().height,e.remove()}}}},{key:"_createSequence",value:function(){Object(r.select)(this).selectAll("div").remove(),function(t,e,n,r,o){if(!c(t,e,n,r||t)&&o)throw new Error("failed to set property")}(d(p.prototype),"svg",Object(r.select)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",this._height),this,!0),this.seq_bg=u(d(p.prototype),"svg",this).append("g").attr("class","background"),this.axis=u(d(p.prototype),"svg",this).append("g").attr("class","x axis"),this.seq_g=u(d(p.prototype),"svg",this).append("g").attr("class","sequence").attr("transform","translate(0,".concat(.75*this._height,")")),this.trackHighlighter.appendHighlightTo(this.svg),this.refresh()}},{key:"refresh",value:function(){var t=this;if(this._getCharSize(),this.axis){var e=this.getSingleBaseWidth(),n=e-this.chWidth,o=e/2,i=Math.round(Math.max(0,this._displaystart-2)),a=Math.round(Math.min(this.sequence.length,this._displayend+1)),s=n<0?[]:this.sequence.slice(i,a).split("").map((function(t,e){return{start:1+i+e,end:1+i+e,aa:t}}));this.height>this.chHeight&&(this.xAxis=Object(r.axisBottom)(this.xScale).tickFormat((function(t){return Number.isInteger(t)?t:""})).ticks(this.numberOfTicks,"s"),this.axis.call(this.xAxis)),this.axis.attr("transform","translate(".concat(this.margin.left+o,",0)")),this.axis.select(".domain").remove(),this.axis.selectAll(".tick line").remove(),this.bases=this.seq_g.selectAll("text.base").data(s,(function(t){return t.start})),this.bases.enter().append("text").attr("class","base").attr("text-anchor","middle").attr("x",(function(e){return t.getXFromSeqPosition(e.start)+o})).text((function(t){return t.aa})).style("pointer-events","none").style("font-family","monospace"),this.bases.exit().remove(),this.bases.attr("x",(function(e){return t.getXFromSeqPosition(e.start)+o})),this.background=this.seq_bg.selectAll("rect.base_bg").data(s,(function(t){return t.start})),this.background.enter().append("rect").attr("class","base_bg feature").attr("height",this._height).merge(this.background).attr("width",e).attr("fill",(function(t){return Math.round(t.start)%2?"#ccc":"#eee"})).attr("x",(function(e){return t.getXFromSeqPosition(e.start)})).call(this.bindEvents,this),this.background.exit().remove(),this.seq_g.style("opacity",Math.min(1,n)),this.background.style("opacity",Math.min(1,n)),this._updateHighlight()}}},{key:"_updateHighlight",value:function(){this.trackHighlighter.updateHighlight()}}])&&s(e.prototype,n),i&&s(e,i),p}(o.a);e.a=y},743:function(t,e,n){"use strict";var r,o=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(t){return"string"==typeof t&&a.test(t)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l,f,h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n},p=0,d=0;e.a=function(t,e,n){var r=e&&n||0,o=e||new Array(16),a=(t=t||{}).node||l,s=void 0!==t.clockseq?t.clockseq:f;if(null==a||null==s){var c=t.random||(t.rng||i)();null==a&&(a=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==s&&(s=f=16383&(c[6]<<8|c[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),y=void 0!==t.nsecs?t.nsecs:d+1,g=u-p+(y-d)/1e4;if(g<0&&void 0===t.clockseq&&(s=s+1&16383),(g<0||u>p)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=u,d=y,f=s;var m=(1e4*(268435455&(u+=122192928e5))+y)%4294967296;o[r++]=m>>>24&255,o[r++]=m>>>16&255,o[r++]=m>>>8&255,o[r++]=255&m;var v=u/4294967296*1e4&268435455;o[r++]=v>>>8&255,o[r++]=255&v,o[r++]=v>>>24&15|16,o[r++]=v>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var b=0;b<6;++b)o[r+b]=a[b];return e||h(o)}},745:function(t,e,n){"use strict";var r,o,i,a,s,c,u,l=n(620),f=n(743),h=n(632),p=function(t){return"\n                <h5>Variant</h5><p>".concat(t.wildType," > ").concat(t.alternativeSequence||"","</p>\n                ").concat(t.populationFrequencies?(i=t.populationFrequencies,"<hr/><h5>Population frequencies</h5>".concat(i.map((function(t){return"<p>".concat(t.frequency," - ").concat(t.populationName," (").concat(t.source,")</p>")})).join(""))):"","\n                ").concat(t.consequenceType?"<h5>Consequence</h5><p>".concat(t.consequenceType,"</p>"):"","\n                ").concat(t.somaticStatus?"<h5>Somatic</h5><p>".concat(0===t.somaticStatus?"No":"Yes","</p>"):"","\n                ").concat(t.genomicLocation?"<h5>Location</h5><p>".concat(t.genomicLocation,"</p>"):"","\n                ").concat(t.ftId?"<h5>Feature ID</h5><p>".concat(t.ftId,"</p>"):"","\n                ").concat(t.descriptions?(o=t.descriptions,"<hr/><h5>Description</h5>".concat(o.map((function(t){return"<p>".concat(t.value,"</p>")})).join(""),"\n  ")):"","\n                ").concat(t.association?(r=t.association,null==r?void 0:r.map((function(t){return"\n              <h4>Disease association</h4><p>".concat(t.name,"</p>\n              ").concat(t.description?"<>".concat(t.description,"</p>"):"","\n              ").concat(t.dbReferences?"<h5>Cross-references</h5>".concat(Object(l.b)(t.dbReferences)):"","\n              ").concat(Object(l.c)(t.evidences),"\n          ")})).join("")):"","\n                ").concat(t.predictions?(e=t.predictions,n=Object(h.a)(e,"predAlgorithmNameType"),Object.keys(n).map((function(t){var e=Object(h.a)(n[t],"predictionValType");return{algorithm:t,values:Object.keys(e).map((function(t){return{name:t,count:e[t].length}}))}})).map((function(t){return"<h6>".concat(t.algorithm,'</h6><ul class="no-bullet">').concat(t.values.map((function(t){return"<li>".concat(t.name,"</li>")})).join(""),"</ul>")})).join("")):"","\n                ").concat(function(t){if(t.locations.some((function(t){return"EnsemblViruses"===t.source}))){var e=t.xrefs.find((function(t){return"ENA"===t.name}));return e.id?'<h5>Ensembl COVID-19</h5>\n          <p>\n          <a href="https://covid-19.ensembl.org/Sars_cov_2/Variation/Explore?v='.concat(e.id,'" target="_blank" rel="noopener noreferrer">').concat(e.id,"</a>\n        </p>"):""}return""}(t),"\n                \n        ");var e,n,r,o,i};function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.A="A",t.C="C",t.D="D",t.E="E",t.Empty="*",t.F="F",t.G="G",t.H="H",t.I="I",t.K="K",t.L="L",t.M="M",t.N="N",t.Nl="NL",t.P="P",t.Q="Q",t.R="R",t.S="S",t.T="T",t.V="V",t.W="W",t.Y="Y"}(r||(r={})),function(t){t.CLINVAR="ClinVar",t.ESP="ESP",t.EXAC="ExAC",t.GENOMES1K="1000Genomes",t.BOVINE_SNP50="BovineSNP50",t.BOVINE_LD="BovineLD",t.BOVINE_HD="BovineHD",t.EQUINE_SNP50="EquineSNP50",t.CHICKEN_600K="Chicken600K",t.KG_HQ="1kg_hq",t.COSMIC="cosmic curated",t.REVIEWED="reviewed",t.UNIPROT="UniProt",t.DBSNP="dbSNP",t.ENSEMBL="Ensembl",t.ENSEMBL_PLANTS="EnsemblPlants",t.VECTORBASE="VectorBase",t.REFSEQ="RefSeq",t.DBGAP="dbGaP",t.DDD="DDD",t.PHARMCOGKB="PharmGKB",t.ENSEMBL_FUNGI="EnsemblFungi",t.ENSEMBL_METAZOA="EnsemblMetazoa",t.GNOMAD_V2="gnomAD_v2.0",t.GNOMAD_V3="gnomAD_v3.0",t.TCGA="NCI-TCGA",t.TCGA_COSMIC="NCI-TCGA Cosmic",t.DECIPHER="ddG2P",t.TOPMED="TOPMed",t.GNOMAD="gnomAD",t.PHARMGKB="pharmgkb",t.SGRP="SGRP",t.SGD="SGD",t.JEFFARES_SNPS="Jeffares_SNPs",t.JEFFARES_INDELS="Jeffares_Indels",t.ENSEMBL_VIRUSES="EnsemblViruses"}(o||(o={})),function(t){t.Benign="Benign",t.Disease="Disease",t.LikelyBenign="Likely benign",t.LikelyPathogenic="Likely pathogenic",t.Pathogenic="Pathogenic",t.Protective="Protective",t.VariantOfUncertainSignificance="Variant of uncertain significance"}(i||(i={})),function(t){t.Empty="-",t.Frameshift="frameshift",t.InframeDeletion="inframe deletion",t.Insertion="insertion",t.Missense="missense",t.StopGained="stop gained"}(a||(a={})),function(t){t.PolyPhen="PolyPhen",t.Sift="SIFT"}(s||(s={})),function(t){t.Benign="benign",t.Deleterious="deleterious",t.DeleteriousLowConfidence="deleterious - low confidence",t.PossiblyDamaging="possibly damaging",t.ProbablyDamaging="probably damaging",t.Tolerated="tolerated",t.ToleratedLowConfidence="tolerated - low confidence",t.Unknown="unknown"}(c||(c={})),function(t){t.LargeScaleStudy="large_scale_study",t.Mixed="mixed",t.UniProt="uniprot"}(u||(u={}));var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(a,t);var e,n,o,i=b(a);function a(){return y(this,a),i.apply(this,arguments)}return e=a,o=[{key:"is",get:function(){return"protvista-variation-adapter"}}],(n=[{key:"connectedCallback",value:function(){m(w(a.prototype),"connectedCallback",this).call(this),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this))}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this)}},{key:"parseEntry",value:function(t){this._adaptedData=function(t){var e=t.sequence,n=t.features.map((function(t){return Object.assign(Object.assign({},t),{accession:t.genomicLocation,variant:t.alternativeSequence?t.alternativeSequence:r.Empty,start:t.begin,xrefNames:(e=t.xrefs,n=t.sourceType,o=e?e.map((function(t){return t.name})):[],"uniprot"!==n&&"mixed"!==n||o.push("uniprot"),o),hasPredictions:t.predictions&&t.predictions.length>0,tooltipContent:p(t),protvistaFeatureId:Object(f.a)()});var e,n,o}));return n?{sequence:e,variants:n}:null}(t)}}])&&g(e.prototype,n),o&&g(e,o),a}(l.a);e.a=S},803:function(t,e,n){"use strict";var r=n(603),o=n(585),i=n(619),a=n(613),s=n(632);var c=function(t){var e=t.variants,n=t.sequence;if(!n||!e)return null;var r=n.split("").map((function(t,e){return{type:"VARIANT",normal:t,pos:e+1,variants:[]}}));return e.forEach((function(t){r[t.start-1]&&r[t.start-1].variants.push(t)})),r};function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._frequency=Object(o.scalePow)().exponent(.001).domain([0,1]).range([5,10]),this.drawVariationPlot=this.drawVariationPlot.bind(this)}var e,n,r;return e=t,(n=[{key:"drawVariationPlot",value:function(t,e){var n=e.getSingleBaseWidth()/2;t.each((function(t,r,i){var a=Object(o.select)(i[r]),s=t.filter((function(t){return 0!==t.variants.length})),c=a.selectAll("g").data(s,(function(t){return t.pos}));c.exit().remove();var u=c.enter().append("g").merge(c).selectAll("circle").data((function(t){return t.variants}));u.exit().remove(),u.enter().append("circle").merge(u).attr("class","feature").attr("title",(function(t){return t.start})).attr("r",(function(t){return t.size?t.size:5})).attr("cx",(function(t){return e.getXFromSeqPosition(t.start)+n})).attr("cy",(function(t){return e._yScale(t.variant.charAt(0))})).attr("name",(function(t){var e="*"===t.alternativeSequence?"STOP":t.alternativeSequence;return t.internalId="var_".concat(t.wildType).concat(t.start).concat(e),t.internalId})).attr("fill",(function(t){return t.color?t.color:e._colorConfig(t)})).call(e.bindEvents,e)}))}}])&&u(e.prototype,n),r&&u(e,r),t}();function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n,r){return(d="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var o,i=m(t,e);if(i){if((o=Object.getOwnPropertyDescriptor(i,e)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,e)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,e,o)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function y(t,e,n,r,o){if(!d(t,e,n,r||t)&&o)throw new Error("failed to set property");return n}function g(t,e,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=m(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function m(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t){return function(t){if(Array.isArray(t))return O(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E=["G","A","V","L","I","S","T","C","M","D","N","E","Q","R","K","H","F","Y","W","P","d","*"],x=function(t,e){if(!t||t.length<=0)return null;var n=t[0];return n.forEach((function(n,r){var o=t.map((function(t){return t[r].variants}));n.variants=e.apply(void 0,S(o))})),n},k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(f,t);var e,n,r,u=b(f);function f(){return h(this,f),u.apply(this,arguments)}return e=f,r=[{key:"css",get:function(){return"\n    <style>\n    protvista-variation {\n      display: flex;\n      width: 100%;\n    }\n    \n    protvista-variation svg {\n      background-color: #fff;\n    }\n    \n    protvista-variation circle {\n      opacity: 0.6;\n    }\n    protvista-variation circle:hover {\n      opacity: 0.9;\n    }\n    protvista-variation .tick line,\n    protvista-variation .axis path {\n      opacity: 0.1;\n    }\n    \n    .protvista-highlight {\n      fill: #ffe999;\n    }\n    \n    protvista-variation .variation-y-right line,\n    protvista-variation .axis path {\n      fill: none;\n      stroke: none;\n    }\n    \n    </style>\n    "}}],(n=[{key:"connectedCallback",value:function(){g(w(f.prototype),"connectedCallback",this).call(this);var t=document.createElement("style");t.innerHTML=f.css,this.appendChild(t),this._height=Number(this.getAttribute("height"))?Number(this.getAttribute("height")):430,this._width=this._width?this._width:0,this._yScale=Object(o.scaleLinear)(),this._yScale=Object(o.scalePoint)().domain(E).range([0,this._height-this.margin.top-this.margin.bottom])}},{key:"processData",value:function(t){this._originalData=c(t)}},{key:"_createFeatures",value:function(){this._variationPlot=new l;var t=g(w(f.prototype),"svg",this).select("g.sequence-features"),e=t.attr("transform","translate(0, ".concat(this.margin.top,")")).append("g");this._series=e.datum(this._data),this._axisLeft=t.append("g"),this._axisRight=t.append("g"),this.updateScale()}},{key:"filters",set:function(t){y(w(f.prototype),"filters",t,this,!0),this.updateData(this._data),this.refresh()}},{key:"_applyFilters",value:function(){var t=this;if(!this._filters||this._filters.length<=0)this._data=this._originalData;else{var e=Object(s.a)(this._filters,"category"),n=Object.values(e).map((function(e){var n=e.map((function(e){return e.filterFn(t._originalData)}));return x(n,i.a)}));this._data=x(n,a.a)}}},{key:"colorConfig",get:function(){return this._colorConfig},set:function(t){this._colorConfig=t}},{key:"refresh",value:function(){this._series&&(this.updateScale(),this._series.call(this._variationPlot.drawVariationPlot,this),this._updateHighlight())}},{key:"updateScale",value:function(){this._yAxisLScale=Object(o.axisLeft)().scale(this._yScale).tickSize(-this.getWidthWithMargins()),this._yAxisRScale=Object(o.axisRight)().scale(this._yScale),this._axisLeft.attr("class","variation-y-left axis").attr("transform","translate(".concat(this.margin.left,",0)")).call(this._yAxisLScale),this._axisRight.attr("transform","translate(".concat(this.getWidthWithMargins()-this.margin.right+2,", 0)")).attr("class","variation-y-right axis").call(this._yAxisRScale)}},{key:"updateData",value:function(t){this._series&&this._series.datum(t)}}])&&p(e.prototype,n),r&&p(e,r),f}(r.default);e.a=k},813:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s}));var r=[{accession:"IPR00001",locations:[{fragments:[{start:1,end:466}]}],color:"#cacaca"}],o=[{accession:"SF00001",locations:[{fragments:[{start:127,end:264},{start:279,end:385},{start:400,end:466}]}],color:"#7acaca"},{accession:"PF00001",locations:[{fragments:[{start:146,end:266}]},{fragments:[{start:346,end:466}]}],color:"#ca7aca"},{accession:"CD0001",locations:[{fragments:[{start:146,end:456}]}],color:"#caca7a"}],i=[{accession:"cd00108",locations:[{fragments:[{start:127,end:203}]}],color:"#cacaca",residues:[{accession:"KR",entry_accession:"cd00108",source_database:"CDD",locations:[{fragments:[{start:153,end:153,residues:"W"},{start:163,end:163,residues:"Y"},{start:184,end:184,residues:"W"},{start:186,end:186,residues:"F"},{start:194,end:194,residues:"Y"},{start:231,end:231,residus:"W"},{start:241,end:241,residues:"F"},{start:266,end:266,residues:"W"},{start:268,end:268,residues:"Y"},{start:276,end:276,residues:"W"},{start:325,end:325,residues:"W"},{start:335,end:335,residues:"V"},{start:360,end:360,residues:"W"},{start:362,end:362,residues:"F"},{start:370,end:370,residues:"V"},{start:411,end:411,residues:"W"},{start:421,end:421,residues:"H"},{start:447,end:447,residues:"W"},{start:449,end:449,residues:"Y"},{start:457,end:457,residues:"W"}],description:"ligand binding site"},{fragments:[{start:138,end:138,residues:"K"},{start:216,end:216,residues:"R"},{start:310,end:310,residues:"R"},{start:396,end:396,residues:"M"}],description:"putative domain interaction site"}]}]},{accession:"cd00108",locations:[{fragments:[{start:204,end:285}]}],color:"#c00aca",residues:[{accession:"KR",entry_accession:"cd00108",source_database:"CDD",locations:[{fragments:[{start:153,end:153,residues:"W"},{start:163,end:163,residues:"Y"},{start:184,end:184,residues:"W"},{start:186,end:186,residues:"F"},{start:194,end:194,residues:"Y"},{start:231,end:231,residus:"W"},{start:241,end:241,residues:"F"},{start:266,end:266,residues:"W"},{start:268,end:268,residues:"Y"},{start:276,end:276,residues:"W"},{start:325,end:325,residues:"W"},{start:335,end:335,residues:"V"},{start:360,end:360,residues:"W"},{start:362,end:362,residues:"F"},{start:370,end:370,residues:"V"},{start:411,end:411,residues:"W"},{start:421,end:421,residues:"H"},{start:447,end:447,residues:"W"},{start:449,end:449,residues:"Y"},{start:457,end:457,residues:"W"}],description:"ligand binding site"},{fragments:[{start:138,end:138,residues:"K"},{start:216,end:216,residues:"R"},{start:310,end:310,residues:"R"},{start:396,end:396,residues:"M"}],description:"putative domain interaction site"}]}]},{accession:"cd00108",source_database:"cdd",locations:[{fragments:[{start:298,end:380}]}],color:"#caca0a",entry_type:"domain",type:"entry",residues:[{accession:"KR",entry_accession:"cd00108",source_database:"CDD",locations:[{fragments:[{start:153,end:153,residues:"W"},{start:163,end:163,residues:"Y"},{start:184,end:184,residues:"W"},{start:186,end:186,residues:"F"},{start:194,end:194,residues:"Y"},{start:231,end:231,residus:"W"},{start:241,end:241,residues:"F"},{start:266,end:266,residues:"W"},{start:268,end:268,residues:"Y"},{start:276,end:276,residues:"W"},{start:325,end:325,residues:"W"},{start:335,end:335,residues:"V"},{start:360,end:360,residues:"W"},{start:362,end:362,residues:"F"},{start:370,end:370,residues:"V"},{start:411,end:411,residues:"W"},{start:421,end:421,residues:"H"},{start:447,end:447,residues:"W"},{start:449,end:449,residues:"Y"},{start:457,end:457,residues:"W"}],description:"ligand binding site"},{fragments:[{start:138,end:138,residues:"K"},{start:216,end:216,residues:"R"},{start:310,end:310,residues:"R"},{start:396,end:396,residues:"M"}],description:"putative domain interaction site"}]}]},{accession:"cd00108",source_database:"cdd",locations:[{fragments:[{start:384,end:466}]}],color:"#0acaca",entry_type:"domain",type:"entry",residues:[{accession:"KR",entry_accession:"cd00108",source_database:"CDD",locations:[{fragments:[{start:153,end:153,residues:"W"},{start:163,end:163,residues:"Y"},{start:184,end:184,residues:"W"},{start:186,end:186,residues:"F"},{start:194,end:194,residues:"Y"},{start:231,end:231,residus:"W"},{start:241,end:241,residues:"F"},{start:266,end:266,residues:"W"},{start:268,end:268,residues:"Y"},{start:276,end:276,residues:"W"},{start:325,end:325,residues:"W"},{start:335,end:335,residues:"V"},{start:360,end:360,residues:"W"},{start:362,end:362,residues:"F"},{start:370,end:370,residues:"V"},{start:411,end:411,residues:"W"},{start:421,end:421,residues:"H"},{start:447,end:447,residues:"W"},{start:449,end:449,residues:"Y"},{start:457,end:457,residues:"W"}],description:"ligand binding site"},{fragments:[{start:138,end:138,residues:"K"},{start:216,end:216,residues:"R"},{start:310,end:310,residues:"R"},{start:396,end:396,residues:"M"}],description:"putative domain interaction site"}]}]}],a="x y a b score\n191 225 0 8 0.9999824\n50 208 0 8 0.9999750\n46 207 0 8 0.9999180\n47 27 0 8 0.9999129\n43 207 0 8 0.9998918\n47 21 0 8 0.9998869\n126 195 0 8 0.9998656\n50 21 0 8 0.9998630\n19 184 0 8 0.9998622\n130 161 0 8 0.9998603\n95 33 0 8 0.9998345\n25 94 0 8 0.9997534\n15 181 0 8 0.8997336\n26 61 0 8 0.8997303",s=[[191,225,.9999824],[50,208,.999975],[46,207,.999918],[47,27,.9999129],[43,207,.9998918],[47,21,.9998869],[126,195,.9998656],[50,21,.999863],[19,184,.9998622],[130,161,.9998603],[95,33,.9998345],[25,94,.9997534],[15,181,.8997336],[26,61,.8997303]]},814:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(937);e.getDocumentBaseUrl=function(t){return"about:blank"!==t.baseURI?t.baseURI:null},e.clone=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},e.cloneArray=function(t){return Array.prototype.slice.apply(t,[0])},e.joinUrl=function(t,e){return t?o.resolve(t,e):e},e.isDataUri=function(t){return/^data:/.test(t)},e.collectAndReportErrors=function(t){var e=[];return Promise.all(t.map((function(t){return t.catch((function(t){e.push(t)}))}))).then((function(){return e}))};var i=null;e.ajax=function(t,n){return new Promise((function(r,o){var a,s=new window.XMLHttpRequest,c=e.joinUrl(n.baseUrl,t),u=function(){o({msg:"Unable to load url",url:c})};a=function(t,e){return!1===e||"none"===e||"repeated"===e?(null!==i&&"repeated"===e||(i=Date.now()),t+"?_="+i):t}(c,n.cache),s.addEventListener("load",(function(){200===s.status||0===s.status?r(s.response):u()}),!1),s.addEventListener("error",u,!1);try{s.open("GET",a,!0),s.overrideMimeType(n.mimeType),s.send(null)}catch(t){u()}}))},e.binaryAjax=function(t,n){var r=e.clone(n);return r.mimeType="text/plain; charset=x-user-defined",e.ajax(t,r).then((function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e}))};e.getDataURIForImageURL=function(t,n){return e.binaryAjax(t,n).then((function(t){var e=btoa(t);return"data:"+function(t){var e=function(t,e){return t.substring(0,e.length)===e};return e(t,"<?xml")||e(t,"<svg")?"image/svg+xml":"image/png"}(t)+";base64,"+e}))};var a=[],s=function(t){return a.indexOf(t)<0&&a.push(t),a.indexOf(t)};e.memoize=function(t,e,n){if("object"!==r(n))throw new Error("cacheBucket is not an object");return function(){var r,o=Array.prototype.slice.call(arguments),i=e(o),a=s(t);return n[a]&&n[a][i]?n[a][i]:(r=t.apply(null,o),n[a]=n[a]||{},n[a][i]=r,r)}}},859:function(t,e,n){"use strict";var r=n(603),o=n(585);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(s,t);var e,n,r,i=h(s);function s(){return c(this,s),i.apply(this,arguments)}return e=s,(n=[{key:"connectedCallback",value:function(){l(d(s.prototype),"connectedCallback",this).call(this),this._height=Number(this.getAttribute("height"))||40,this._type=this.getAttribute("type")||"line-graph-track",this._yScale=Object(o.scaleLinear)(),this._data&&this._createTrack()}},{key:"data",set:function(t){this._data=t,this._createTrack()}},{key:"_createTrack",value:function(){var t=this;Object(o.select)(this).selectAll("svg").remove(),this.svg=Object(o.select)(this).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg);var e=[],n=[],r=[];this._data.forEach((function(t){e.push.apply(e,a(t.range)),n.push(Object(o.min)(t.values,(function(t){return t.position}))),r.push(Object(o.max)(t.values,(function(t){return t.position})))})),this.minRange=Object(o.min)(e),this.maxRange=Object(o.max)(e),this.beginning=Object(o.min)(n),this.end=Object(o.max)(r),this.chartGroup=this.svg.append("g").attr("class","chart-group"),this._initYScale(),this.chart=this.chartGroup.selectAll(".chart").data(this._data).enter().append("g").attr("class","chart"),this.chart.append("path").attr("class","graph").attr("id",(function(t){return t.name})).attr("d",(function(e){return e.colour=e.colour||Object(o.interpolateRainbow)(Math.random()),e.fill=e.fill||"none",t.drawLine(e)(e.values)})).attr("fill",(function(t){return t.fill})).attr("stroke",(function(t){return t.colour})).attr("transform","translate(0,0)");var i=this.chartGroup.append("g").attr("class","mouse-over-effects"),s=this.chartGroup.selectAll("path.graph"),c=i.selectAll(".mouse-per-line").data(this._data).enter().append("g").attr("class","mouse-per-line");c.append("circle").attr("r",7).style("stroke",(function(t){return t.colour})).style("fill","none").style("stroke-width","1px").style("opacity","0"),c.append("text").attr("transform","translate(10,3)");var u=this;i.append("rect").attr("width",this.width).attr("height",this._height).attr("fill","none").attr("pointer-events","all").on("mouseout",(function(){o.selectAll(".mouse-per-line circle").style("opacity","0"),o.selectAll(".mouse-per-line text").style("opacity","0")})).on("mousemove",(function(){var e=o.mouse(t);if(e[0]<u.xScale(u.beginning)||e[0]>u.xScale(u.end)+u.getSingleBaseWidth())o.selectAll(".mouse-per-line circle").style("opacity","0"),o.selectAll(".mouse-per-line text").style("opacity","0");else{var n={},r=Math.floor(u.xScale.invert(e[0]));o.selectAll(".mouse-per-line circle").style("opacity",(function(t){var e=t.values.find((function(t){return t.position===r}));return e&&e.value?"1":"0"})),o.selectAll(".mouse-per-line text").style("opacity","1"),o.selectAll(".mouse-per-line text").text((function(t){var e=t.values.find((function(t){return t.position===r}));return n[t.name]=e,e?e.value:""})),o.selectAll(".mouse-per-line").attr("transform",(function(t,n){for(var r=0,o=s.nodes()[n].getTotalLength(),i=null,a={};i=Math.floor((r+o)/2),a=s.nodes()[n].getPointAtLength(i),i!==o&&i!==r||a.x===e[0];)if(a.x>e[0])o=i;else{if(!(a.x<e[0]))break;r=i}return"translate(".concat(e[0],",").concat(a.y,")")}));var i={eventtype:"mouseover",feature:n,highlight:"".concat(r,":").concat(r),type:t._type,target:t};t.dispatchEvent(new CustomEvent("change",{detail:i,bubbles:!0,cancelable:!0}))}}))}},{key:"refresh",value:function(){var t=this;this.chart&&(this.chart.selectAll("path.graph").attr("d",(function(e){return t.drawLine(e)(e.values)})),this._updateHighlight())}},{key:"_initYScale",value:function(){this._yScale.domain([this.minRange,this.maxRange]).range([this._height,0])}},{key:"drawLine",value:function(t){var e=this,n=t.lineCurve||"curveLinear";return("none"!==t.fill?Object(o.area)().y1((function(t){return e._yScale(t.value)})).y0((function(){return e._yScale(0)})):Object(o.line)().y((function(t){return e._yScale(t.value)}))).defined((function(t){return null!==t.value})).x((function(t){return e.getXFromSeqPosition(t.position+1)-e.getSingleBaseWidth()/2})).curve(o[n])}}])&&u(e.prototype,n),r&&u(e,r),s}(r.default);e.a=y},860:function(t){t.exports=JSON.parse('[{"name":"chart1","colour":"#0000ee","fill":"#5555ee","range":[0,50],"values":[{"position":41,"value":20},{"position":42,"value":40},{"position":43,"value":10},{"position":44,"value":0},{"position":45,"value":49},{"position":46,"value":34},{"position":47,"value":17},{"position":48,"value":20},{"position":49,"value":40},{"position":50,"value":10},{"position":51,"value":0},{"position":52,"value":49},{"position":53,"value":34},{"position":54,"value":17},{"position":55,"value":20},{"position":56,"value":40},{"position":57,"value":10},{"position":58,"value":0},{"position":59,"value":49},{"position":60,"value":null},{"position":61,"value":null},{"position":62,"value":34},{"position":63,"value":34},{"position":64,"value":34}]},{"name":"chart2","range":[0,100],"lineCurve":"curveStep","values":[{"position":41,"value":0},{"position":42,"value":10},{"position":43,"value":10},{"position":44,"value":20},{"position":45,"value":60},{"position":46,"value":100},{"position":47,"value":40},{"position":48,"value":0},{"position":49,"value":50},{"position":50,"value":10},{"position":51,"value":20},{"position":52,"value":60},{"position":53,"value":70},{"position":54,"value":40},{"position":55,"value":30},{"position":56,"value":50},{"position":57,"value":10},{"position":58,"value":20},{"position":59,"value":60}]}]')},861:function(t,e,n){"use strict";var r=n(585),o=n(734),i=n(593),a=n(862),s=n(863),c=n(864),u=n(865);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=["hydrophobicity-interface-scale","hydrophobicity-octanol-scale","hydrophobicity-scale","isoelectric-point-scale"],v={domain:[-2,2],range:["#ffdd00","#0000FF"]},b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(g,t);var e,n,l,y=d(g);function g(){return f(this,g),y.apply(this,arguments)}return e=g,l=[{key:"observedAttributes",get:function(){return o.a.observedAttributes.concat("scale","color_range")}}],(n=[{key:"_createSequence",value:function(){this.svg=Object(r.select)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",this._height),this.uniqueID=Math.random().toString(36).substring(7),this.gradient=this.svg.append("defs").append("linearGradient").attr("id","scale-gradient-".concat(this.uniqueID)),this.seq_g=this.svg.append("g").attr("class","background"),this.seq_greadient=this.svg.append("rect").attr("class","seq-gradient").style("pointer-events","none"),this._getCharSize(),this.trackHighlighter.appendHighlightTo(this.svg),this.refresh()}},{key:"getScaleFromAttribute",value:function(){var t=null;if(m.indexOf(this._scale)>=0)switch(this._scale){case"hydrophobicity-scale":return c;case"hydrophobicity-interface-scale":return a;case"isoelectric-point-scale":return u;case"hydrophobicity-octanol-scale":return s;default:return null}if(/([ILFVMPWHTEQCYASNDRGK]:-?\d+\.?\d*)(,[ILFVMPWHTEQCYASNDRGK]:-?\d+\.?\d*)*/.test(this._scale))try{t=Object(i.d)(this._scale,{keyFormatter:function(t){return t.toUpperCase()},valueFormatter:function(t){return parseFloat(t)}})}catch(t){console.error("Couldn't parse the given scale ".concat(this._scale),t)}return t}},{key:"refresh",value:function(){var t=this;if(this.seq_g){var e=this.getScaleFromAttribute();if(null===e)return void console.error("The attribute scale is not valid.");var n=Object(r.scaleLinear)();this.colorScale=v,this._color_range&&(this.colorScale=Object(i.a)(this._color_range)),n.domain(this.colorScale.domain).range(this.colorScale.range);var o=this.getSingleBaseWidth(),a=Math.round(Math.max(0,this._displaystart-2)),s=Math.round(Math.min(this.sequence.length,this._displayend+1)),c=this.sequence.slice(a,s).split("").map((function(t,r){var o=t.toUpperCase()in e?e[t.toUpperCase()]:0;return{start:1+a+r,end:1+a+r,aa:t,value:o,colour:n(o)}}));this.residues=this.seq_g.selectAll("rect.base_bg").data(o<8?[]:c,(function(t){return t.start})),this.residues.enter().append("rect").attr("class","base_bg feature").attr("data-base",(function(t){return t.aa})).attr("data-pos",(function(t){return t.start})).attr("height",this._height).merge(this.residues).attr("width",o).attr("fill",(function(t){return t.colour})).attr("x",(function(e){var n=e.start;return t.getXFromSeqPosition(n)})).call(this.bindEvents,this),this.residues.exit().remove();var u=this.gradient.selectAll("stop").data(this.sequence.split(""));u.enter().append("stop").merge(u).attr("offset",(function(e,n){return(n+.5)/t.sequence.length})).attr("stop-color",(function(t){return n(t.toUpperCase()in e?e[t.toUpperCase()]:0)})),this.gradient.exit().remove(),this.seq_greadient.attr("x",this.getXFromSeqPosition(1)).attr("y",0).attr("height",this._height).attr("width",this.getXFromSeqPosition(this.sequence.length)-this.getXFromSeqPosition(0)).style("opacity",o<8?1:8/o).attr("fill","url(#scale-gradient-".concat(this.uniqueID,")")),this._updateHighlight()}}}])&&h(e.prototype,n),l&&h(e,l),g}(o.a);e.a=b},862:function(t){t.exports=JSON.parse('{"I":-0.31,"L":-0.56,"F":-1.13,"V":0.07,"M":-0.23,"P":0.45,"W":-1.85,"H":0.17,"T":0.14,"E":-0.01,"Q":0.58,"C":-0.24,"Y":-0.94,"A":0.17,"S":0.13,"N":0.42,"D":-0.07,"R":0.81,"G":0.01,"K":0.99}')},863:function(t){t.exports=JSON.parse('{"I":-1.12,"L":-1.25,"F":-1.71,"V":-0.46,"M":-0.67,"P":0.14,"W":-2.09,"H":0.11,"T":0.25,"E":0.11,"Q":0.77,"C":-0.02,"Y":-0.71,"A":0.5,"S":0.46,"N":0.85,"D":0.43,"R":1.15,"G":3.63,"K":3.64}')},864:function(t){t.exports=JSON.parse('{"I":-0.81,"L":-0.69,"F":-0.58,"V":-0.53,"M":-0.44,"P":-0.31,"W":-0.24,"H":-0.06,"T":0.11,"E":1.61,"Q":0.19,"C":0.22,"Y":0.23,"A":0.33,"S":0.33,"N":0.43,"D":2.41,"R":1,"G":1.14,"K":1.81}')},865:function(t){t.exports=JSON.parse('{"I":6.04,"L":6.04,"F":5.91,"V":6.02,"M":5.74,"P":6.3,"W":5.88,"H":7.64,"T":5.6,"E":3.08,"Q":5.65,"C":5.02,"Y":5.63,"A":6.11,"S":5.68,"N":5.41,"D":2.87,"R":10.76,"G":6.06,"K":9.47}')},868:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(585),a=n(603),s=n(869),c=i.scaleLinear([0,1],["orange","blue"]),u=function(t,e,n){return new CustomEvent("change",{detail:{type:t,target:e,highlight:n?n.map((function(t){return t+":"+t})).join(","):null},bubbles:!0,cancelable:!0})},l=function(t){function e(){var e=t.call(this)||this;return e._minDistance=0,e._minProbability=.7,e._rawData=null,e._linksData=null,e}return o(e,t),Object.defineProperty(e,"observedAttributes",{get:function(){return a.default.observedAttributes.concat("mindistance","minprobability")},enumerable:!1,configurable:!0}),e.prototype.attributeChangedCallback=function(e,n,r){"mindistance"===e&&n!==r?this.minDistance=+r:"minprobability"===e&&n!==r?this.minProbability=+r:t.prototype.attributeChangedCallback.call(this,e,n,r)},Object.defineProperty(e.prototype,"data",{set:function(t){if("string"==typeof t)this._rawData=s.parseToRowData(t);else{if(!Array.isArray(t))throw new Error("data is not in a valid format");this._rawData=t}this._data=s.getContactsObject(s.filterContacts(this._rawData,this._minDistance,this._minProbability)),this._createTrack()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minDistance",{get:function(){return this._minDistance},set:function(t){this._minDistance=+t,this._rawData&&(this._data=s.getContactsObject(s.filterContacts(this._rawData,this._minDistance,this._minProbability)),this._createTrack())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minProbability",{get:function(){return this._minProbability},set:function(t){this._minProbability=+t,this._rawData&&(this._data=s.getContactsObject(s.filterContacts(this._rawData,this._minDistance,this._minProbability)),this._createTrack())},enumerable:!1,configurable:!0}),e.prototype._getColor=function(t){return this._data.contacts[t]?c(this._data.contacts[t].size/this._data.maxNumberOfContacts):""},e.prototype._dispatchSelectNode=function(t){this._data.selected=t,this.dispatchEvent(u("mouseover",this,Array.from(this._data.contacts[t]).concat(+t).sort()))},e.prototype._createFeatures=function(){var t=this;this.removeEventListener("click",this._resetEventHandler),this.seq_g.selectAll("g.contact-group").remove();var e=this.seq_g.append("g").attr("class","contact-group");this._linksGroup=this.seq_g.append("g").attr("class","links-group"),this.contactPoints=e.selectAll(".contact-point").data(Object.keys(this._data.contacts)).enter().append("circle").attr("class","contact-point").attr("fill",(function(e){return t._getColor(e)})).attr("id",(function(t){return"cp_"+t})).style("stroke-width",2).on("mouseover",(function(e){t._data.isHold||(t._dispatchSelectNode(e),t.refresh())})).on("mouseout",(function(){t._data.isHold||(t._data.selected=void 0,t.dispatchEvent(u("mouseout",t)),t.refresh())})).on("click",(function(e){t._data.isHold=!t._data.isHold,t._data.isHold||t._dispatchSelectNode(e),t.refresh()})),this._linksData=s.contactObjectToLinkList(this._data.contacts)},e.prototype.getRadius=function(t){return(t?.6:.4)*Math.max(2,Math.min(this.height,this.getSingleBaseWidth()))},e.prototype.arc=function(t){var e=this.getXFromSeqPosition(t[0])+this.getSingleBaseWidth()/2,n=this.getXFromSeqPosition(t[1])+this.getSingleBaseWidth()/2,r=.5*this.height,o=this.getSingleBaseWidth();return"M "+e+" "+r+" C "+(e-o)+" "+-r/4+" "+(n+o)+" "+-r/4+" "+n+" "+r},e.prototype.refresh=function(){var t=this;this.contactPoints.attr("cx",(function(e){return t.getXFromSeqPosition(e)+t.getSingleBaseWidth()/2})).transition().attr("cy",.5*this.height).attr("r",(function(e){return t.getRadius(e===t._data.selected)})).attr("stroke",(function(e){return e===t._data.selected&&t._data.isHold?"rgb(127 255 127)":void 0})).style("opacity",(function(e){return e===t._data.selected?1:.4}));var e=this._data.selected?this._linksData.filter((function(e){return e.includes(+t._data.selected)})):[],n=this._linksGroup.selectAll(".contact-link").data(e,(function(t){return t[0]+"_"+t[1]}));n.exit().remove(),n.enter().append("path").attr("class","contact-link").attr("fill","transparent").attr("stroke",this._getColor(this._data.selected)).style("opacity",1).style("pointer-events","none").attr("d",(function(e){return t.arc(e)})).attr("id",(function(t){return"cn_"+t[0]+"_"+t[1]})),n.attr("d",(function(e){return t.arc(e)}))},e}(a.default);e.default=l},869:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contactObjectToLinkList=e.getContactsObject=e.parseLinks=e.parseLinksAssociative=e.filterContacts=e.parseToRowData=void 0,e.parseToRowData=function(t){return t.split("\n").slice(1).map((function(t){if(""===t.trim())return null;var e=t.trim().split(" ");if(5===e.length){var n=e[0],r=e[1];e[2],e[3];return[+n,+r,+e[4]]}if(3===e.length)return[+(n=e[0]),+(r=e[1]),+e[2]];throw new Error("The file is not valid")})).filter(Boolean)},e.filterContacts=function(t,e,n){return t.filter((function(t){var r=t[0],o=t[1],i=t[2];return Math.abs(r-o)>=e&&i>n}))},e.parseLinksAssociative=function(t,n,r){var o=e.filterContacts(e.parseToRowData(t),n,r),i={},a=[];return o.forEach((function(t){var e=t[0],n=t[1];i[e]||i[n]?i[e]&&!i[n]?(i[n]=i[e],a[i[e]].push(n)):!i[e]&&i[n]?(i[e]=i[n],a[i[e]].push(e)):i[e]&&i[n]&&i[e]!==i[n]&&a[i[n]].forEach((function(t){a[i[e]].push(t),i[t]=i[e]})):(i[e]=a.length,i[n]=a.length,a.push([e,n]))})),{contacts:a.filter((function(t,e){return Object.values(i).includes(e)})).map((function(t){return t.sort((function(t,e){return t-e}))}))}},e.parseLinks=function(t,n,r){var o=e.parseToRowData(t);return e.getContactsObject(e.filterContacts(o,n,r))},e.getContactsObject=function(t){var e={};return t.forEach((function(t){var n=t[0],r=t[1];e[n]||(e[n]=new Set),e[r]||(e[r]=new Set),e[n].add(r),e[r].add(n)})),{contacts:e,maxNumberOfContacts:Math.max.apply(Math,Object.values(e).map((function(t){return t.size})))}},e.contactObjectToLinkList=function(t){var e=[],n=new Set;return Object.entries(t).forEach((function(t){var r=t[0];t[1].forEach((function(t){var o=r+"-"+t,i=[+r,+t];+r>+t&&(o=t+"-"+r,i=[+t,+r]),n.has(o)||(n.add(o),e.push(i))}))})),e},e.default=e.parseLinks},870:function(t,e,n){"use strict";var r=n(603),o=n(585);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(s,t);var e,n,r,i=f(s);function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this))._line=Object(o.line)().x((function(e,n){return t.getXFromSeqPosition(n+1)-t.getSingleBaseWidth()/2})).y((function(e){return t._yScale(e)})),t}return e=s,(n=[{key:"init",value:function(){this._totalsArray={total:null,diseaseTotal:null}}},{key:"connectedCallback",value:function(){u(p(s.prototype),"connectedCallback",this).call(this),this._data=void 0,this._height=Number(this.getAttribute("height"))||40,this._yScale=Object(o.scaleLinear)(),this.init()}},{key:"data",set:function(t){if(this.init(),t.sequence&&!(t.variants.length<=0)){this._totalsArray.total=new Uint8ClampedArray(t.sequence.length),this._totalsArray.diseaseTotal=new Uint8ClampedArray(t.sequence.length);var e,n=a(t.variants);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=r.start,i=r.association,s=+o;s<1||s>t.sequence.length||(this._totalsArray.total[s]++,i&&i.find((function(t){return!0===t.disease}))&&this._totalsArray.diseaseTotal[s]++)}}catch(t){n.e(t)}finally{n.f()}this._createTrack()}}},{key:"_createTrack",value:function(){Object(o.select)(this).selectAll("svg").remove(),this.svg=Object(o.select)(this).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this._initYScale(),this.refresh()}},{key:"_initYScale",value:function(){this._yScale.domain([0,Math.max(Object(o.max)(this._totalsArray.total),Object(o.max)(this._totalsArray.diseaseTotal))]).range([this._height,0])}},{key:"refresh",value:function(){this.svg&&(this.svg.selectAll("path").remove(),this.svg.append("path").attr("d",this._line(this._totalsArray.diseaseTotal)).attr("fill","none").attr("stroke","red").attr("transform","translate(0,0)"),this.svg.append("path").attr("d",this._line(this._totalsArray.total)).attr("fill","none").attr("stroke","darkgrey").attr("transform","translate(0,0)"),this._updateHighlight())}}])&&c(e.prototype,n),r&&c(e,r),s}(r.default);e.a=d},871:function(t){t.exports=JSON.parse('[{"accession":"chain_A","locations":[{"fragments":[{"start":45,"end":100,"shape":"helix","fill":"transparent","color":"#f06"},{"start":110,"end":200,"shape":"helix","fill":"transparent","color":"#f06"},{"start":5,"end":15,"shape":"strand","color":"#fc0"},{"start":40,"end":43,"shape":"strand","color":"#fc0"}]}]},{"accession":"chain_D","locations":[{"fragments":[{"start":45,"end":51,"shape":"helix","fill":"transparent","color":"#f06"},{"start":55,"end":77,"shape":"helix","fill":"transparent","color":"#f06"},{"start":5,"end":15,"shape":"strand","color":"#fc0"},{"start":19,"end":26,"shape":"strand","color":"#fc0"}]}]}]')},872:function(t,e,n){"use strict";e.unquoteString=function(t){var e=/^"(.*)"$/,n=/^'(.*)'$/;return e.test(t)?t.replace(e,"$1"):n.test(t)?t.replace(n,"$1"):t},e.rulesForCssText=function(t){var e,n=document.implementation.createHTMLDocument(""),r=document.createElement("style");return r.textContent=t,n.body.appendChild(r),e=r.sheet.cssRules,Array.prototype.slice.call(e)},e.cssRulesToText=function(t){return t.reduce((function(t,e){return t+e.cssText}),"")},e.exchangeRule=function(t,n,r){var o=t.indexOf(n);t[o]=e.rulesForCssText(r)[0]},e.changeFontFaceRuleSrc=function(t,n,r){var o="@font-face { font-family: "+n.style.getPropertyValue("font-family")+"; ";n.style.getPropertyValue("font-style")&&(o+="font-style: "+n.style.getPropertyValue("font-style")+"; "),n.style.getPropertyValue("font-weight")&&(o+="font-weight: "+n.style.getPropertyValue("font-weight")+"; "),n.style.getPropertyValue("unicode-range")&&(o+="unicode-range: "+n.style.getPropertyValue("unicode-range")+"; "),o+="src: "+r+"}",e.exchangeRule(t,n,o)}},918:function(t,e,n){"use strict";var r=n(603);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(u,t);var e,n,r,o=c(u);function u(){return i(this,u),o.apply(this,arguments)}return e=u,r=[{key:"_filterOutResidueFragmentsOutOfLocation",value:function(t,e){t.locations.forEach((function(t){return t.fragments=t.fragments.filter((function(t){return e.some((function(e){return e.fragments.some((function(e){return t.start>=e.start&&t.end<=e.end}))}))}))})),t.locations=t.locations.filter((function(t){return t.fragments.length}))}},{key:"_getAccFromFeature",value:function(t){var e="";return"string"==typeof t?e=t:t.accession&&(e=t.accession),e}}],(n=[{key:"init",value:function(t,e){var n=0;if(this.height={},this.yPos={},this.maxYPos=0,t){this.innerPadding=3;for(var r={},o=0;o<t.length;o++){var i=t[o];this.height[i.accession]=this.expanded?14:16,this.yPos[i.accession]=this._padding,n=this.height[i.accession]+2*this._padding,this.maxYPos=Math.max(this.maxYPos,n),i.accession in r||(r[i.accession]={}),i.residues&&(n=this._initResidues(i.residues,i.accession,i.locations,this.expanded?n:this.yPos[i.accession],o,r,this.expanded))}if(e)for(var a=0;a<e.length;a++){var s=e[a];s.accession in this.height||(this.height[s.accession]=10,this.yPos[s.accession]=(this.expanded?this.maxYPos:this.innerPadding)+this._padding,n+=2*this._padding+(this.expanded?this.height[s.accession]:0),this.maxYPos=Math.max(this.maxYPos,n)),s.accession in r||(r[s.accession]={}),s.residues&&(n=this._initResidues(s.residues,s.accession,s.locations,s.expanded?n:this.yPos[s.accession],a,r,s.expanded))}this.maxYPos+=this._padding}}},{key:"_initResidues",value:function(t,e,n,r,o){for(var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=0;s<t.length;s++){var c=t[s];u._filterOutResidueFragmentsOutOfLocation(c,n),c.accession in i[e]||(i[e][c.accession]={});for(var l=0;l<c.locations.length;l++){var f=c.locations[l].description;f in i[e][c.accession]||(i[e][c.accession][f]={height:a?10:this.height[e]-2*this.innerPadding,yPos:a?this.maxYPos+this._padding:r+this.innerPadding},r=a?this.maxYPos+2*this._padding+10:r),this.height["".concat(c.accession,"_").concat(o,"_").concat(s,"_").concat(l)]=i[e][c.accession][f].height,this.yPos["".concat(c.accession,"_").concat(o,"_").concat(s,"_").concat(l)]=i[e][c.accession][f].yPos,this.maxYPos=Math.max(this.maxYPos,r)}}return a?r:this.maxYPos+2*this._padding}},{key:"getFeatureYPos",value:function(t){var e=u._getAccFromFeature(t);return e in this.yPos?this.yPos[e]:0}},{key:"getFeatureHeight",value:function(t){var e=u._getAccFromFeature(t);return e in this.height?this.height[e]:0}}])&&a(e.prototype,n),r&&a(e,r),u}(r.DefaultLayout);function h(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t,e){var n,r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({value:1},t),o=[],i=h(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r?r.end<a.start?(o.push(r),r=null,o.push(a)):r.start<a.start&&r.end>=a.end?(o.push({start:r.start,end:a.start-1,value:r.value}),o.push({start:a.start,end:a.end,value:a.value+r.value}),r=a.end===r.end?null:{start:a.end+1,end:r.end,value:r.value}):a.start<r.start&&a.end>r.end?(o.push({start:a.start,end:r.start-1,value:a.value}),o.push({start:r.start,end:r.end,value:a.value+r.value}),o.push({start:r.end+1,end:a.end,value:a.value}),r=null):a.end>=r.start&&a.end<=r.end?(a.start<r.start&&o.push({start:a.start,end:r.start-1,value:a.value}),o.push({start:r.start,end:a.end,value:a.value+r.value}),r=a.end<r.end?{start:a.end+1,end:r.end,value:r.value}:null):r.end>=a.start&&r.end<a.end?(o.push({start:r.start,end:a.start-1,value:r.value}),o.push({start:a.start,end:r.end,value:a.value+r.value}),o.push({start:r.end+1,end:a.end,value:a.value}),r=null):o.push(a):o.push(a)}}catch(t){i.e(t)}finally{i.f()}return r&&o.push(r),o};function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=P(t);if(e){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=2,R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(a,t);var e,n,o,i=A(a);function a(){return O(this,a),i.apply(this,arguments)}return e=a,o=[{key:"observedAttributes",get:function(){return r.default.observedAttributes.concat(["expanded","color"])}},{key:"_createResidueGroup",value:function(t){return t.selectAll("g.residues-group").data((function(t){return t.residues?t.residues.map((function(e,n){return b(b({},e),{},{feature:t,i:n})})):[]})).enter().append("g").attr("class","residues-group").selectAll("g.residues-locations").data((function(t){return t.locations.map((function(e,n){return b(b({},e),{},{accession:t.accession,feature:t.feature,location:e,i:t.i,j:n})}))})).enter().append("g").attr("class","residues-locations")}}],(n=[{key:"_createTrack",value:function(){this._layoutObj.expanded=this._expanded,x(P(a.prototype),"_createTrack",this).call(this),this.children_g=null}},{key:"connectedCallback",value:function(){x(P(a.prototype),"connectedCallback",this).call(this),this._expanded=this.hasAttribute("expanded"),this._haveCreatedFeatures=!1}},{key:"attributeChangedCallback",value:function(t,e,n){if("expanded"===t&&e!==n&&this._contributors){var r,o=w(this._contributors);try{for(o.s();!(r=o.n()).done;)r.value.expanded=!e}catch(t){o.e(t)}finally{o.f()}}x(P(a.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"contributors",set:function(t){this._contributors=a.normalizeLocations(t),this._coverage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];return n&&(r=g({start:1,end:e,value:0},r)),t.forEach((function(t){return t.locations.forEach((function(t){return t.fragments.forEach((function(t){r=g(t,r)}))}))})),r}(this._contributors,this._length),this._data&&this._createTrack()}},{key:"getLayout",value:function(){return new f({layoutHeight:this._height,expanded:this._expanded,padding:2})}},{key:"color",set:function(t){this._color!==t&&(this._color=t,this.refresh())}},{key:"_createResiduePaths",value:function(t){var e=this;return t.selectAll("g.residue").data((function(t){return t.fragments.map((function(e){return b(b({},e),{},{accession:t.accession,feature:b(b({},t.feature),{},{currentResidue:b(b({},e),{},{description:t.location.description})}),location:t.location,k:t.feature.k,i:t.i,j:t.j})}))})).enter().append("path").attr("class","feature rectangle residue").attr("d",(function(t){return e._featureShape.getFeatureShape(e.getSingleBaseWidth(),e._layoutObj.getFeatureHeight("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),t.end?t.end-t.start+1:1,"rectangle")})).attr("transform",(function(t){return"translate(".concat(e.getXFromSeqPosition(t.start),",").concat(C+e._layoutObj.getFeatureYPos("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),")")})).attr("fill",(function(t){return e._getFeatureColor(t)})).attr("stroke","transparent").call(this.bindEvents,this)}},{key:"_refreshResiduePaths",value:function(t,e){var n=this,r=new Set(t.data().map((function(t){return"".concat(t.feature.accession,"-").concat(t.location.description)}))).size;t.attr("d",(function(t){return n._featureShape.getFeatureShape(n.getSingleBaseWidth(),n._layoutObj.getFeatureHeight("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),t.end?t.end-t.start+1:1,"rectangle")})).attr("transform",(function(t){return"translate(".concat(n.getXFromSeqPosition(t.start),",").concat(C+n._layoutObj.getFeatureYPos("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),")")})).style("pointer-events",(function(t){return e||t.feature&&t.feature.expanded?"auto":"none"})).style("stroke",(function(){return e?null:"none"})).style("opacity",(function(){return e?null:.8/r})).attr("fill",(function(t){return e||t.feature&&t.feature.expanded?n._getFeatureColor(t):"white"}))}},{key:"_createFeatures",value:function(){var t=this;if(this._layoutObj.init(this._data,this._contributors),this._data.forEach((function(t,e){return t.k=e})),this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data).enter().append("g").attr("class","feature-group").attr("id",(function(t){return"g_".concat(t.accession)})),this.locations=this.featuresG.selectAll("g.location-group").data((function(t){return t.locations.map((function(e){return b(b({},e),{},{feature:t})}))})).enter().append("g").attr("class","location-group"),this.coverLines=this.locations.selectAll("line.cover").data((function(t){return[t.fragments.reduce((function(e,n){return{start:Math.min(e.start,n.start),end:Math.max(e.end,n.end),feature:t.feature}}),{start:1/0,end:-1/0})]})).enter().append("line").attr("class","cover"),this.features=this.locations.selectAll("path.feature").data((function(t){return t.fragments.map((function(e){return b(b({},e),{},{feature:t.feature,fragments:t.fragments})}))})).enter().append("path").attr("class",(function(e){return"".concat(t._getShape(e)," feature")})).on("click.expanded",(function(){t._expanded?t.removeAttribute("expanded"):t.setAttribute("expanded","expanded")})).call(this.bindEvents,this),this.residues_g=a._createResidueGroup(this.featuresG),this.residues_loc=this._createResiduePaths(this.residues_g),this._contributors){this._contributors.forEach((function(t,e){return t.k=e})),this.children_g||(this.children_g=this.svg.append("g").attr("class","children-features")),this.childrenGroup=this.children_g.append("g").attr("class","children-group"),this.childGroup=this.childrenGroup.selectAll("g.child-group").data(this._contributors).enter().append("g").attr("class","child-group");var e=this.childGroup.selectAll("g.child-location-group").data((function(e){return e.expanded=t._expanded,e.locations.map((function(t){return b(b({},t),{},{feature:e})}))})).enter().append("g").attr("class",(function(t,e){return"child-location-group clg-".concat(e)}));this.coverLinesChildren=e.selectAll("line.cover").data((function(t){return[t.fragments.reduce((function(e,n){return{start:Math.min(e.start,n.start),end:Math.max(e.end,n.end),feature:t.feature}}),{start:1/0,end:-1/0})]})).enter().append("line").attr("class","cover"),this.featureChildren=e.selectAll("path.child-fragment").data((function(t){return t.fragments.map((function(e){return b(b({},e),{},{feature:t.feature,fragments:t.fragments})}))})).enter().append("path").attr("class",(function(e){return"".concat(t._getShape(e)," child-fragment feature")})).call(this.bindEvents,this).on("click.expanded",(function(e){e.feature.expanded=!e.feature.expanded,t.refresh()})),this.child_residues_g=a._createResidueGroup(this.childGroup),this.child_residues_loc=this._createResiduePaths(this.child_residues_g),this._coverage&&this._coverage.length&&this._createCoverage()}this.svg.attr("height",this._layoutObj.maxYPos),this._haveCreatedFeatures=!0}},{key:"_createCoverage",value:function(){this._accession=this._data&&this._data[0]&&this._data[0].accession||"_",this.coverage_mask=this.svg.append("defs").append("mask").attr("id","mask-".concat(this._accession)),this.coverageMaskFragment=this.coverage_mask.selectAll("rect").data(this._coverage).enter().append("rect").attr("y",0).attr("height",this._height)}},{key:"_refreshCoverage",value:function(){var t=this;this.featuresG.attr("mask",this._expanded?null:"url(#mask-".concat(this._accession,")")),this.coverageMaskFragment.attr("x",(function(e){return t.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.getSingleBaseWidth()*(e.end-e.start+1)})).attr("fill","white").attr("opacity",(function(e){return(e.value/t._contributors.length+.3)/1.3}))}},{key:"_refreshFeatures",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new Set(t.data().map((function(t){return t.feature.accession}))).size;t.attr("d",(function(t){return e._featureShape.getFeatureShape(e.getSingleBaseWidth(),e._layoutObj.getFeatureHeight(t.feature),t.end?t.end-t.start+1:1,n?e._getShape(t.shape?t:t.feature):"rectangle")})).attr("fill",(function(t){return n?e._getFeatureColor(t.feature):"white"})).attr("opacity",n?1:.8/r).style("stroke",(function(t){return n?e._getFeatureColor(t.feature):"none"})).attr("transform",(function(t){return"translate(".concat(e.getXFromSeqPosition(t.start),",").concat(C+e._layoutObj.getFeatureYPos(t.feature),")")})).style("pointer-events",n?"auto":"none")}},{key:"_refreshCoverLine",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.attr("x1",(function(t){return e.getXFromSeqPosition(t.start)})).attr("x2",(function(t){return e.getXFromSeqPosition(t.end+1)})).attr("y1",(function(t){return C+e._layoutObj.getFeatureYPos(t.feature)+e._layoutObj.getFeatureHeight(t.feature)/2})).attr("y2",(function(t){return C+e._layoutObj.getFeatureYPos(t.feature)+e._layoutObj.getFeatureHeight(t.feature)/2})).attr("stroke",(function(t){return e._getFeatureColor(t.feature)})).attr("visibility",n?"visible":"hidden")}},{key:"refresh",value:function(){var t=this;this._haveCreatedFeatures&&(this._layoutObj.expanded=this._expanded,this._layoutObj.init(this._data,this._contributors),this.height=this._layoutObj.maxYPos,this._refreshCoverLine(this.coverLines),this._refreshFeatures(this.features),this._refreshResiduePaths(this.residues_loc,this._expanded),this._contributors&&(this.childrenGroup.attr("visibility",this._expanded?"visible":"hidden"),this._refreshCoverLine(this.coverLinesChildren,this._expanded),this._refreshFeatures(this.featureChildren,this._expanded),this.child_residues_g.attr("visibility",(function(){return t._expanded?"visible":"hidden"})),this._refreshResiduePaths(this.child_residues_loc),this._coverage&&this._coverage.length&&this._refreshCoverage()),this._updateHighlight(),this.svg.attr("height",this._layoutObj.maxYPos))}}])&&E(e.prototype,n),o&&E(e,o),a}(r.default);e.a=R},937:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(1035),i=n(1036);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=_(t));return t instanceof a?t.format():a.prototype.format.call(t)},e.Url=a;var s=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),f=["'"].concat(l),h=["%","/","?",";","#"].concat(f),p=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(1037);function _(t,e,n){if(t&&i.isObject(t)&&t instanceof a)return t;var r=new a;return r.parse(t,e,n),r}a.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+r(t));var a=t.indexOf("?"),c=-1!==a&&a<t.indexOf("#")?"?":"#",l=t.split(c);l[0]=l[0].replace(/\\/g,"/");var _=t=l.join(c);if(_=_.trim(),!n&&1===t.split("#").length){var w=u.exec(_);if(w)return this.path=_,this.href=_,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var S=s.exec(_);if(S){var O=(S=S[0]).toLowerCase();this.protocol=O,_=_.substr(S.length)}if(n||S||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===_.substr(0,2);!E||S&&m[S]||(_=_.substr(2),this.slashes=!0)}if(!m[S]&&(E||S&&!v[S])){for(var x,k,A=-1,j=0;j<p.length;j++){-1!==(P=_.indexOf(p[j]))&&(-1===A||P<A)&&(A=P)}-1!==(k=-1===A?_.lastIndexOf("@"):_.lastIndexOf("@",A))&&(x=_.slice(0,k),_=_.slice(k+1),this.auth=decodeURIComponent(x)),A=-1;for(j=0;j<h.length;j++){var P;-1!==(P=_.indexOf(h[j]))&&(-1===A||P<A)&&(A=P)}-1===A&&(A=_.length),this.host=_.slice(0,A),_=_.slice(A),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var R=this.hostname.split(/\./),T=(j=0,R.length);j<T;j++){var L=R[j];if(L&&!L.match(d)){for(var D="",F=0,M=L.length;F<M;F++)L.charCodeAt(F)>127?D+="x":D+=L[F];if(!D.match(d)){var N=R.slice(0,j),I=R.slice(j+1),H=L.match(y);H&&(N.push(H[1]),I.unshift(H[2])),I.length&&(_="/"+I.join(".")+_),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=o.toASCII(this.hostname));var V=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+V,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[O])for(j=0,T=f.length;j<T;j++){var W=f[j];if(-1!==_.indexOf(W)){var B=encodeURIComponent(W);B===W&&(B=escape(W)),_=_.split(W).join(B)}}var U=_.indexOf("#");-1!==U&&(this.hash=_.substr(U),_=_.slice(0,U));var G=_.indexOf("?");if(-1!==G?(this.search=_.substr(G),this.query=_.substr(G+1),e&&(this.query=b.parse(this.query)),_=_.slice(0,G)):e&&(this.search="",this.query={}),_&&(this.pathname=_),v[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){V=this.pathname||"";var z=this.search||"";this.path=V+z}return this.href=this.format(),this},a.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},a.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},a.prototype.resolveObject=function(t){if(i.isString(t)){var e=new a;e.parse(t,!1,!0),t=e}for(var n=new a,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=t[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var f=Object.keys(t),h=0;h<f.length;h++){var p=f[h];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",g=n.search||"";n.path=y+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=_||b||n.host&&t.pathname,S=w,O=n.pathname&&n.pathname.split("/")||[],E=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===O[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,O=d;else if(d.length)O||(O=[]),O.pop(),O=O.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(E)n.hostname=n.host=O.shift(),(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=O.slice(-1)[0],k=(n.host||t.host||O.length>1)&&("."===x||".."===x)||""===x,A=0,j=O.length;j>=0;j--)"."===(x=O[j])?O.splice(j,1):".."===x?(O.splice(j,1),A++):A&&(O.splice(j,1),A--);if(!w&&!S)for(;A--;A)O.unshift("..");!w||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),k&&"/"!==O.join("/").substr(-1)&&O.push("");var P,C=""===O[0]||O[0]&&"/"===O[0].charAt(0);E&&(n.hostname=n.host=C?"":O.length?O.shift():"",(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift()));return(w=w||n.host&&O.length)&&!C&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},938:function(t,e){(function(e){t.exports=e}).call(this,{})}}]);