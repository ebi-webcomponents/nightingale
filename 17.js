(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{170:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=(n(757),n(758)),a=n.n(o);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=c(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,s,"next",t)}function s(t){f(o,r,i,a,s,"throw",t)}a(void 0)}))}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){var e="function"==typeof Map?new Map:void 0;return(m=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return g(t,arguments,_(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),w(r,t)})(t)}function g(t,e,n){return(g=v()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&w(i,n.prototype),i}).apply(null,arguments)}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(f,t);var e,n,r,i,o,s,c,h=(e=f,n=v(),function(){var t,r=_(e);if(n){var i=_(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return b(this,t)});function f(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(t=h.call(this))._mappings=[],t.loadMolecule=t.loadMolecule.bind(y(t)),t._planHighlight=t._planHighlight.bind(y(t)),t.propagateHighlight=t.propagateHighlight.bind(y(t)),t}return r=f,i=[{key:"connectedCallback",value:function(){this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._pdbId=this.getAttribute("pdb-id"),this._accession=this.getAttribute("accession"),this._height=this.getAttribute("height")||"480px",this._highlight=this.getAttribute("highlight")&&f._formatHighlight(this.getAttribute("highlight"));var t=document.createElement("style");t.innerHTML=this.css,this.appendChild(t);var e=document.createElement("div");e.className="litemol-container",e.id="litemol-instance",this.messageContainer=document.createElement("span"),this.appendChild(this.messageContainer),this.appendChild(e),this.loadLiteMol()}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this)}},{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){var r=parseFloat(n);switch(this["_".concat(t)]="number"==typeof r?n:r,t){case"pdb-id":this._pdbId=n,this.selectMolecule(this._pdbId);break;case"accession":this._accession=n;break;case"highlight":this._highlight=f._formatHighlight(this.getAttribute("highlight"));break;case"height":this._height=n}this._planHighlight(!0)}}},{key:"_planHighlight",value:function(){var t=this;this._plannedRender||(this._plannedRender=!0,requestAnimationFrame((function(){t._plannedRender=!1,t._selectedMolecule&&t.highlightChain()})))}},{key:"loadPDBEntry",value:(c=p(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://www.ebi.ac.uk/pdbe/api/mappings/uniprot/".concat(e));case 3:return n=t.sent,t.next=6,n.json();case 6:return t.abrupt("return",t.sent);case 9:throw t.prev=9,t.t0=t.catch(0),this.addMessage("Couldn't load PDB entry"),new Error(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(t){return c.apply(this,arguments)})},{key:"selectMolecule",value:(s=p(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadPDBEntry(e);case 2:return n=t.sent,r=this.processMapping(n),t.next=6,this.loadMolecule(e);case 6:this._selectedMolecule={id:e,mappings:r},this._planHighlight();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"loadLiteMol",value:function(){var t=this,e=a.a.Plugin;this.Command=a.a.Bootstrap.Command,this.Query=a.a.Core.Structure.Query,this.Bootstrap=a.a.Bootstrap,this.Core=a.a.Core,this.Tree=this.Bootstrap.Tree,this.CoreVis=a.a.Visualization,this.Transformer=this.Bootstrap.Entity.Transformer,this.Visualization=this.Bootstrap.Visualization,this.Event=this.Bootstrap.Event,this.Context=e.Components.Context,this._liteMol=e.create({target:this.querySelector("#litemol-instance"),viewportBackground:"#fff",layoutState:{hideControls:!0},allowAnalytics:!1}),this.Event.Molecule.ModelSelect.getStream(this._liteMol.context).subscribe((function(e){return t.propagateHighlight(e)}))}},{key:"loadMolecule",value:function(t){this._liteMol.clear();var e=this._liteMol.createTransform();return e.add(this._liteMol.root,this.Transformer.Data.Download,{url:"https://www.ebi.ac.uk/pdbe/coordinates/".concat(t.toLowerCase(),"/full?encoding=BCIF"),type:"Binary",_id:t}).then(this.Transformer.Data.ParseBinaryCif,{id:t},{isBinding:!0,ref:"cifDict"}).then(this.Transformer.Molecule.CreateFromMmCif,{blockIndex:0},{isBinding:!0}).then(this.Transformer.Molecule.CreateModel,{modelIndex:0},{isBinding:!1,ref:"model"}).then(this.Transformer.Molecule.CreateMacromoleculeVisual,{polymer:!0,polymerRef:"polymer-visual",het:!0,water:!0}),this._liteMol.applyTransform(e)}},{key:"getTheme",value:function(){var t=new Map;return t.set("Uniform",this.CoreVis.Color.fromRgb(207,178,178)),t.set("Selection",this.CoreVis.Color.fromRgb(255,0,0)),t.set("Highlight",this.CoreVis.Theme.Default.HighlightColor),this.Visualization.Molecule.uniformThemeProvider(void 0,{colors:t})}},{key:"addMessage",value:function(t){this.removeMessage(),this._liteMol.command(this.Bootstrap.Command.Toast.Show,{key:"UPMessage",message:t,timeoutMs:3e4})}},{key:"removeMessage",value:function(){this._liteMol.command(this.Bootstrap.Command.Toast.Hide,{key:"UPMessage"})}},{key:"processMapping",value:function(t){return Object.values(t)[0].UniProt[this._accession]?Object.values(t)[0].UniProt[this._accession].mappings:null}},{key:"translatePositions",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"UP_PDB";if("string"==typeof this.highlight||Number.isNaN(t)||Number.isNaN(e))return null;var r,i=u(this._selectedMolecule.mappings);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.unp_end-o.unp_start==o.end.residue_number-o.start.residue_number){if("UP_PDB"===n&&t>=o.unp_start&&e<=o.unp_end||"PDB_UP"===n&&t>=o.start.residue_number&&e<=o.end.residue_number){var a=o.unp_start-o.start.residue_number;return{entity:o.entity_id,chain:o.chain_id,start:"UP_PDB"===n?t-a:t+a,end:"UP_PDB"===n?e-a:e+a}}}else this.addMessage("Mismatch between protein sequence and structure residues")}}catch(t){i.e(t)}finally{i.f()}return null}},{key:"propagateHighlight",value:function(t){var e=this;if(t.data&&t.data.residues){var n=t.data.residues.map((function(t){return e.translatePositions(t.seqNumber,t.seqNumber,"PDB_UP")})).map((function(t){return"".concat(t.start,":").concat(t.end)})),r=new CustomEvent("change",{detail:{highlight:n.join(",")},bubbles:!0,cancelable:!0});this.dispatchEvent(r)}}},{key:"highlightChain",value:function(){var t=this;if(this._highlight){this.Command.Visual.ResetTheme.dispatch(this._liteMol.context,void 0),this.Command.Tree.RemoveNode.dispatch(this._liteMol.context,"sequence-selection");var e=this._liteMol.context.select("polymer-visual")[0];if(e){var n=this._highlight.map((function(e){var n=e.start,r=e.end;return t.translatePositions(n,r)})).filter((function(t){return t}));if(n&&0!==n.length){var r=n.map((function(e){return t.Query.sequence(e.entity.toString(),e.chain,{seqNumber:e.start},{seqNumber:e.end})})),i=this.getTheme(),o=this._liteMol.createTransform();r.forEach((function(n){return o.add(e,t.Transformer.Molecule.CreateSelectionFromQuery,{query:n},{ref:"sequence-selection"})})),this._liteMol.applyTransform(o).then((function(){t.Command.Visual.UpdateBasicTheme.dispatch(t._liteMol.context,{visual:e,theme:i})})),this.removeMessage()}}}}},{key:"css",get:function(){return"\n    :root {\n      --blue: 0, 112, 155;\n    }\n  \n    protvista-structure h4 {\n      display: inline;\n      margin-right: 1em;\n    }\n      \n    .litemol-container {\n      position: relative;\n      height: ".concat(this._height,";\n    }\n\n    .lm-viewport-controls {\n      display: ").concat(this.hideViewportControls?"none":"block",";\n    }\n    ")}},{key:"accession",get:function(){return this._accession},set:function(t){return this.setAttribute("accession",t),this._accession}},{key:"pdbId",get:function(){return this._pdbID},set:function(t){this.setAttribute("pdbid",t),this._pdbID=t}},{key:"height",get:function(){return this.getAttribute("height")}},{key:"hideViewportControls",get:function(){return this.getAttribute("hide-viewport-controls")}}],o=[{key:"_formatHighlight",value:function(t){return t.split(",").map((function(t){var e=l(t.split(":"),2),n=e[0],r=e[1];return{start:Number(n),end:Number(r)}}))}},{key:"observedAttributes",get:function(){return["highlight","pdb-id","height"]}}],i&&d(r.prototype,i),o&&d(r,o),f}(m(HTMLElement)),A=n(691),M=n(587),k=n(28),P=n(110),O=(n(762),n(49)),R=n(770),S=n.n(R),T=n(771);function E(){var t=D(["\n                "," · ","\n              "]);return E=function(){return t},t}function j(){var t=D(["\n                <a href=",">","</a>\n              "]);return j=function(){return t},t}function B(){var t=D(["\n        ","\n      "]);return B=function(){return t},t}function D(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object(P.a)("protvista-structure",C),Object(P.a)("protvista-datatable",A.a),Object(P.a)("protvista-manager",M.a);var I=[{name:"PDBe",url:function(t){return"https://www.ebi.ac.uk/pdbe-srv/view/entry/".concat(t)}},{name:"RCSB PDB",url:function(t){return"https://www.rcsb.org/structure/".concat(t)}},{name:"PDBj",url:function(t){return"https://pdbj.org/mine/summary/".concat(t)}},{name:"PDBsum",url:function(t){return"https://www.ebi.ac.uk/pdbsum/".concat(t)}}],V=function(t){var e=function(t){return t.map((function(t){var e=t.id,n=t.properties;if(!n)return null;var r,i,o,a=n.Chains,s=n.Resolution,l=n.Method;if(a){var u=a.split("=");if(2===u.length){var c=N(u,2);r=c[0];var h=(i=c[1]).split("-");if(h&&2===h.length)o=N(h,1)[0]}}return{id:e,method:l,resolution:s&&"-"!==s?s:null,chain:r,positions:i,protvistaFeatureId:e,start:Number(o)}}))}(t.xrefs),n=Object(r.useCallback)((function(t){t&&(t.data=e,t.columns={type:{label:"PDB Entry",resolver:function(t){return t.id}},method:{label:"Method",resolver:function(t){return t.method}},resolution:{label:"Resolution",resolver:function(t){var e=t.resolution;return e&&e.replace("A","Å")}},chain:{label:"Chain",resolver:function(t){return t.chain}},positions:{label:"Positions",resolver:function(t){return t.positions}},links:{label:"Links",resolver:function(t){var e=t.id;return Object(k.a)(B(),I.map((function(t){var n=t.name,r=t.url;return Object(k.a)(j(),r(e),n)})).reduce((function(t,e){return Object(k.a)(E(),t,e)})))}}},t.rowClickEvent=function(t){return{"pdb-id":t.id}})}),[e]);return i.a.createElement("protvista-datatable",{ref:n,selectedId:"1AAP",noScrollToRow:!0,noDeselect:!0})};e.default=function(){return i.a.createElement(r.Fragment,null,i.a.createElement(O.default,{content:S.a}),i.a.createElement("h2",null,"Examples"),i.a.createElement("h3",null,"Structure with highlighted positions"),i.a.createElement("protvista-structure",{"pdb-id":"1AAP",accession:"P05067",highlight:"290:300,310:340"}),i.a.createElement("h3",null,"Structure with protvista-datatable"),i.a.createElement("protvista-manager",{attributes:"pdb-id"},i.a.createElement("protvista-structure",{"pdb-id":"1AAP",accession:"P05067"}),i.a.createElement(V,{xrefs:T})))}},567:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"b",(function(){return E})),n.d(e,"e",(function(){return j})),n.d(e,"a",(function(){return B})),n.d(e,"d",(function(){return D})),n.d(e,"c",(function(){return N})),n.d(e,"f",(function(){return x}));var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,r=void 0===n?-1/0:n,i=e.max,a=void 0===i?1/0:i;o(this,t),this.segments=[],this.max=a,this.min=r,this.regionString=null}var e,n,i;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var r=n.start,i=n.end;if(e)return"".concat(r,":").concat(i);var o=r===t.min?"":r,a=i===t.max?"":i;return"".concat(o,":").concat(a)})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var n=r(t.split(":"),3),i=n[0],o=n[1];if(void 0!==n[2])throw new Error("there should be at most 1 ':' per region. Region: ".concat(t));var a=i?Number(i):e.min,s=o?Number(o):e.max;if(a>s){var l=[s,a];a=l[0],s=l[1]}if(a<e.min&&(a=e.min),s>e.max&&(s=e.max),Number.isNaN(a))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));if(Number.isNaN(s))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));return{start:a,end:s}})):this.segments=[]}}])&&a(e.prototype,n),i&&a(e,i),t}();function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},c=function(){function t(e){var n=e.element,r=e.min,i=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.region=new s({min:r,max:i}),this.fixedHighlight=null}var e,n,r;return e=t,(n=[{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(u(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(u(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(u(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(e).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}},{key:"max",set:function(t){this.region.max=t}}])&&l(e.prototype,n),r&&l(e,r),t}();function h(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var f=function(t){return t};function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var e,n,r;return e=t,(n=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var n=this.element.getBoundingClientRect(),r=n.height,i=n.width,o=n.x,a=n.y;return t>o&&e<o+i&&e>a&&e<a+r}},{key:"wheel",value:function(t){var e=t.x,n=t.y,r=t.timeStamp;this.isWheelEventInsideElement(e,n)?r<this.timeStampWheelOutside+400?this.blockScroll(r):this.setElementScrollable(!0):this.blockScroll(r)}}])&&p(e.prototype,n),r&&p(e,r),t}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=g(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function m(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function M(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R(t);if(e){var i=R(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=["left","right","top","bottom"],T=S.map((function(t){return"margin".concat(t)})),E=s,j=c,B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var r=t.split(",").map((function(t){return t.split(":")}));if(r.length<2)throw new Error("There should be at least 2 points to create a scale");e=r.map((function(t){var e=t[0].trim().toUpperCase();if(!h(e))throw new Error("The color '".concat(e," is not valid'"));return e})),n=r.map((function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n}))}return{range:e,domain:n}},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,r=void 0===n?f:n,i=e.valueFormatter,o=void 0===i?f:i;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map((function(t){return t.split(":")})),s={};return a.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));s[r(t[0])]=o(t[1])})),s}return{}},N=d,x=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialValue:{top:0,bottom:0,left:0,right:0}},r=function(t){M(r,t);var e=P(r);function r(){var t;return w(this,r),(t=e.call(this)).margin=n.initialValue,t}return C(r,[{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&T.includes(t)&&(this[t]=n),A(R(r.prototype),"attributeChangedCallback",this).call(this,t,e,n)}}],[{key:"observedAttributes",get:function(){return[].concat(m(A(R(r),"observedAttributes",this)),m(T))}}]),r}(t),i=y(S);try{var o=function(){var t=e.value;Object.defineProperty(r.prototype,"margin".concat(t),{get:function(){return this.margin[t]||0},set:function(e){this.margin[t]=+e}})};for(i.s();!(e=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}return r}},587:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,t)})(t)}function u(t,e,n){return(u=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(p,t);var e,n,r,o,l,u=(e=p,n=c(),function(){var t,r=f(e);if(n){var i=f(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function p(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=u.call(this)).protvistaElements=new Set,t.attributeValues=new Map,t.propertyValues=new Map,t.mouseOver=!1,t}return r=p,l=[{key:"observedAttributes",get:function(){return["attributes","length","displaystart","displayend","highlight"]}}],(o=[{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){if("attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute");this.attributeValues=new Map(this._attributes.filter((function(t){return!p.observedAttributes.includes(t)})).map((function(t){return[t,null]})))}else"length"===t&&(this.length=n),"displaystart"===t&&(this.displaystart=n),"displayend"===t&&(this.displayend=n),"highlight"===t&&(this.highlight=n);this.applyAttributes()}}},{key:"register",value:function(t){this.protvistaElements.add(t),this.applyAttributes()}},{key:"unregister",value:function(t){this.protvistaElements.delete(t)}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"applyAttributes",value:function(){var t=this;this.protvistaElements.forEach((function(e){t.attributeValues.forEach((function(t,n){!1===t||null==t?e.removeAttribute(n):e.setAttribute(n,"boolean"==typeof t?"":t)}))}))}},{key:"applyProperties",value:function(t){var e=this;if(t){var n=this.querySelector("#".concat(t));this.propertyValues.forEach((function(t,e){n[e]=t}))}else this.protvistaElements.forEach((function(t){e.propertyValues.forEach((function(e,n){t[n]=e}))}))}},{key:"isRegisteredAttribute",value:function(t){return i(this.attributeValues.keys()).includes(t)||p.observedAttributes.includes(t)}},{key:"_changeListener",value:function(t){var e=this;switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:this.isRegisteredAttribute(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach((function(n){e.isRegisteredAttribute(n)&&e.attributeValues.set(n,t.detail[n])})),this.applyAttributes()}}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}},{key:"length",set:function(t){this.attributeValues.set("length",t)},get:function(){return this.attributeValues.get("length")}},{key:"displaystart",set:function(t){this.attributeValues.set("displaystart",t)},get:function(){return this.attributeValues.get("displaystart")}},{key:"displayend",set:function(t){this.attributeValues.set("displayend",t)},get:function(){return this.attributeValues.get("displayend")}},{key:"highlight",set:function(t){this.attributeValues.set("highlight",t)},get:function(){return this.attributeValues.get("highlight")}}])&&a(r.prototype,o),l&&a(r,l),p}(l(HTMLElement));e.a=p},691:function(t,e,n){"use strict";var r=n(637),i=n(592),o=n(567);function a(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n  :host {\n    display: block;\n  }\n  .protvista-datatable-container {\n    overflow-y: auto;\n    // Note: overflow-x was set to \'hidden\' but changing\n    // to \'auto\' doesn\'t seem to be an issue.\n    overflow-x: auto;\n  }\n\n  :host([scrollable="true"]) .protvista-datatable-container {\n    overflow-y: auto;\n    will-change: scroll;\n  }\n\n  :host([scrollable="false"]) .protvista-datatable-container {\n    overflow-y: hidden;\n  }\n\n  table {\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    border-spacing: 0;\n  }\n\n  th {\n    position: sticky;\n    position: -webkit-sticky;\n    position: -moz-sticky;\n    position: -ms-sticky;\n    position: -o-sticky;\n    text-align: left;\n    background-color: var(--protvista-datable__header-background, #fff);\n    color: var(--protvista-datable__header-text, #393b42);\n    text-overflow: ellipsis;\n    top: 0;\n  }\n\n  td,\n  th {\n    padding: 1rem;\n    border-bottom: 1px solid #c2c4c4;\n  }\n\n  tr:hover:not(.active):not(.child-row) {\n    background-color: var(--protvista-datatable__hover, #f1f1f1);\n  }\n\n  td {\n    cursor: pointer;\n  }\n\n  .withChildren:before {\n    display: inline-block;\n    font-family: "Courier New", Courier, monospace;\n    width: 1rem;\n    text-align: center;\n    border-radius: 1rem;\n    line-height: 1rem;\n    font-weight: 700;\n    font-size: 1rem;\n    color: white;\n    border: 2px solid white;\n    background-color: var(--protvista-datatable__childToggle, #00639a);\n  }\n\n  .plus:before {\n    content: "+";\n  }\n\n  .minus:before {\n    content: "-";\n  }\n\n  td:nth-child(1) {\n    border-left: 0.5rem solid transparent;\n  }\n\n  .overlapped td:nth-child(1) {\n    border-left: 0.5rem solid\n      var(--protvista-datatable__overlapped, rgba(255, 0, 0, 0.8));\n  }\n\n  .active {\n    background-color: var(\n      --protvista-datatable__active,\n      rgba(255, 235, 59, 0.3)\n    ) !important;\n  }\n  .hidden {\n    opacity: 0.2;\n  }\n  .evidence-tag {\n    cursor: pointer;\n    font-size: 80%;\n    white-space: nowrap;\n    margin-left: 0.5rem;\n    border-radius: 0.5rem;\n    background-color: #f1f1f1;\n    padding: 0.25rem 0.5rem;\n    color: #3a343a;\n  }\n  .evidence-tag__label {\n    padding-left: 0.25rem;\n    text-transform: capitalize;\n  }\n  .svg-colour-reviewed {\n    fill: #c39b00;\n  }\n  .svg-colour-unreviewed {\n    fill: #c0c0c0;\n  }\n\n  .protvista-datatable__child-item {\n    display: flex;\n  }\n\n  .protvista-datatable__child-item__title {\n    font-weight: 700;\n    flex-basis: 10vw;\n    flex-grow: 0;\n    margin-right: 1rem;\n  }\n\n  .protvista-datatable__child-item__content {\n  }\n\n  .odd {\n    background-color: var(--protvista-datatable__odd, #e4e8eb);\n  }\n\n  .even {\n    background-color: var(--protvista-datatable__even, #fff);\n  }\n']);return a=function(){return t},t}var s=Object(r.b)(a());function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(){var t=_(["\n                          <td>\n                            ","\n                          </td>\n                        "]);return f=function(){return t},t}function p(){var t=_(['\n                          <td\n                            title="View more"\n                            @click="','"\n                            class="','"\n                          >\n                            ',"\n                          </td>\n                        "]);return p=function(){return t},t}function d(){var t=_(['\n                <tr\n                  data-id="','"\n                  class="'," ",'"\n                  @click="','"\n                >\n                  ',"\n                </tr>\n                ","\n              "]);return d=function(){return t},t}function b(){var t=_([" <th>","</th> "]);return b=function(){return t},t}function y(){var t=_(['\n      <div\n        class="protvista-datatable-container"\n        style="height:','rem"\n      >\n        <table>\n          <thead>\n            <tr>\n              ',"\n            </tr>\n          </thead>\n          <tbody>\n            ","\n          </tbody>\n        </table>\n      </div>\n    "]);return y=function(){return t},t}function m(){var t=_([""]);return m=function(){return t},t}function g(){var t=_([""]);return g=function(){return t},t}function v(){var t=_(['\n                  <div class="protvista-datatable__child-item">\n                    <div class="protvista-datatable__child-item__title">\n                      ','\n                    </div>\n                    <div class="protvista-datatable__child-item__content">\n                      ',"\n                    </div>\n                  </div>\n                "]);return v=function(){return t},t}function w(){var t=_(['\n      <tr class="child-row">\n        <td\n          colspan="','"\n        >\n          ',"\n        </td>\n      </tr>\n    "]);return w=function(){return t},t}function _(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function C(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T(t);if(e){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function R(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?S(t):e}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(u,t);var e,n,a,l=O(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this)).height=25,t.visibleChildren=[],t.noScrollToRow=!1,t.noDeselect=!1,t.eventHandler=t.eventHandler.bind(S(t)),t.scrollFilter=new o.c(S(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}return e=u,a=[{key:"processData",value:function(t){return t.map((function(t){return c(c({},t),{},{start:t.start?t.start:t.begin})})).sort((function(t,e){return t.start-e.start})).map((function(t){return c(c({},t),{},{protvistaFeatureId:t.protvistaFeatureId||Object(i.a)()})}))}},{key:"isWithinRange",value:function(t,e,n,r){return!n&&e===Number(r)||!r&&t===Number(n)||t<=n&&e>=r}},{key:"isOutside",value:function(t,e,n,r){return t>r||e<n}},{key:"properties",get:function(){return{data:{type:Object},highlight:{converter:function(t){return t&&"null"!==t?t.split(":").map((function(t){return Number(t)})):null}},height:{type:Number},columns:{type:Object},displayStart:{type:Number},displayEnd:{type:Number},visibleChildren:{type:Array},selectedid:{type:String},rowClickEvent:{type:Function},noScrollToRow:{type:Boolean},noDeselect:{type:Boolean}}}},{key:"styles",get:function(){return s}}],(n=[{key:"connectedCallback",value:function(){var t=this;k(T(u.prototype),"connectedCallback",this).call(this),this.addEventListener("load",(function(e){Array.from(t.children).includes(e.target)&&(t.data=u.processData(e.detail.payload.features))})),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this.noDeselect||document.addEventListener("click",this.eventHandler),this.classList.add("feature"),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){k(T(u.prototype),"disconnectedCallback",this).call(this),this.manager&&this.manager.unregister(this),document.removeEventListener("click",this.eventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"eventHandler",value:function(t){t.target.closest("protvista-datatable")||t.target.closest(".feature")||(this.selectedid=null)}},{key:"handleClick",value:function(t,e){if(t.target.parentNode){var n=e.start,r=e.end,i="function"==typeof this.rowClickEvent&&this.rowClickEvent(e)||{};this.selectedid=t.target.parentNode.dataset.id,n&&r&&(i.highlight="".concat(n,":").concat(r)),this.dispatchEvent(new CustomEvent("change",{detail:i,bubbles:!0,cancelable:!0}))}}},{key:"getStyleClass",value:function(t,e,n){var r="";return this.selectedid&&this.selectedid===t&&(r="".concat(r," active")),this.displayStart&&this.displayEnd&&u.isOutside(this.displayStart,this.displayEnd,e,n)&&(r="".concat(r," hidden")),this.highlight&&u.isWithinRange(this.highlight[0],this.highlight[1],e,n)&&(r="".concat(r," overlapped")),r}},{key:"hasChildData",value:function(t,e){var n=this;return t.some((function(t){return n.columns[t].resolver(e)}))}},{key:"toggleVisibleChild",value:function(t){this.visibleChildren.includes(t)?this.visibleChildren=this.visibleChildren.filter((function(e){return e!==t})):this.visibleChildren=[].concat(C(this.visibleChildren),[t])}},{key:"scrollIntoView",value:function(){this.selectedid&&this.shadowRoot.querySelector('[data-id="'.concat(this.selectedid,'"]')).scrollIntoView({behavior:"smooth",block:"center"})}},{key:"getChildRow",value:function(t,e){var n=this;return Object(r.c)(w(),Object.values(this.columns).filter((function(t){return!t.child})).length+1,t.map((function(t){return n.columns[t].resolver(e)?Object(r.c)(v(),n.columns[t].label,n.columns[t].resolver(e)):Object(r.c)(g())})))}},{key:"render",value:function(){var t=this;if(!this.data||!this.columns)return Object(r.c)(m());var e=Object.keys(this.columns).filter((function(e){return t.columns[e].child})),n=Object.values(this.columns).filter((function(t){return!t.child&&!1!==t.display}));return Object(r.c)(y(),this.height,n.map((function(t){return Object(r.c)(b(),t.label)})),this.data.map((function(i,o){var a=t.hasChildData(e,i);return Object(r.c)(d(),i.protvistaFeatureId,t.getStyleClass(i.protvistaFeatureId,i.start,i.end),o%2==1?"even":"odd",(function(e){return t.handleClick(e,i)}),n.map((function(e,n){return a&&0===n?Object(r.c)(p(),(function(){return t.toggleVisibleChild(i.protvistaFeatureId)}),t.visibleChildren.includes(i.protvistaFeatureId)?"withChildren minus":"withChildren plus",e.resolver(i)):Object(r.c)(f(),e.resolver(i))})),a&&t.visibleChildren.includes(i.protvistaFeatureId)?t.getChildRow(e,i):"")})))}},{key:"updated",value:function(){this.noScrollToRow||this.scrollIntoView()}},{key:"data",set:function(t){var e=this._data;this._data=u.processData(t),this.requestUpdate("data",e)},get:function(){return this._data}}])&&M(e.prototype,n),a&&M(e,a),u}(r.a);e.a=E},770:function(t,e){t.exports='<h1 id="protvista-structure">protvista-structure</h1>\n<p><a href="https://www.npmjs.com/package/protvista-structure"><img src="https://img.shields.io/npm/v/protvista-structure.svg" alt="Published on NPM"></a></p>\n<p>A native web component wrapper around LiteMol</p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;!-- With UniProt Accession --&gt;\n&lt;protvista-structure accession=&quot;P06493&quot; pdb-id=&quot;4YC3&quot; /&gt;\n&lt;!-- With a specific PDBe entry selected and the entrie table being hidden --&gt;\n&lt;protvista-structure\n  accession=&quot;P06493&quot;\n  highlight=&quot;209:220&quot;\n  pdb-id=&quot;4YC3&quot;\n  hide-table\n/&gt;</code></pre>\n<h2 id="api-reference">API Reference</h2>\n<h3 id="properties">Properties</h3>\n<h4 id="accession"><code>accession</code></h4>\n<p>A UniProt protein accession.</p>\n<h4 id="highlight"><code>highlight</code></h4>\n<p>This is a comma separated list of numerical ranges represented as a string e.g. &quot;1-5,10-20&quot;. When available, it will highlight all the residues corresponding to the given sequence positions.</p>\n<h4 id="hide-table"><code>hide-table</code></h4>\n<p>It will prevent the PDBe entries table to render next to the 3D structure.</p>\n<h4 id="pdb-id"><code>pdb-id</code></h4>\n<p>The id of the structure to display for the provided accession.</p>\n<h4 id="height"><code>height</code></h4>\n<p>The optional height of both table -- if visible, and the 3D structure. By default the value is set to <code>480px</code>. This should be a string value, representing a valid CSS value for an element&#39;s height property.</p>\n<h4 id="hide-viewport-controls"><code>hide-viewport-controls</code></h4>\n<p>Optionally you can hide the viewport controls -- located on the top-right corner of the 3D visualisation, by passing this attribute. This can be particularly useful when the size of 3D visualisation doesn&#39;t allow for extra controls to be included.</p>\n'},771:function(t){t.exports=JSON.parse('[{"databaseType":"PDB","id":"1AAP","properties":{"Method":"X-ray","Resolution":"1.50 A","Chains":"A/B=287-344"}},{"databaseType":"PDB","id":"1AMB","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1AMC","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1AML","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"1BA4","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"1BA6","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"1BJB","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1BJC","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1BRC","properties":{"Method":"X-ray","Resolution":"2.50 A","Chains":"I=287-342"}},{"databaseType":"PDB","id":"1CA0","properties":{"Method":"X-ray","Resolution":"2.10 A","Chains":"D/I=289-342"}},{"databaseType":"PDB","id":"1HZ3","properties":{"Method":"NMR","Resolution":"-","Chains":"A=681-706"}},{"databaseType":"PDB","id":"1IYT","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1MWP","properties":{"Method":"X-ray","Resolution":"1.80 A","Chains":"A=28-123"}},{"databaseType":"PDB","id":"1OWT","properties":{"Method":"NMR","Resolution":"-","Chains":"A=124-189"}},{"databaseType":"PDB","id":"1QCM","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1QWP","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1QXC","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1QYT","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1TAW","properties":{"Method":"X-ray","Resolution":"1.80 A","Chains":"B=287-344"}},{"databaseType":"PDB","id":"1TKN","properties":{"Method":"NMR","Resolution":"-","Chains":"A=460-569"}},{"databaseType":"PDB","id":"1UO7","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1UO8","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1UOA","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1UOI","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1X11","properties":{"Method":"X-ray","Resolution":"2.50 A","Chains":"C/D=754-766"}},{"databaseType":"PDB","id":"1Z0Q","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1ZE7","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-687"}},{"databaseType":"PDB","id":"1ZE9","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-687"}},{"databaseType":"PDB","id":"1ZJD","properties":{"Method":"X-ray","Resolution":"2.60 A","Chains":"B=289-344"}},{"databaseType":"PDB","id":"2BEG","properties":{"Method":"NMR","Resolution":"-","Chains":"A/B/C/D/E=672-713"}},{"databaseType":"PDB","id":"2BOM","properties":{"Method":"Model","Resolution":"-","Chains":"A/B=681-713"}},{"databaseType":"PDB","id":"2BP4","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-687"}},{"databaseType":"PDB","id":"2FJZ","properties":{"Method":"X-ray","Resolution":"1.61 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2FK1","properties":{"Method":"X-ray","Resolution":"1.60 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2FK2","properties":{"Method":"X-ray","Resolution":"1.65 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2FK3","properties":{"Method":"X-ray","Resolution":"2.40 A","Chains":"A/B/C/D/E/F/G/H=133-189"}},{"databaseType":"PDB","id":"2FKL","properties":{"Method":"X-ray","Resolution":"2.50 A","Chains":"A/B=124-189"}},{"databaseType":"PDB","id":"2FMA","properties":{"Method":"X-ray","Resolution":"0.85 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2G47","properties":{"Method":"X-ray","Resolution":"2.10 A","Chains":"C/D=672-711"}},{"databaseType":"PDB","id":"2IPU","properties":{"Method":"X-ray","Resolution":"1.65 A","Chains":"P/Q=672-679"}},{"databaseType":"PDB","id":"2LFM","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"2LLM","properties":{"Method":"NMR","Resolution":"-","Chains":"A=686-726"}},{"databaseType":"PDB","id":"2LMN","properties":{"Method":"NMR","Resolution":"-","Chains":"A/B/C/D/E/F/G/H/I/J/K/L=672-711"}},{"databaseType":"PDB","id":"2LMO","properties":{"Method":"NMR","Resolution":"-","Chains":"A/B/C/D/E/F/G/H/I/J/K/L=672-711"}}]')}}]);