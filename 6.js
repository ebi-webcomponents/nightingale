(window.webpackJsonp=window.webpackJsonp||[]).push([[6,23],{154:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r);e.default=function(t){var e=t.children;return o.a.createElement("div",{className:"console"},o.a.createElement("pre",null,e),o.a.createElement("div",{className:"anchor"}))}},166:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(735),a=n(608),c=n(618),u=n(565),s=n(582),l=n(611),f=n(642),p=n(620),h=Object.prototype.hasOwnProperty;var y=function(t){if(null==t)return!0;if(Object(s.a)(t)&&(Object(u.a)(t)||"string"==typeof t||"function"==typeof t.splice||Object(l.a)(t)||Object(p.a)(t)||Object(c.a)(t)))return!t.length;var e=Object(a.a)(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Object(f.a)(t))return!Object(i.a)(t).length;for(var n in t)if(h.call(t,n))return!1;return!0},b=n(588),d=n(56),v=n.n(d),m=o.a.createContext(null);var g=function(t){t()},O={notify:function(){}};function w(){var t=g,e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t((function(){for(var t=e;t;)t.callback(),t=t.next}))},get:function(){for(var t=[],n=e;n;)t.push(n),n=n.next;return t},subscribe:function(t){var r=!0,o=n={callback:t,next:null,prev:n};return o.prev?o.prev.next=o:e=o,function(){r&&null!==e&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var j=function(){function t(t,e){this.store=t,this.parentSub=e,this.unsubscribe=null,this.listeners=O,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var e=t.prototype;return e.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},e.notifyNestedSubs=function(){this.listeners.notify()},e.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},e.isSubscribed=function(){return Boolean(this.unsubscribe)},e.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=w())},e.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=O)},t}();var S=function(t){var e=t.store,n=t.context,i=t.children,a=Object(r.useMemo)((function(){var t=new j(e);return t.onStateChange=t.notifyNestedSubs,{store:e,subscription:t}}),[e]),c=Object(r.useMemo)((function(){return e.getState()}),[e]);Object(r.useEffect)((function(){var t=a.subscription;return t.trySubscribe(),c!==e.getState()&&t.notifyNestedSubs(),function(){t.tryUnsubscribe(),t.onStateChange=null}}),[a,c]);var u=n||m;return o.a.createElement(u.Provider,{value:a},i)};function P(){return(P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function E(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}var _=n(149),k=n.n(_),x=n(115),T="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,C=[],R=[null,null];function q(t,e){var n=t[1];return[e.payload,n+1]}function A(t,e,n){T((function(){return t.apply(void 0,e)}),n)}function D(t,e,n,r,o,i,a){t.current=r,e.current=o,n.current=!1,i.current&&(i.current=null,a())}function M(t,e,n,r,o,i,a,c,u,s){if(t){var l=!1,f=null,p=function(){if(!l){var t,n,p=e.getState();try{t=r(p,o.current)}catch(t){n=t,f=t}n||(f=null),t===i.current?a.current||u():(i.current=t,c.current=t,a.current=!0,s({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var F=function(){return[null,0]};function L(t,e){void 0===e&&(e={});var n=e,i=n.getDisplayName,a=void 0===i?function(t){return"ConnectAdvanced("+t+")"}:i,c=n.methodName,u=void 0===c?"connectAdvanced":c,s=n.renderCountProp,l=void 0===s?void 0:s,f=n.shouldHandleStateChanges,p=void 0===f||f,h=n.storeKey,y=void 0===h?"store":h,b=(n.withRef,n.forwardRef),d=void 0!==b&&b,v=n.context,g=void 0===v?m:v,O=E(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),w=g;return function(e){var n=e.displayName||e.name||"Component",i=a(n),c=P({},O,{getDisplayName:a,methodName:u,renderCountProp:l,shouldHandleStateChanges:p,storeKey:y,displayName:i,wrappedComponentName:n,WrappedComponent:e}),s=O.pure;var f=s?r.useMemo:function(t){return t()};function h(n){var i=Object(r.useMemo)((function(){var t=n.forwardedRef,e=E(n,["forwardedRef"]);return[n.context,t,e]}),[n]),a=i[0],u=i[1],s=i[2],l=Object(r.useMemo)((function(){return a&&a.Consumer&&Object(x.isContextConsumer)(o.a.createElement(a.Consumer,null))?a:w}),[a,w]),h=Object(r.useContext)(l),y=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var b=y?n.store:h.store,d=Object(r.useMemo)((function(){return function(e){return t(e.dispatch,c)}(b)}),[b]),v=Object(r.useMemo)((function(){if(!p)return R;var t=new j(b,y?null:h.subscription),e=t.notifyNestedSubs.bind(t);return[t,e]}),[b,y,h]),m=v[0],g=v[1],O=Object(r.useMemo)((function(){return y?h:P({},h,{subscription:m})}),[y,h,m]),S=Object(r.useReducer)(q,C,F),_=S[0][0],k=S[1];if(_&&_.error)throw _.error;var T=Object(r.useRef)(),L=Object(r.useRef)(s),H=Object(r.useRef)(),B=Object(r.useRef)(!1),W=f((function(){return H.current&&s===L.current?H.current:d(b.getState(),s)}),[b,_,s]);A(D,[L,T,B,s,W,H,g]),A(M,[p,b,m,d,L,T,B,H,g,k],[b,m,d]);var I=Object(r.useMemo)((function(){return o.a.createElement(e,P({},W,{ref:u}))}),[u,e,W]);return Object(r.useMemo)((function(){return p?o.a.createElement(l.Provider,{value:O},I):I}),[l,I,O])}var b=s?o.a.memo(h):h;if(b.WrappedComponent=e,b.displayName=i,d){var v=o.a.forwardRef((function(t,e){return o.a.createElement(b,P({},t,{forwardedRef:e}))}));return v.displayName=i,v.WrappedComponent=e,k()(v,e)}return k()(b,e)}}function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function W(t,e){if(B(t,e))return!0;if("object"!==H(t)||null===t||"object"!==H(e)||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(e,n[o])||!B(t[n[o]],e[n[o]]))return!1;return!0}var I=n(794);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var N=function(){return Math.random().toString(36).substring(7).split("").join(".")},V={INIT:"@@redux/INIT"+N(),REPLACE:"@@redux/REPLACE"+N(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+N()}};function Y(t){if("object"!==z(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function X(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(X)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var o=t,i=e,a=[],c=a,u=!1;function s(){c===a&&(c=a.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function f(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return s(),c.push(t),function(){if(e){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,s();var n=c.indexOf(t);c.splice(n,1),a=null}}}function p(t){if(!Y(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=o(i,t)}finally{u=!1}for(var e=a=c,n=0;n<e.length;n++){(0,e[n])()}return t}function h(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");o=t,p({type:V.REPLACE})}function y(){var t,e=f;return(t={subscribe:function(t){if("object"!==z(t)||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(l())}return n(),{unsubscribe:e(n)}}})[I.a]=function(){return this},t}return p({type:V.INIT}),(r={dispatch:p,subscribe:f,getState:l,replaceReducer:h})[I.a]=y,r}function U(t,e){return function(){return e(t.apply(this,arguments))}}function G(t){return function(e,n){var r=t(e,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function K(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function Z(t,e){return function(e,n){n.displayName;var r=function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=K(t);var o=r(e,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=K(o),o=r(e,n)),o},r}}function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var $=[function(t){return"function"==typeof t?Z(t):void 0},function(t){return t?void 0:G((function(t){return{dispatch:t}}))},function(t){return t&&"object"===Q(t)?G((function(e){return function(t,e){if("function"==typeof t)return U(t,e);if("object"!==z(t)||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":z(t))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in t){var o=t[r];"function"==typeof o&&(n[r]=U(o,e))}return n}(t,e)})):void 0}];var J=[function(t){return"function"==typeof t?Z(t):void 0},function(t){return t?void 0:G((function(){return{}}))}];function tt(t,e,n){return P({},n,{},t,{},e)}var et=[function(t){return"function"==typeof t?function(t){return function(e,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(e,n,c){var u=t(e,n,c);return a?o&&i(u,r)||(r=u):(a=!0,r=u),r}}}(t):void 0},function(t){return t?void 0:function(){return tt}}];function nt(t,e,n,r){return function(o,i){return n(t(o,i),e(r,i),i)}}function rt(t,e,n,r,o){var i,a,c,u,s,l=o.areStatesEqual,f=o.areOwnPropsEqual,p=o.areStatePropsEqual,h=!1;function y(o,h){var y,b,d=!f(h,a),v=!l(o,i);return i=o,a=h,d&&v?(c=t(i,a),e.dependsOnOwnProps&&(u=e(r,a)),s=n(c,u,a)):d?(t.dependsOnOwnProps&&(c=t(i,a)),e.dependsOnOwnProps&&(u=e(r,a)),s=n(c,u,a)):v?(y=t(i,a),b=!p(y,c),c=y,b&&(s=n(c,u,a)),s):s}return function(o,l){return h?y(o,l):(c=t(i=o,a=l),u=e(r,a),s=n(c,u,a),h=!0,s)}}function ot(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,o=e.initMergeProps,i=E(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(t,i),c=r(t,i),u=o(t,i);return(i.pure?rt:nt)(a,c,u,t,i)}function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e,n){for(var r=e.length-1;r>=0;r--){var o=e[r](t);if(o)return o}return function(e,r){throw new Error("Invalid value of type "+it(t)+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function ct(t,e){return t===e}function ut(t){var e=void 0===t?{}:t,n=e.connectHOC,r=void 0===n?L:n,o=e.mapStateToPropsFactories,i=void 0===o?J:o,a=e.mapDispatchToPropsFactories,c=void 0===a?$:a,u=e.mergePropsFactories,s=void 0===u?et:u,l=e.selectorFactory,f=void 0===l?ot:l;return function(t,e,n,o){void 0===o&&(o={});var a=o,u=a.pure,l=void 0===u||u,p=a.areStatesEqual,h=void 0===p?ct:p,y=a.areOwnPropsEqual,b=void 0===y?W:y,d=a.areStatePropsEqual,v=void 0===d?W:d,m=a.areMergedPropsEqual,g=void 0===m?W:m,O=E(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),w=at(t,i,"mapStateToProps"),j=at(e,c,"mapDispatchToProps"),S=at(n,s,"mergeProps");return r(f,P({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:w,initMapDispatchToProps:j,initMergeProps:S,pure:l,areStatesEqual:h,areOwnPropsEqual:b,areStatePropsEqual:v,areMergedPropsEqual:g},O))}}var st=ut();var lt,ft=n(113),pt=n.n(ft);function ht(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i;return 0===n.length?i=r[0]:(i={},n.forEach((function(t,e){i[n[e]]=r[e]}))),{type:t,payload:i}};return o.toString=function(){return t.toString()},o.key=o.toString(),o}lt=ft.unstable_batchedUpdates,g=lt;var yt=ht("PROPS_UPDATE"),bt=ht("PROP_UPDATE","key","value"),dt=ht("SEQUENCES_UPDATE"),vt=ht("CONSERVSTION_UPDATE"),mt={updateProp:bt,updateProps:yt,updateSequences:dt,updateConservation:vt};var gt=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t},Ot=n(599);var wt=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Object(Ot.a)(n))==n?n:0),void 0!==e&&(e=(e=Object(Ot.a)(e))==e?e:0),gt(Object(Ot.a)(t),e,n)},jt=n(575),St=n(645),Pt=n(574),Et=n(617),_t=n(572),kt=n(566);var xt=function(t,e,n,r){if(!Object(_t.a)(t))return t;for(var o=-1,i=(e=Object(Pt.a)(e,t)).length,a=i-1,c=t;null!=c&&++o<i;){var u=Object(kt.a)(e[o]),s=n;if(o!=a){var l=c[u];void 0===(s=r?r(l,u,c):void 0)&&(s=Object(_t.a)(l)?l:Object(Et.a)(e[o+1])?[]:{})}Object(St.a)(c,u,s),c=c[u]}return t};var Tt=function(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var a=e[r],c=Object(jt.a)(t,a);n(c,a)&&xt(i,Object(Pt.a)(a,t),c)}return i},Ct=n(602);var Rt=function(t,e){return Tt(t,e,(function(e,n){return Object(Ct.a)(t,n)}))},qt=n(628);var At=function(t){return(null==t?0:t.length)?Object(qt.a)(t,1):[]},Dt=n(731),Mt=n(709);var Ft=function(t){return Object(Mt.a)(Object(Dt.a)(t,void 0,At),t+"")},Lt=Ft((function(t,e){return null==t?{}:Rt(t,e)})),Ht=n(607),Bt=n(603),Wt=n(604),It=Ht.a.isFinite,zt=Math.min;var Nt=function(t){var e=Math[t];return function(t,n){if(t=Object(Ot.a)(t),(n=null==n?0:zt(Object(Bt.a)(n),292))&&It(t)){var r=(Object(Wt.a)(t)+"e").split("e"),o=e(r[0]+"e"+(+r[1]+n));return+((r=(Object(Wt.a)(o)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}("floor"),Vt=n(796);function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(n),!0).forEach((function(e){Ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gt=ht("MAINSTORE_UPDATE"),Kt=ht("POSITION_MOVE"),Zt=ht("POSITION_UPDATE"),Qt=ht("POSITION_BY_RESIDUE_UPDATE"),$t=ht("HIGHLIGHT_REGION"),Jt=ht("REMOVE_HIGHLIGHT_REGION"),te={updateMainStore:Gt,updatePosition:Zt,movePosition:Kt,updatePositionByResidue:Qt,highlightRegion:$t,removeHighlightRegion:Jt};function ee(t,e){var n=t.sequences.maxLength*t.props.tileWidth-t.props.width;e.xPos=wt(e.xPos,0,n);var r=t.sequences.raw.length*t.props.tileHeight-t.props.height;return e.yPos=wt(e.yPos,0,r),Xt(Xt({},t),{},{position:e})}var ne=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},e=arguments.length>1?arguments[1]:void 0,n=t.position;switch(e.type){case Kt.key:Vt(void 0!==e.payload.xMovement||void 0!==e.payload.yMovement,"must contain at least xMovement or yMovement");var r=Xt({},n);return r.xPos+=e.payload.xMovement||0,r.yPos+=e.payload.yMovement||0,ee(t,r);case Zt.key:Vt(void 0!==e.payload.xPos||void 0!==e.payload.yPos,"must contain at least xPos or yPos");var o={xPos:e.payload.xPos||n.xPos,yPos:e.payload.yPos||n.yPos};return ee(t,o);case Qt.key:Vt(void 0!==e.payload.aaPos,"must contain at least aaPos");var i={xPos:t.props.tileWidth*(e.payload.aaPos-1),yPos:n.yPos};return ee(t,i);default:return t}};function re(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0},highlight:null},e=arguments.length>1?arguments[1]:void 0,n=t,r=t.position,o=t.highlight;switch(e.type){case Gt.key:n=Xt(Xt({},Lt(n,["props","sequenceStats","sequences"])),e.payload);break;case Zt.key:case Kt.key:case Qt.key:r=ne(n,e).position;break;case $t.key:o=e.payload;break;case Jt.key:o=null;break;default:return n}var i={xPosOffset:-r.xPos%n.props.tileWidth,yPosOffset:-r.yPos%n.props.tileWidth,currentViewSequence:wt(Nt(r.yPos/n.props.tileHeight),0,n.sequences.length-1),currentViewSequencePosition:wt(Nt(r.xPos/n.props.tileWidth),0,n.sequences.maxLength),position:r};return Xt(Xt(Xt({},n),i),{},{highlight:o})}var oe=n(606),ie=n(568),ae=n(706);var ce=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var ue=function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i};var se=function(t,e){return e.length<2?t:Object(jt.a)(t,ue(e,0,-1))};var le=function(t,e){return e=Object(Pt.a)(e,t),null==(t=se(t,e))||delete t[Object(kt.a)(ce(e))]},fe=n(619),pe=n(587),he=n(644),ye=n(570),be=Function.prototype,de=Object.prototype,ve=be.toString,me=de.hasOwnProperty,ge=ve.call(Object);var Oe=function(t){if(!Object(ye.a)(t)||"[object Object]"!=Object(pe.a)(t))return!1;var e=Object(he.a)(t);if(null===e)return!0;var n=me.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ve.call(n)==ge};var we=function(t){return Oe(t)?void 0:t},je=n(664),Se=Ft((function(t,e){var n={};if(null==t)return n;var r=!1;e=Object(ie.a)(e,(function(e){return e=Object(Pt.a)(e,t),r||(r=e.length>1),e})),Object(fe.a)(t,Object(je.a)(t),n),r&&(n=Object(ae.a)(n,7,we));for(var o=e.length;o--;)le(n,e[o]);return n})),Pe=n(600),Ee=n(615);var _e=function(t){return"function"==typeof t?t:Ee.a};var ke=function(t,e){return t&&Object(Pe.a)(t,_e(e))},xe=function(t){this.defaultColor="#ffffff",this.type="static",this.map=t,this.getColor=function(t){return void 0!==this.map[t]?this.map[t]:this.defaultColor}},Te=function(t,e){this.type="dyn",this.opt=e,void 0!==t.init?(t.init.call(this),this.getColor=t.run,this.reset=t.init,this.map=t.map):this.getColor=t},Ce={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},Re={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},qe={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"},Ae={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},De={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},Me={init:function(){}},Fe=[""," ","-","_","."];function Le(t){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Me.run=function(t,e,n){if(!n||1!==n.progress||e>n.map.length||Fe.includes(t))return"#ffffff";var r=n.map[e][t]||0;return r>.8?"#6464ff":r>.6?"#9da5ff":r>.4?"#cccccc":"#ffffff"},Me.map={"> 0.8":"#6464ff","> 0.6":"#9da5ff","> 0.4":"#cccccc","> 0":"#ffffff"};var He={aliphatic:{A:"#00639a",V:"#00639a",L:"#00639a",I:"#00639a",P:"#00639a"},aromatic:{F:"#00639a",W:"#00639a",Y:"#00639a",H:"#00639a"},buried:Ce,buried_index:Ce,charged:{D:"#00639a",E:"#00639a",K:"#00639a",R:"#00639a",H:"#00639a"},cinema:{A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"},clustal2:{A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"},clustal:{A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"},helix:Re,helix_propensity:Re,hydro:{A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"},lesk:{A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"},mae:{A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"},negative:{D:"#00639a",E:"#00639a"},nucleotide:{A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"},polar:{R:"#00639a",N:"#00639a",D:"#00639a",Q:"#00639a",E:"#00639a",G:"#00639a",H:"#00639a",K:"#00639a",S:"#00639a",T:"#00639a",Y:"#00639a"},positive:{K:"#00639a",R:"#00639a",H:"#00639a"},purine:qe,purine_pyrimidine:qe,serine_threonine:{S:"#00639a",T:"#00639a"},strand:Ae,strand_propensity:Ae,taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"},turn:De,turn_propensity:De,zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},Be={conservation:Me},We=function(t){this.maps=Ie(He),this.dyn=Ie(Be),this.opt=t};function Ie(t){if(null==t||"object"!==Le(t))return t;var e=t.constructor();for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}We.getScheme=function(t){return He[t]},We.prototype.getScheme=function(t){var e=this.maps[t];return void 0===e&&(e={},void 0!==this.dyn[t])?new Te(this.dyn[t],this.opt):new xe(e)},We.prototype.addStaticScheme=function(t,e){this.maps[t]=e},We.prototype.addDynScheme=function(t,e){this.dyn[t]=e};var Ne=new We,Ve=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scheme=Ne.getScheme(e)}var e,n,r;return e=t,(n=[{key:"updateConservation",value:function(t){Ne.conservation=t}},{key:"getColor",value:function(t,e){return this.scheme.getColor(t,e,Ne.conservation)}}])&&ze(e.prototype,n),r&&ze(e,r),t}();function Ye(t){return t&&"function"==typeof t.getColor}var Xe=v.a.shape({name:v.a.string,sequence:v.a.string}),Ue=v.a.oneOfType([v.a.oneOf(["aliphatic","aromatic","charged","negative","polar","positive","serine_threonine","buried_index","clustal","clustal2","cinema","helix_propensity","hydro","lesk","mae","nucleotide","purine_pyrimidine","strand_propensity","taylor","turn_propensity","zappo","conservation"]),v.a.instanceOf(Ve),function(t,e,n){if(!Ye(t[e]))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Validation failed.")}]),Ge=v.a.shape({xPos:v.a.number,yPos:v.a.number}),Ke={width:v.a.number,height:v.a.number,tileWidth:v.a.number,tileHeight:v.a.number,colorScheme:Ue,calculateConservation:v.a.bool,overlayConservation:v.a.bool,sampleSizeConservation:v.a.number},Ze={width:800,height:600,tileWidth:20,tileHeight:20,colorScheme:"clustal",calculateConservation:!1,overlayConservation:!1,sampleSizeConservation:void 0};var Qe=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n},$e=n(592),Je=n(586);var tn=function(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n};var en=function(t,e,n){var r=Object(u.a)(t)?Qe:tn,o=arguments.length<3;return r(t,Object(Je.a)(e,4),n,o,$e.a)},nn=n(578);var rn=function(t,e){return Object(nn.a)(t,e)},on=n(590),an=n(612),cn=n(613);var un=function(t,e,n){(void 0!==n&&!Object(cn.a)(t[e],n)||void 0===n&&!(e in t))&&Object(an.a)(t,e,n)},sn=n(605),ln=n(660),fn=n(663),pn=n(641),hn=n(661),yn=n(598),bn=n(684);var dn=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},vn=n(633);var mn=function(t){return Object(fe.a)(t,Object(vn.a)(t))};var gn=function(t,e,n,r,o,i,a){var s=dn(t,n),f=dn(e,n),h=a.get(f);if(h)un(t,n,h);else{var y=i?i(s,f,n+"",t,e,a):void 0,b=void 0===y;if(b){var d=Object(u.a)(f),v=!d&&Object(l.a)(f),m=!d&&!v&&Object(p.a)(f);y=f,d||v||m?Object(u.a)(s)?y=s:Object(yn.a)(s)?y=Object(pn.a)(s):v?(b=!1,y=Object(ln.a)(f,!0)):m?(b=!1,y=Object(fn.a)(f,!0)):y=[]:Oe(f)||Object(c.a)(f)?(y=s,Object(c.a)(s)?y=mn(s):Object(_t.a)(s)&&!Object(bn.a)(s)||(y=Object(hn.a)(f))):b=!1}b&&(a.set(f,y),o(y,f,r,i,a),a.delete(f)),un(t,n,y)}};var On=function t(e,n,r,o,i){e!==n&&Object(sn.a)(n,(function(a,c){if(i||(i=new on.a),Object(_t.a)(a))gn(e,n,c,r,t,o,i);else{var u=o?o(dn(e,c),a,c+"",e,n,i):void 0;void 0===u&&(u=a),un(e,c,u)}}),vn.a)},wn=n(593);function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Sn=function(t,e,n){if(!Object(_t.a)(n))return!1;var r=jn(e);return!!("number"==r?Object(s.a)(n)&&Object(Et.a)(e,n.length):"string"==r&&e in n)&&Object(cn.a)(n[e],t)};var Pn=function(t){return Object(wn.a)((function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&Sn(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++r<o;){var c=n[r];c&&t(e,c,r,i)}return e}))},En=Pn((function(t,e,n){On(t,e,n)}));var _n=function(t,e){var n={raw:e,length:e.length};return n.maxLength=en(e,(function(t,e){return Math.max(t,e.sequence.length)}),0),n};function kn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kn(Object(n),!0).forEach((function(e){Tn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cn(t){var e;Ye(t.colorScheme)||(t.colorScheme=new Ve(t.colorScheme)),"function"==typeof(null==t||null===(e=t.colorScheme)||void 0===e?void 0:e.updateConservation)&&t.colorScheme.updateConservation(t.conservation)}var Rn,qn,An=function(t,e){var n=Object.keys(e);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=t(r,o);if(r!==i)for(var a=0;a<n.length;a++){var c=n[a],u=e[c](i[c],o,i);if(void 0===u)throw new Error("A reducer can't return 'undefined'");i[c]=u}return i}}(function(t){var e=Object.keys(t);return function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o={},i=!1,a=0;a<e.length;a++){var c=e[a],u=t[c](n[c],r);if(void 0===u)throw new Error("A reducer can't return 'undefined'");o[c]=u,i=i||u!==n[c]}return i?o:n}}({props:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case mt.updateProps.key:return t=xn(xn({},t),r),"colorScheme"in r&&Cn(t),t;case mt.updateProp.key:var o=r.key,i=r.value;return t=xn(xn({},t),{},Tn({},o,i)),"colorScheme"===o&&Cn(t),t;case mt.updateConservation.key:var a=r.progress,c=r.conservation;return t.conservation={progress:a,map:c},t.colorScheme.updateConservation(t.conservation),t;default:return void 0!==t.colorScheme&&Cn(t),t}},sequences:(Rn=Tn({},mt.updateSequences,_n),qn=[],function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;return Rn.hasOwnProperty(n)?Rn[n](t,r):t})}),{sequenceStats:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentViewSequence:0,currentViewSequencePosition:0},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;switch(e.type){case mt.updateProp.key:case mt.updateProps.key:case mt.updateSequences.key:if(n.props&&n.props.tileHeight&&n.props.tileWidth&&n.sequences){var r={};return r.nrXTiles=Math.ceil(n.props.width/n.props.tileWidth)+1,r.nrYTiles=Math.ceil(n.props.height/n.props.tileHeight)+1,r.fullWidth=n.props.tileWidth*n.sequences.maxLength,r.fullHeight=n.props.tileHeight*n.sequences.length,r}}return t}});function Dn(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var Mn=function(t){v.a.checkPropTypes(Ke,t,"prop","MSAViewer");var e=En({},Ze,t),n=e.sequences,r=(e.position,Dn(e,["sequences","position"])),o=X(An,!1);return o.dispatch(yt(r)),o.dispatch(dt(n)),o};var Fn=function(t,e){void 0===t.nextFrame&&(t.nextFrame=window.requestAnimationFrame(function(){e(),this.nextFrame=void 0}.bind(t)))},Ln=n(701),Hn=n.n(Ln);function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(){return(Wn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function In(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xn(t);if(e){var o=Xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yn(this,n)}}function Yn(t,e){return!e||"object"!==Bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Un=null,Gn=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;(Un=new Hn.a).postMessage({sequences:e,sampleSize:n}),Un.onmessage=function(n){t.dispatch(mt.updateConservation(n.data)),r&&r.current&&r.current.el&&r.current.el.current&&r.current.el.current.dispatchEvent(new CustomEvent("conservationProgress",{bubbles:!0,detail:n.data})),1===n.data.progress&&(console.log("completed conservation analisys"),t.dispatch(mt.updateSequences(e)))}},Kn={sequences:"updateSequences"};Object.keys(Ke).forEach((function(t){!(t in Kn)&&Ke[t]&&(Kn[t]="updateProp")}));var Zn=Object.keys(Kn),Qn=function(t){return en(t,(function(t,e,n){return t[e.key]=e,t}),{})},$n=Qn(mt),Jn=Qn(te),tr=function(t){var e=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(c,e);var n,r,i,a=Vn(c);function c(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),e=a.call(this,t);var n=Lt(t,Zn)||{};return e.el=o.a.createRef(),e.msaStore=t.msaStore,void 0!==n.sequences?(e.msaStore=Mn(n),n.calculateConservation&&e.msaStore&&Gn(e.msaStore,n.sequences,n.sampleSizeConservation,e.el)):console.warn("Check your MSA properties",n),e}return n=c,(r=[{key:"componentDidMount",value:function(){void 0!==this.props.position&&this.updatePosition(this.props.position)}},{key:"componentDidUpdate",value:function(t){var e=this.props;for(var n in Lt(e,Zn))if(!rn(t[n],e[n]))if("position"===n)this.updatePosition(e[n]);else if(n in Kn){var r=void 0;switch("calculateConservation"===n&&(e[n]?Gn(this.msaStore,this.props.sequences,this.props.sampleSizeConservation,this.el):Un.terminate()),"sampleSizeConservation"===n&&(Un&&Un.terminate(),Gn(this.msaStore,this.props.sequences,this.props.sampleSizeConservation,this.el)),Kn[n]){case"updateProp":r=mt[Kn[n]](n,e[n]);break;default:r=mt[Kn[n]](e[n])}this.msaStore.dispatch(r)}else console.error(n," is unknown.")}},{key:"dispatch",value:function(t){if(t.type in $n)this.msaStore.dispatch(t);else{if(!(t.type in Jn))throw new Error("Invalid action",t);this.el.current.positionStore.dispatch(t)}}},{key:"getColorMap",value:function(){var t=this.props.colorScheme,e={};try{e=this.msaStore.getState().props.colorScheme.scheme.map}catch(t){}return{name:t,map:e}}},{key:"render",value:function(){var e=Se(this.props,Zn),n=e.msaStore,r=In(e,["msaStore"]);return void 0===this.msaStore?o.a.createElement("div",null," Error initializing the MSAViewer. "):o.a.createElement(t,Wn({ref:this.el,msaStore:n||this.msaStore},r))}}])&&zn(n.prototype,r),i&&zn(n,i),c}(r.Component);return ke(mt,(function(t,n){e.prototype[n]=function(e){this.msaStore.dispatch(t(e))}})),ke(te,(function(t,n){e.prototype[n]=function(e){var n=this;Fn(this,(function(){n.el.current.positionStore.dispatch(t(e))}))}})),e},er="FORWARD_SAME_PROP_NAME";function nr(t,e){var n={},r=t;return ke(e,(function(t,e){var o=function(t,e){var n={},r={};return ke(t,(function(t,o){if(o in e){var i=e[o];n[i===er?o:i]=t}else r[o]=t})),{forward:n,other:r}}(r,t);n[e]=o.forward,r=o.other})),{forward:n,other:r}}var rr=n(719),or=rr.a&&new rr.a,ir=or?function(t,e){return or.set(t,e),t}:Ee.a,ar=n(643);var cr=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Object(ar.a)(t.prototype),r=t.apply(n,e);return Object(_t.a)(r)?r:n}};var ur=function(t,e,n){var r=1&e,o=cr(t);return function e(){var i=this&&this!==Ht.a&&this instanceof e?o:t;return i.apply(r?n:this,arguments)}},sr=n(694),lr=Math.max;var fr=function(t,e,n,r){for(var o=-1,i=t.length,a=n.length,c=-1,u=e.length,s=lr(i-a,0),l=Array(u+s),f=!r;++c<u;)l[c]=e[c];for(;++o<a;)(f||o<i)&&(l[n[o]]=t[o]);for(;s--;)l[c++]=t[o++];return l},pr=Math.max;var hr=function(t,e,n,r){for(var o=-1,i=t.length,a=-1,c=n.length,u=-1,s=e.length,l=pr(i-c,0),f=Array(l+s),p=!r;++o<l;)f[o]=t[o];for(var h=o;++u<s;)f[h+u]=e[u];for(;++a<c;)(p||o<i)&&(f[h+n[a]]=t[o++]);return f};var yr=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r};var br=function(){};function dr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}dr.prototype=Object(ar.a)(br.prototype),dr.prototype.constructor=dr;var vr=dr,mr=n(627),gr=or?function(t){return or.get(t)}:mr.a,Or={},wr=Object.prototype.hasOwnProperty;var jr=function(t){for(var e=t.name+"",n=Or[e],r=wr.call(Or,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e};function Sr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Sr.prototype=Object(ar.a)(br.prototype),Sr.prototype.constructor=Sr;var Pr=Sr;var Er=function(t){if(t instanceof vr)return t.clone();var e=new Pr(t.__wrapped__,t.__chain__);return e.__actions__=Object(pn.a)(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},_r=Object.prototype.hasOwnProperty;function kr(t){if(Object(ye.a)(t)&&!Object(u.a)(t)&&!(t instanceof vr)){if(t instanceof Pr)return t;if(_r.call(t,"__wrapped__"))return Er(t)}return new Pr(t)}kr.prototype=br.prototype,kr.prototype.constructor=kr;var xr=kr;var Tr=function(t){var e=jr(t),n=xr[e];if("function"!=typeof n||!(e in vr.prototype))return!1;if(t===n)return!0;var r=gr(n);return!!r&&t===r[0]},Cr=n(730),Rr=Object(Cr.a)(ir),qr=/\{\n\/\* \[wrapped with (.+)\] \*/,Ar=/,? & /;var Dr=function(t){var e=t.match(qr);return e?e[1].split(Ar):[]},Mr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var Fr=function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Mr,"{\n/* [wrapped with "+e+"] */\n")},Lr=n(652),Hr=n(597),Br=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var Wr=function(t,e){return Object(Lr.a)(Br,(function(n){var r="_."+n[0];e&n[1]&&!Object(Hr.a)(t,r)&&t.push(r)})),t.sort()};var Ir=function(t,e,n){var r=e+"";return Object(Mt.a)(t,Fr(r,Wr(Dr(r),n)))};var zr=function(t,e,n,r,o,i,a,c,u,s){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var f=[t,e,o,l?i:void 0,l?a:void 0,l?void 0:i,l?void 0:a,c,u,s],p=n.apply(void 0,f);return Tr(t)&&Rr(p,f),p.placeholder=r,Ir(p,t,e)};var Nr=function(t){return t.placeholder},Vr=Math.min;var Yr=function(t,e){for(var n=t.length,r=Vr(e.length,n),o=Object(pn.a)(t);r--;){var i=e[r];t[r]=Object(Et.a)(i,n)?o[i]:void 0}return t};var Xr=function(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n];a!==e&&"__lodash_placeholder__"!==a||(t[n]="__lodash_placeholder__",i[o++]=n)}return i};var Ur=function t(e,n,r,o,i,a,c,u,s,l){var f=128&n,p=1&n,h=2&n,y=24&n,b=512&n,d=h?void 0:cr(e);return function v(){for(var m=arguments.length,g=Array(m),O=m;O--;)g[O]=arguments[O];if(y)var w=Nr(v),j=yr(g,w);if(o&&(g=fr(g,o,i,y)),a&&(g=hr(g,a,c,y)),m-=j,y&&m<l){var S=Xr(g,w);return zr(e,n,t,v.placeholder,r,g,S,u,s,l-m)}var P=p?r:this,E=h?P[e]:e;return m=g.length,u?g=Yr(g,u):b&&m>1&&g.reverse(),f&&s<m&&(g.length=s),this&&this!==Ht.a&&this instanceof v&&(E=d||cr(E)),E.apply(P,g)}};var Gr=function(t,e,n){var r=cr(t);return function o(){for(var i=arguments.length,a=Array(i),c=i,u=Nr(o);c--;)a[c]=arguments[c];var s=i<3&&a[0]!==u&&a[i-1]!==u?[]:Xr(a,u);if((i-=s.length)<n)return zr(t,e,Ur,o.placeholder,void 0,a,s,void 0,void 0,n-i);var l=this&&this!==Ht.a&&this instanceof o?r:t;return Object(sr.a)(l,this,a)}};var Kr=function(t,e,n,r){var o=1&e,i=cr(t);return function e(){for(var a=-1,c=arguments.length,u=-1,s=r.length,l=Array(s+c),f=this&&this!==Ht.a&&this instanceof e?i:t;++u<s;)l[u]=r[u];for(;c--;)l[u++]=arguments[++a];return Object(sr.a)(f,o?n:this,l)}},Zr=Math.min;var Qr=function(t,e){var n=t[1],r=e[1],o=n|r,i=o<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!i&&!a)return t;1&r&&(t[2]=e[2],o|=1&n?0:4);var c=e[3];if(c){var u=t[3];t[3]=u?fr(u,c,e[4]):c,t[4]=u?Xr(t[3],"__lodash_placeholder__"):e[4]}return(c=e[5])&&(u=t[5],t[5]=u?hr(u,c,e[6]):c,t[6]=u?Xr(t[5],"__lodash_placeholder__"):e[6]),(c=e[7])&&(t[7]=c),128&r&&(t[8]=null==t[8]?e[8]:Zr(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t},$r=Math.max;var Jr=function(t,e,n,r,o,i,a,c){var u=2&e;if(!u&&"function"!=typeof t)throw new TypeError("Expected a function");var s=r?r.length:0;if(s||(e&=-97,r=o=void 0),a=void 0===a?a:$r(Object(Bt.a)(a),0),c=void 0===c?c:Object(Bt.a)(c),s-=o?o.length:0,64&e){var l=r,f=o;r=o=void 0}var p=u?void 0:gr(t),h=[t,e,n,r,o,l,f,i,a,c];if(p&&Qr(h,p),t=h[0],e=h[1],n=h[2],r=h[3],o=h[4],!(c=h[9]=void 0===h[9]?u?0:t.length:$r(h[9]-s,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?Gr(t,e,c):32!=e&&33!=e||o.length?Ur.apply(void 0,h):Kr(t,e,n,r);else var y=ur(t,e,n);return Ir((p?ir:Rr)(y,h),t,e)},to=Object(wn.a)((function(t,e){var n=Xr(e,Nr(to));return Jr(t,64,void 0,e,n)}));to.placeholder={};var eo=to;var no=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return st(t,e,n,r)};function ro(t){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oo(t,e){return t===e}function io(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t(e[o],n[o]))return!1;return!0}function ao(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oo,n=null,r=null;return function(){return io(e,n,arguments)||(r=t.apply(null,arguments)),n=arguments,r}}function co(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"==typeof t}))){var n=e.map((function(t){return ro(t)})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return e}function uo(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=0,a=r.pop(),c=co(r),u=t.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(n)),s=t((function(){for(var t=[],e=c.length,n=0;n<e;n++)t.push(c[n].apply(null,arguments));return u.apply(null,t)}));return s.resultFunc=a,s.dependencies=c,s.recomputations=function(){return i},s.resetRecomputations=function(){return i=0},s}}var so=uo(ao);function lo(t){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fo(t,e,n,r){var o=n?n.call(r,t,e):void 0;if(void 0!==o)return!!o;if(t===e)return!0;if("object"!==lo(t)||!t||"object"!==lo(e)||!e)return!1;var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(e),u=0;u<i.length;u++){var s=i[u];if(!c(s))return!1;var l=t[s],f=e[s];if(!1===(o=n?n.call(r,l,f,s):void 0)||void 0===o&&l!==f)return!1}return!0}var po=uo(ao,fo);function ho(t){Vt(arguments.length>1,"Must provide methods for binding");for(var e=1;e<arguments.length;e++){var n=arguments[e];t[n]=t[n].bind(t)}}function yo(t){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bo(Object(n),!0).forEach((function(e){ko(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function go(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oo(t,e,n){return e&&go(t.prototype,e),n&&go(t,n),t}function wo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jo(t,e)}function jo(t,e){return(jo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function So(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_o(t);if(e){var o=_o(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Po(this,n)}}function Po(t,e){return!e||"object"!==yo(e)&&"function"!=typeof e?Eo(t):e}function Eo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _o(t){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ko(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.withX,i=void 0!==n&&n,a=e.withY,c=void 0!==a&&a,u=function(e){wo(r,e);var n=So(r);function r(t){var e;return mo(this,r),ko(Eo(e=n.call(this,t)),"updateFromPositionStore",(function(){Vt(e.context&&e.context.positionMSAStore,"MSA PositionStore needs to be injected");var t=e.context.positionMSAStore.getState();e.position=e.position||{};var n=Lt(t,["currentViewSequence","currentViewSequencePosition","xPosOffset","yPosOffset"]);t.position&&(n.xPos=t.position.xPos,n.yPos=t.position.yPos),e.setState({highlight:t.highlight,hasBeenInitialized:!0}),e.el.current&&e.shouldRerender(n)?(e.position=n,e.setState({position:e.position})):(ke(n,(function(t,n){e.position[n]=t})),e.el.current&&e.updateScrollPosition())})),ko(Eo(e),"shouldRerender",(function(t){var n=e.el.current;if(void 0!==n.shouldRerender)return n.shouldRerender(t);var r=n.props.cacheElements;return!!(c&&Math.abs(t.currentViewSequence-e.position.lastCurrentViewSequence)>=r)||!!(i&&Math.abs(t.currentViewSequencePosition-e.position.lastCurrentViewSequencePosition)>=r)})),ko(Eo(e),"updateScrollPosition",(function(){var t=e.el.current;if(t&&void 0!==t.updateScrollPosition)t.updateScrollPosition();else if(t&&t.el&&t.el.current){if(i){var n=t.props.tileWidth,r=-e.position.xPosOffset;r+=(e.position.lastCurrentViewSequencePosition-e.position.lastStartXTile)*n,e.position.currentViewSequencePosition!==e.position.lastCurrentViewSequencePosition&&(r+=(e.position.currentViewSequencePosition-e.position.lastCurrentViewSequencePosition)*n),t.el.current.scrollLeft=r}if(c){var o=t.props.tileHeight,a=-e.position.yPosOffset;a+=(e.position.lastCurrentViewSequence-e.position.lastStartYTile)*o,e.position.currentViewSequence!==e.position.lastCurrentViewSequence&&(a+=(e.position.currentViewSequence-e.position.lastCurrentViewSequence)*o),t.el.current.scrollTop=a}}})),ko(Eo(e),"dispatch",(function(t){e.context.positionMSAStore.dispatch(t)})),e.el=o.a.createRef(),e.state={highlight:null,hasBeenInitialized:!1},e}return Oo(r,[{key:"componentDidMount",value:function(){this.unsubscribe=this.context.positionMSAStore.subscribe(this.updateFromPositionStore),this.updateScrollPosition(!0),this.updateFromPositionStore()}},{key:"componentDidUpdate",value:function(){this.updateScrollPosition()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return this.state.hasBeenInitialized?o.a.createElement(t,vo({ref:this.el,position:this.position,positionDispatch:this.dispatch,highlight:this.state.highlight},this.props)):null}}]),r}(r.PureComponent);return u.displayName="withPosition(".concat(t.displayName||t.name,")"),u.contextTypes={positionMSAStore:v.a.object},u};function To(t){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ro(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qo(t,e){return(qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ao(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mo(t);if(e){var o=Mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Do(this,n)}}function Do(t,e){return!e||"object"!==To(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mo(t){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qo(t,e)}(a,t);var e,n,r,i=Ao(a);function a(){return Co(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"renderTile",value:function(t){var e=this.props.tileComponent;if(t in this.props.componentCache)return this.props.componentCache[t];var n=o.a.createElement(e,{key:t,index:t});return this.props.componentCache[t]=n,n}},{key:"render",value:function(){for(var t=[],e=this.props.startTile;e<this.props.endTile;e++)t.push(this.renderTile(e));return 0===t.length&&console.warn("The TileComponent rendered returned 0 elements from ".concat(this.props.startTile," to ").concat(this.props.endTile)),o.a.createElement("div",null,t)}}])&&Ro(e.prototype,n),r&&Ro(e,r),a}(r.PureComponent);Fo.propTypes={startTile:v.a.number.isRequired,endTile:v.a.number.isRequired,componentCache:v.a.func.isRequired};var Lo=Fo;function Ho(t){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Io(t,e){return(Io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vo(t);if(e){var o=Vo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return No(this,n)}}function No(t,e){return!e||"object"!==Ho(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vo(t){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Io(t,e)}(a,t);var e,n,r,i=zo(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).el=o.a.createRef(),e}return e=a,(n=[{key:"render",value:function(){var t=this.props,e=(t.yPosOffset,t.tileHeight,t.currentViewSequence,t.sequences,t.height),n=(t.cacheElements,t.tileComponent,t.nrYTiles,t.position,t.positionDispatch,t.componentCache,Bo(t,["yPosOffset","tileHeight","currentViewSequence","sequences","height","cacheElements","tileComponent","nrYTiles","position","positionDispatch","componentCache"])),r={height:e,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},i=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),a=Math.min(this.props.sequences.length,i+Math.ceil(e/this.props.tileHeight)+2*this.props.cacheElements);return this.props.position.lastCurrentViewSequence=this.props.position.currentViewSequence,this.props.position.lastStartYTile=i,o.a.createElement("div",n,o.a.createElement("div",{style:r,ref:this.el},o.a.createElement(Lo,{componentCache:this.props.componentCache,startTile:i,endTile:a,tileComponent:this.props.tileComponent})))}}])&&Wo(e.prototype,n),r&&Wo(e,r),a}(r.PureComponent);Yo.propTypes={tileComponent:v.a.oneOfType([v.a.func,v.a.object]).isRequired,cacheElements:v.a.number.isRequired,tileHeight:v.a.number.isRequired,nrYTiles:v.a.number.isRequired,componentCache:v.a.func.isRequired};var Xo=xo(Yo,{withY:!0});function Uo(t){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Go(){return(Go=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ko(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ko(Object(n),!0).forEach((function(e){Qo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $o(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Jo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ti(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ei(t,e,n){return e&&ti(t.prototype,e),n&&ti(t,n),t}function ni(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ri(t,e)}function ri(t,e){return(ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ci(t);if(e){var o=ci(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ii(this,n)}}function ii(t,e){return!e||"object"!==Uo(e)&&"function"!=typeof e?ai(t):e}function ai(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ci(t){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ui=function(t){ni(n,t);var e=oi(n);function n(t){var r;return Jo(this,n),ho(ai(r=e.call(this,t)),"createLabel"),r.label=po(eo(Lt,r.constructor.labelProps),r.createLabel),r}return ei(n,[{key:"createLabel",value:function(t){return this.cache=function(){},n=(e=t).sequences,i=e.tileHeight,a=e.labelComponent,c=e.labelStyle,u=e.labelAttributes,function(t){ni(r,t);var e=oi(r);function r(){return Jo(this,r),e.apply(this,arguments)}return ei(r,[{key:"render",value:function(){var t=this.props,e=t.index,r=$o(t,["index"]);if(a){var s=a;return o.a.createElement(s,{sequence:n[e],index:e})}r.style=Zo(Zo({},this.props.style),{},{height:i},c);var l=Zo(Zo({},r),u);return o.a.createElement("div",l,n[e].name)}}]),r}(r.PureComponent);var e,n,i,a,c,u}},{key:"render",value:function(){var t=this.props,e=t.cacheElements,n=(t.dispatch,t.labelComponent,t.labelStyle,t.labelAttributes,$o(t,["cacheElements","dispatch","labelComponent","labelStyle","labelAttributes"]));return o.a.createElement(Xo,Go({tileComponent:this.label(this.props),cacheElements:e,componentCache:this.cache},n))}}]),n}(r.PureComponent);Qo(ui,"labelProps",["sequences","tileHeight","labelComponent","labelStyle","labelAttributes"]),ui.defaultProps={cacheElements:10,labelStyle:{}},ui.propTypes={font:v.a.string,labelComponent:v.a.oneOfType([v.a.object,v.a.func]),style:v.a.object,labelStyle:v.a.object,labelAttributes:v.a.object};var si=no((function(t){return{height:t.props.height,tileHeight:t.props.tileHeight,sequences:t.sequences.raw,nrYTiles:t.sequenceStats.nrYTiles}}))(ui);function li(t){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fi(){return(fi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function pi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pi(Object(n),!0).forEach((function(e){yi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bi(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vi(t,e){return(vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oi(t);if(e){var o=Oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gi(this,n)}}function gi(t,e){return!e||"object"!==li(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oi(t){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vi(t,e)}(a,t);var e,n,r,i=mi(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).el=o.a.createRef(),e}return e=a,(n=[{key:"render",value:function(){var t=this.props,e=t.tileWidth,n=t.sequences,r=t.width,i=(t.cacheElements,t.tileComponent),a=(t.nrXTiles,t.maxLength,t.position,t.positionDispatch,t.componentCache,bi(t,["tileWidth","sequences","width","cacheElements","tileComponent","nrXTiles","maxLength","position","positionDispatch","componentCache"])),c={width:r,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},u=hi(hi({},this.props.style),{},{height:this.props.height}),s={tileWidth:e,sequences:n,tileComponent:i},l=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),f=Math.min(this.props.maxLength,l+this.props.nrXTiles+2*this.props.cacheElements),p=this.props.width+2*this.props.cacheElements*this.props.tileWidth;return this.props.position.lastStartXTile=l,this.props.position.lastCurrentViewSequencePosition=this.props.position.currentViewSequencePosition,o.a.createElement("div",fi({style:u},a),o.a.createElement("div",{style:c,ref:this.el},o.a.createElement(Lo,fi({},s,{componentCache:this.props.componentCache,startTile:l,endTile:f,maxWidth:p}))))}}])&&di(e.prototype,n),r&&di(e,r),a}(r.PureComponent);wi.propTypes={tileComponent:v.a.oneOfType([v.a.func,v.a.object]).isRequired,cacheElements:v.a.number.isRequired,tileWidth:v.a.number.isRequired,nrXTiles:v.a.number.isRequired,maxLength:v.a.number.isRequired,componentCache:v.a.func.isRequired};var ji=xo(wi,{withX:!0}),Si=Pn((function(t,e){Object(fe.a)(e,Object(vn.a)(e),t)}));var Pi=function(t,e){return(Object(u.a)(t)?Lr.a:$e.a)(t,_e(e))};var Ei=function(t,e){var n={};return e=Object(Je.a)(e,3),Object(Pe.a)(t,(function(t,r,o){Object(an.a)(n,r,e(t,r,o))})),n};var _i=function(t,e){var n=-1,r=Object(s.a)(t)?Array(t.length):[];return Object($e.a)(t,(function(t,o,i){r[++n]=e(t,o,i)})),r};var ki=function(t,e){return(Object(u.a)(t)?ie.a:_i)(t,Object(Je.a)(e,3))},xi=n(721);var Ti=function(t,e){var n=[];return Object($e.a)(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n};var Ci=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}};var Ri=function(t,e){return(Object(u.a)(t)?xi.a:Ti)(t,Ci(Object(Je.a)(e,3)))},qi=n(567);var Ai=function(t,e,n){for(var r=-1,o=t.length;++r<o;){var i=t[r],a=e(i);if(null!=a&&(void 0===c?a==a&&!Object(qi.a)(a):n(a,c)))var c=a,u=i}return u};var Di=function(t,e){return t>e};var Mi=function(t){return t&&t.length?Ai(t,Ee.a,Di):void 0},Fi=function t(e,n){if(!this||this.constructor!==t)return new t(e);if(void 0===e||"string"==typeof e)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(e),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],Si(this,n)};Fi.prototype.addSeq=function(t){this.seqs.push(t),this._reset()},Fi.prototype.removeSeq=function(t){"number"==typeof t?this.seqs.splice(t,1):Pi(this.seqs,function(e,n){t===e&&this.seqs.splice(n,1)}.bind(this)),this._reset()},Fi.prototype.addSeqs=function(t){t.forEach(function(t){this.addSeq(t)}.bind(this))},Fi.prototype.resetSeqs=function(t){if(this.seqs=[],!t instanceof Array||"at"in t){this.mseqs=t;var e=function(){var t=this.mseqs.pluck("seq");this.resetSeqs(t)};t.on("add change reset ",e,this),e.call(this)}else this.addSeqs(t),this._reset()};var Li=["consensus","frequency","maxLength","ic","gaps"];Fi.prototype._reset=function(){for(var t=0;t<Li.length;t++)this["_"+Li[t]]=void 0;this._identity=void 0,this._background=void 0},Fi.prototype.setBackground=function(t){this._useBackground=t,this._reset()},Fi.prototype.useBackground=function(){this.setBackground(!0)},Fi.prototype.setDNA=function(){this.alphabetSize=4},Fi.prototype.setProtein=function(){this.alphabetSize=20},Li.forEach((function(t){Fi.prototype[t]=function(){return void 0===this["_"+t]&&(this["_"+t]=this[t+"Calc"]()),this["_"+t]}})),Fi.prototype.identity=function(t){var e;return(void 0===this._identity||t)&&(e=this.identityCalc(t),this._identity=void 0),this._identity||e},Fi.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},Fi.prototype.frequencyCalc=function(t){var e,n;e=new Array(this.maxLength()),n=new Array(this.seqs.length);var r=this.ignoredChars;return void 0!==t&&t.all&&(r=[]),Pi(this.seqs,(function(t){Pi(t,(function(t,o){r.indexOf(t)>=0||(void 0===e[o]&&(e[o]={}),void 0===e[o][t]&&(e[o][t]=0),e[o][t]++,void 0===n[o]&&(n[o]=0),n[o]++)}))})),Pi(e,(function(t,r){return Pi(t,(function(t,o){return e[r][o]=t/n[r]}))})),this._frequency=e,e},Fi.prototype.backgroundCalc=function(){var t={},e=0;return Pi(this.seqs,(function(n){Pi(n,(function(n){return void 0===t[n]&&(t[n]=0),t[n]++,e++}))})),t=Ei(t,(function(t){return t/e})),this._background=t,t},Fi.prototype.icCalc=function(){var t=this.frequency();if(this._useBackground)var e=this.background();var n=this.ignoredChars,r=this._useBackground,o=ki(t,(function(t){return en(t,(function(t,o,i){return n.indexOf(i)>=0?t:(r&&(o/=e[i]),t-o*(Math.log(o)/Math.log(2)))}),0)}));return this._ic=o,o},Fi.prototype.conservation=function(t){var e=this.ic(),n=this.gaps(),r=this;t=t||this.alphabetSize;var o=Math.log(t)/Math.log(2),i=0;return ki(e,(function(t){var e=o-t;return r.useGaps&&(e*=1-n[i++]),e}))},Fi.prototype.conservResidue=function(t){var e,n=t?t.alphabetSize:void 0,r=this.ignoredChars;e=void 0!==t&&t.scaled?this.scale(this.conservation(n)):this.conservation(n);var o,i=this.frequency();return ki(i,(function(t,n){o=Ri(o(t),(function(t){return r.indexOf(t)>=0}));var i={};return Pi(o,(function(r){i[r]=t[r]*e[n]})),i}))},Fi.prototype.conservResidue2=function(t){var e=this.frequency(),n=this.conservation(t),r=this.background();return ki(e,(function(t,o){return ki(t,(function(t){var i=en(e[o],(function(t,e){return t+e/r[o]}),0);return t/r[o]/i*n[o]}),0)}))},Fi.prototype.scale=function(t,e){e=e||this.alphabetSize;var n=Math.log(e)/Math.log(2);return ki(t,(function(t){return t/n}))},Fi.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:Mi(this.seqs,(function(t){return t.length})).length},Fi.prototype.consensusCalc=function(){var t=new Array(this.maxLength());return Pi(this.seqs,(function(e){Pi(e,(function(e,n){void 0===t[n]&&(t[n]={}),void 0===t[n][e]&&(t[n][e]=0),t[n][e]++}))})),this._consensus=en(t,(function(t,e){var n;return n=Object.keys(e),t+Mi(n,(function(t){return e[t]}))}),""),this._consensus},Fi.prototype.identityCalc=function(t){var e=t||this.consensus();return this._identity=this.seqs.map((function(t){for(var n=0,r=0,o=0;o<t.length;o++)"-"!==t[o]&&"-"!==e[o]&&(r++,t[o]===e[o]&&n++);return n/r})),this._identity},Fi.prototype.gapsCalc=function(){var t=this.maxLength();if(t<=1||void 0===t)return[];var e=new Array(this.maxLength());return Pi(this.seqs,(function(t){Pi(t,(function(t,n){void 0===e[n]&&(e[n]={g:0,t:0}),t="-"===t?"g":"t",e[n][t]++}))})),this._gaps=ki(e,(function(t){return t.g/(t.g+t.t)})),this._gaps};var Hi=Fi;function Bi(t){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wi(){return(Wi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ii(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ii(Object(n),!0).forEach((function(e){Ni(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ni(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vi(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ui(t,e,n){return e&&Xi(t.prototype,e),n&&Xi(t,n),t}function Gi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ki(t,e)}function Ki(t,e){return(Ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ji(t);if(e){var o=Ji(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qi(this,n)}}function Qi(t,e){return!e||"object"!==Bi(e)&&"function"!=typeof e?$i(t):e}function $i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ji(t){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ta=function(t){Gi(n,t);var e=Zi(n);function n(t){var r;return Yi(this,n),(r=e.call(this,t)).cache=function(){},r.initializeColumnHeights(),ho($i(r),"createBar"),r.bar=po((function(t){return Lt(t,r.constructor.barAttributes)}),r.columnHeights,r.createBar),r}return Ui(n,[{key:"createBar",value:function(t,e){return this.cache=function(){},function(t){var e=t.columnHeights,n=t.tileWidth,i=t.height,a=t.fillColor;return t.barStyle,t.barAttributes,function(t){Gi(c,t);var r=Zi(c);function c(){return Yi(this,c),r.apply(this,arguments)}return Ui(c,[{key:"render",value:function(){var t=this.props,r=t.index,c=Vi(t,["index"]);return c.style={height:Math.round(e[r]*i),width:n,display:"inline-block",textAlign:"center",backgroundColor:a},o.a.createElement("div",c)}}]),c}(r.PureComponent)}(zi(zi({},t),{},{columnHeights:e}))}},{key:"initializeColumnHeights",value:function(){this.columnHeights=so((function(t){return t.sequences}),(function(t){return t.method}),(function(t,e){var n,r=Hi(t.map((function(t){return t.sequence})));switch(e){case"conservation":n=r.scale(r.conservation());break;case"information-content":n=r.scale(r.ic());break;default:console.error(e+"is an invalid aggregation method for <OverviewBar />")}return n})).bind(this)}},{key:"render",value:function(){var t=this.props,e=t.cacheElements,n=(t.height,t.method,t.fillColor,t.dispatch,t.barStyle,t.barAttributes,Vi(t,["cacheElements","height","method","fillColor","dispatch","barStyle","barAttributes"]));return o.a.createElement(ji,Wi({tileComponent:this.bar(this.props),cacheElements:e,componentCache:this.cache},n))}}]),n}(r.PureComponent);Ni(ta,"barAttributes",["tileWidth","height","fillColor","barStyle","barAttributes"]),ta.defaultProps={height:50,fillColor:"#999999",method:"conservation",cacheElements:10},ta.propTypes={method:v.a.oneOf(["information-content","conservation"]),height:v.a.number,fillColor:v.a.string,style:v.a.object,barStyle:v.a.object,barAttributes:v.a.object};var ea=no((function(t){return{sequences:t.sequences.raw,maxLength:t.sequences.maxLength,width:t.props.width,tileWidth:t.props.tileWidth,nrXTiles:t.sequenceStats.nrXTiles}}))(ta);function na(t){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ra(){return(ra=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function oa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ia(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oa(Object(n),!0).forEach((function(e){aa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function aa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ca(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function ua(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function la(t,e,n){return e&&sa(t.prototype,e),n&&sa(t,n),t}function fa(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pa(t,e)}function pa(t,e){return(pa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ha(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=da(t);if(e){var o=da(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ya(this,n)}}function ya(t,e){return!e||"object"!==na(e)&&"function"!=typeof e?ba(t):e}function ba(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function da(t){return(da=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var va=function(t){fa(n,t);var e=ha(n);function n(t){var r;return ua(this,n),(r=e.call(this,t)).cache=function(){},ho(ba(r),"createMarker"),r.marker=po(eo(Lt,r.constructor.markerAttributes),r.createMarker),r}return la(n,[{key:"createMarker",value:function(t){return this.cache=function(){},n=(e=t).markerSteps,i=e.startIndex,a=e.tileWidth,e.font,c=e.markerComponent,u=e.markerStyle,s=e.markerAttributes,function(t){fa(r,t);var e=ha(r);function r(){return ua(this,r),e.apply(this,arguments)}return la(r,[{key:"render",value:function(){var t,e=this.props,r=e.index,l=ca(e,["index"]);if(c){var f=c;return o.a.createElement(f,{index:r})}l.style=ia({width:a,display:"inline-block",textAlign:"center"},u),t=r%n==0?r+0+i:".";var p=ia(ia({},l),s);return o.a.createElement("div",p,t)}}]),r}(r.PureComponent);var e,n,i,a,c,u,s}},{key:"render",value:function(){var t=this.props,e=t.cacheElements,n=(t.markerSteps,t.startIndex,t.dispatch,t.markerComponent,t.markerStyle,ca(t,["cacheElements","markerSteps","startIndex","dispatch","markerComponent","markerStyle"]));return o.a.createElement(ji,ra({tileComponent:this.marker(this.props),cacheElements:e,componentCache:this.cache},n))}}]),n}(r.PureComponent);aa(va,"markerAttributes",["markerSteps","startIndex","tileWidth","markerComponent","markerStyle","markerAttributes"]),va.defaultProps={style:{font:"12px Arial"},height:15,markerSteps:2,startIndex:1,cacheElements:10,markerStyle:{}},va.propTypes={font:v.a.string,height:v.a.number,markerSteps:v.a.number,startIndex:v.a.number,markerComponent:v.a.oneOfType([v.a.object,v.a.func]),style:v.a.object,markerStyle:v.a.object,markerAttributes:v.a.object};var ma=no((function(t){return{sequences:t.sequences.raw,maxLength:t.sequences.maxLength,width:t.props.width,tileWidth:t.props.tileWidth,nrXTiles:t.sequenceStats.nrXTiles}}))(va);function ga(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Oa=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};ga(Oa,"rel",(function(t){if(void 0!==t.changedTouches)return Oa.rel(t.changedTouches[0]);var e=t.offsetX,n=t.offsetY;if(void 0===e){var r=t.target||t.srcElement,o=r.getBoundingClientRect();if(e=t.clientX-o.left,n=t.clientY-o.top,void 0===e&&(e=t.pageX-r.offsetLeft,n=t.pageY-r.offsetTop,void 0===e))return void console.log(t,"No mouse event defined.")}return[e,n]})),ga(Oa,"abs",(function(t){if(void 0!==t.changedTouches)return Oa.abs(t.changedTouches[0]);var e=t.pageX,n=t.pageY;return void 0===e&&(e=t.layerX,n=t.layerY),void 0===e&&(e=t.clientX,n=t.clientY),void 0===e&&(e=t.x,n=t.y),[e,n]})),ga(Oa,"wheelDelta",(function(t){var e=[t.deltaX,t.deltaY];return void 0===e[0]&&t.mozMovementX&&(e=[0,t.mozMovementX]),isNaN(e[0])&&(e[0]=0),isNaN(e[1])&&(e[1]=0),e}));var wa=Oa,ja=n(800),Sa=n.n(ja),Pa=n(801),Ea=n.n(Pa),_a=n(802),ka=n.n(_a);function xa(t){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ta(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ca(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ra(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Aa(t,e){return(Aa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Da(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fa(t);if(e){var o=Fa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ma(this,n)}}function Ma(t,e){return!e||"object"!==xa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fa(t){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function La(){return o.a.createElement("svg",{height:"1em",width:"1.542em",viewBox:"0 0 1542 1000"},o.a.createElement("path",{d:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)",fill:"rgb(68, 122, 219)"}))}var Ha=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Aa(t,e)}(a,t);var e,n,r,i=Da(a);function a(){return Ra(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ta(Object(n),!0).forEach((function(e){Ca(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({opacity:.9,backgroundColor:"white"},this.props.style),e={position:"relative",fontSize:"16px",padding:"3px 4px",cursor:"pointer",lineHeight:"normal",textDecoration:"none",color:"black"};return o.a.createElement("div",{style:t},o.a.createElement("div",{style:e},o.a.createElement(Ea.a,{width:20,height:20})),o.a.createElement("div",{style:e},o.a.createElement(ka.a,{width:20,height:20})),o.a.createElement("div",{style:e},o.a.createElement(Sa.a,{width:20,height:20})),o.a.createElement("a",{href:"https://plot.ly/",target:"_blank",rel:"noreferrer noopener","data-title":"Produced with Plotly",style:e},o.a.createElement(La,{width:20,height:20})))}}])&&qa(e.prototype,n),r&&qa(e,r),a}(r.PureComponent);function Ba(t){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ia(t,e){return(Ia=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function za(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ya(t);if(e){var o=Ya(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Na(this,n)}}function Na(t,e){return!e||"object"!==Ba(e)&&"function"!=typeof e?Va(t):e}function Va(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ya(t){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ua=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ia(t,e)}(a,t);var e,n,r,i=za(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Xa(Va(e=i.call(this,t)),"onScroll",(function(t){Fn(Va(e),(function(){var t=e.shouldShow(),n=t.showX,r=t.showY,o={xMovement:e.el.current.scrollLeft-(n?e.props.position.xPos:0),yMovement:e.el.current.scrollTop-(r?e.props.position.yPos:0)};e.props.positionDispatch(Kt(o))}))})),Xa(Va(e),"updateScrollPosition",(function(){e.el&&e.el.current&&(e.el.current.scrollTop=e.props.position.yPos,e.el.current.scrollLeft=e.props.position.xPos)})),e.el=o.a.createRef(),e}return e=a,(n=[{key:"checkOverflow",value:function(t,e){var n=e.withX,r=void 0!==n&&n,o=e.withY,i=void 0!==o&&o,a=!1;switch(t){case"auto":r&&(a|=this.props.fullWidth>this.props.width),i&&(a|=this.props.fullHeight>this.props.height);break;case"hidden":a=!1;break;case"scroll":a=!0}return a}},{key:"shouldShow",value:function(){var t={withX:!0},e={withY:!0},n="initial"===this.props.overflowX?this.props.overflow:this.props.overflowX,r="initial"===this.props.overflowY?this.props.overflow:this.props.overflowY;return{showX:this.checkOverflow(n,t)&&this.checkOverflow(this.props.overflow,t),showY:this.checkOverflow(r,e)&&this.checkOverflow(this.props.overflow,e)}}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.fullWidth,i=t.fullHeight,a={position:"absolute",overflowX:"auto",overflowY:"auto",width:e,height:n,transform:""},c=this.shouldShow(),u=c.showX,s=c.showY,l={height:1,width:1};return s||u?(u&&(l.width=r,a.overflowX="scroll","top"===this.props.positionX&&(a.transform+="rotateX(180deg)")),s&&(l.height=i,a.overflowY="scroll","left"===this.props.positionY&&(a.transform+="rotateY(180deg)")),o.a.createElement("div",{style:a,onScroll:this.onScroll,ref:this.el},o.a.createElement("div",{style:l}))):o.a.createElement("div",null)}}])&&Wa(e.prototype,n),r&&Wa(e,r),a}(r.PureComponent);Ua.defaultProps={overflow:"auto",overflowX:"initial",overflowY:"initial",positionX:"bottom",positionY:"right",scrollBarWidth:5},Ua.propTypes={overflow:v.a.oneOf(["hidden","auto","scroll"]),overflowX:v.a.oneOf(["hidden","auto","scroll","initial"]),overflowY:v.a.oneOf(["hidden","auto","scroll","initial"]),width:v.a.number.isRequired,height:v.a.number.isRequired,fullHeight:v.a.number.isRequired,fullWidth:v.a.number.isRequired,positionX:v.a.oneOf(["top","bottom"]),positionY:v.a.oneOf(["left","right"])};var Ga=xo(Ua,{withX:!0,withY:!0});function Ka(t){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Za(){return(Za=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Qa(t){return function(t){if(Array.isArray(t))return $a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return $a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ja(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ja(Object(n),!0).forEach((function(e){cc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ec(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nc(t,e){return(nc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ac(t);if(e){var o=ac(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oc(this,n)}}function oc(t,e){return!e||"object"!==Ka(e)&&"function"!=typeof e?ic(t):e}function ic(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ac(t){return(ac=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var uc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nc(t,e)}(a,t);var e,n,r,i=rc(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),cc(ic(e=i.call(this,t)),"state",{mouse:{isMouseWithin:!1,cursorState:"grab"}}),cc(ic(e),"currentContext",1),e.canvasBuffers=[o.a.createRef(),o.a.createRef()],e.container=o.a.createRef(),ho(ic(e),"onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onClick","onDoubleClick","draw"),e.onViewpointChange(),e.mouseMovePosition=void 0,e.touchMovePosition=void 0,e.isInDragPhase=void 0,e.mouseHasMoved=void 0,e}return e=a,(n=[{key:"drawScene",value:function(){console.warn("drawScene is unimplemented.")}},{key:"onPositionUpdate",value:function(){console.warn("onPositionUpdate is unimplemented.")}},{key:"onViewpointChange",value:function(){}},{key:"componentDidMount",value:function(){this.ctxBuffers=[this.canvasBuffers[0].current.getContext("2d",{alpha:"false"}),this.canvasBuffers[1].current.getContext("2d",{alpha:"false"})],this.swapContexts(),this.container.current.addEventListener("mouseenter",this.onMouseEnter),this.container.current.addEventListener("mouseleave",this.onMouseLeave),this.container.current.addEventListener("touchstart",this.onTouchStart),this.container.current.addEventListener("touchmove",this.onTouchMove),this.container.current.addEventListener("touchend",this.onTouchEnd),this.container.current.addEventListener("touchcancel",this.onTouchCancel),this.container.current.addEventListener("click",this.onClick),this.container.current.addEventListener("dblclick",this.onDoubleClick),this.props.sequenceDisableDragging||(this.container.current.addEventListener("mousedown",this.onMouseDown),this.container.current.addEventListener("mouseup",this.onMouseUp),this.container.current.addEventListener("mousemove",this.onMouseMove))}},{key:"swapContexts",value:function(){var t=this.currentContext;this.canvasBuffers[t].current.style.visibility="visible";var e=(this.currentContext+1)%2;this.canvasBuffers[e].current.style.visibility="hidden",this.currentContext=e,this.ctx=this.ctxBuffers[e]}},{key:"draw",value:function(){this.ctx&&(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.onViewpointChange(),this.drawScene(),this.swapContexts())}},{key:"onClick",value:function(t){}},{key:"onDoubleClick",value:function(t){}},{key:"onMouseDown",value:function(t){this.startDragPhase(t)}},{key:"onMouseMove",value:function(t){var e=this;if(void 0!==this.isInDragPhase){this.mouseHasMoved=!0;var n=wa.abs(t),r=this.mouseMovePosition;Fn(this,(function(){e.mouseMovePosition=n,e.onPositionUpdate(r,e.mouseMovePosition)}))}}},{key:"onMouseUp",value:function(){this.stopDragPhase()}},{key:"onMouseEnter",value:function(){this.setState((function(t){return{mouse:tc(tc({},t.mouse),{},{isMouseWithin:!0})}}))}},{key:"onMouseLeave",value:function(){this.stopHoverPhase(),this.stopDragPhase()}},{key:"onTouchStart",value:function(t){console.log("touchstart",t),this.startDragPhase(t)}},{key:"onTouchMove",value:function(t){void 0!==this.isInDragPhase&&(console.log("touchmove",t),this.onMouseMove(t))}},{key:"onTouchEnd",value:function(){this.stopDragPhase()}},{key:"onTouchCancel",value:function(){this.stopDragPhase()}},{key:"startDragPhase",value:function(t){this.mouseMovePosition=wa.abs(t),this.mouseHasMoved=void 0,this.isInDragPhase=!0,this.setState((function(t){return{mouse:tc(tc({},t.mouse),{},{cursorState:"grabbing"})}}))}},{key:"stopHoverPhase",value:function(){this.setState((function(t){return{mouse:tc(tc({},t.mouse),{},{isMouseWithin:!1})}}))}},{key:"stopDragPhase",value:function(){this.isInDragPhase=void 0,this.setState((function(t){return{mouse:tc(tc({},t.mouse),{},{cursorState:"grab"})}}))}},{key:"isEventWithinComponent",value:function(t){var e=wa.rel(t);return 0<=e[0]&&e[0]<=this.props.width&&0<=e[1]&&e[1]<=this.props.height}},{key:"componentWillUnmount",value:function(){this.container.current.removeEventListener("mouseenter",this.onMouseEnter),this.container.current.removeEventListener("mouseleave",this.onMouseLeave),this.container.current.removeEventListener("click",this.onClick),this.container.current.removeEventListener("dblclick",this.onDoubleClick),this.container.current.removeEventListener("touchstart",this.onTouchStart),this.container.current.removeEventListener("touchend",this.onTouchEnd),this.container.current.removeEventListener("touchcancel",this.onTouchCancel),this.container.current.removeEventListener("touchmove",this.onTouchMove),this.props.sequenceDisableDragging||(this.container.current.removeEventListener("mouseup",this.onMouseUp),this.container.current.removeEventListener("mousedown",this.onMouseDown),this.container.current.removeEventListener("mousemove",this.onMouseMove)),this.stopDragPhase()}},{key:"render",value:function(){var t=tc(tc({width:this.props.width,height:this.props.height},this.props.style),{},{cursor:this.state.mouse.cursorState,position:"relative"}),e=this.props.showModBar&&this.state.mouse.isMouseWithin,n={position:"absolute",left:0,top:0},r=Se(this.props,[].concat(Qa(this.constructor.propKeys),["tileWidth","tileHeight","colorScheme","nrXTiles","nrYTiles","dispatch","sequences","fullWidth","fullHeight","position","positionDispatch"]));return o.a.createElement("div",Za({style:t,ref:this.container},r),e&&o.a.createElement(Ha,{style:{position:"absolute",right:0,opacity:.8}}," Plotly Modbar"),o.a.createElement("canvas",{style:n,ref:this.canvasBuffers[0],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),o.a.createElement("canvas",{style:n,ref:this.canvasBuffers[1],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),o.a.createElement(Ga,{overflow:this.props.overflow,overflowX:this.props.overflowX,overflowY:this.props.overflowY,positionX:this.props.scrollBarPositionX,positionY:this.props.scrollBarPositionY,width:this.props.width,height:this.props.height,fullWidth:this.props.fullWidth,fullHeight:this.props.fullHeight}))}}])&&ec(e.prototype,n),r&&ec(e,r),a}(r.PureComponent);cc(uc,"defaultProps",{engine:"canvas",showModBar:!0});var sc=uc;function lc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var fc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.state={}}var e,n,r;return e=t,(n=[{key:"updateEl",value:function(t){this.el=t}},{key:"font",value:function(t){this.state.font=t}},{key:"globalAlpha",value:function(t){this.state.globalAlpha=t}},{key:"startDrawingFrame",value:function(){this.clear()}},{key:"endDrawingFrame",value:function(){}},{key:"save",value:function(){}},{key:"restore",value:function(){}}])&&lc(e.prototype,n),r&&lc(e,r),t}();function pc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var hc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache={},this.cacheHeight=0,this.cacheWidth=0}var e,n,r;return e=t,(n=[{key:"getFontTile",value:function(t,e,n,r){return e===this.cacheWidth&&n===this.cacheHeight&&r===this.font||(this.updateDimensions(e,n),this.font=r),void 0===this.cache[t]&&this.createTile(t,e,n),this.cache[t]}},{key:"createTile",value:function(t,e,n,r){var o=this.cache[t]=document.createElement("canvas");return o.width=e,o.height=n,this.ctx=o.getContext("2d"),this.ctx.font=this.font+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(t,e/2,n/2,e,r)}},{key:"updateDimensions",value:function(t,e){this.invalidate(),this.cacheWidth=t,this.cacheHeight=e}},{key:"invalidate",value:function(){this.cache={}}}])&&pc(e.prototype,n),r&&pc(e,r),t}();function yc(t){return(yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dc(t,e){return(dc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gc(t);if(e){var o=gc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mc(this,n)}}function mc(t,e){return!e||"object"!==yc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gc(t){return(gc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Oc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dc(t,e)}(i,t);var e,n,r,o=vc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).ctx=t.getContext("2d"),e.cache=new hc,e}return e=i,(n=[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"fillRect",value:function(t,e,n,r){this.ctx.fillRect(t,e,n,r)}},{key:"fillText",value:function(t,e,n,r,o){return this.ctx.drawImage(this.cache.getFontTile(t,r,o,this.ctx.font),e,n,r,o)}},{key:"font",value:function(t){this.ctx.font=t}},{key:"fillStyle",value:function(t){this.ctx.fillStyle=t}},{key:"globalAlpha",value:function(t){this.ctx.globalAlpha=t}},{key:"save",value:function(){this.ctx.save()}},{key:"restore",value:function(){this.ctx.restore()}}])&&bc(e.prototype,n),r&&bc(e,r),i}(fc);function wc(t){return(wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sc(t,e){return(Sc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_c(t);if(e){var o=_c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ec(this,n)}}function Ec(t,e){return!e||"object"!==wc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _c(t){return(_c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kc,xc,Tc,Cc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sc(t,e)}(a,t);var e,n,r,i=Pc(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).canvas=o.a.createRef(),e}return e=a,(n=[{key:"componentDidMount",value:function(){this.ctx=new Oc(this.canvas.current),this.draw()}},{key:"componentDidUpdate",value:function(){this._draw()}},{key:"_draw",value:function(){this.ctx&&(this.ctx.startDrawingFrame(),this.ctx.save(),this.draw(),this.ctx.restore(),this.ctx.endDrawingFrame())}},{key:"draw",value:function(){console.error("Implement me.")}},{key:"render",value:function(){return o.a.createElement("div",{style:this.props.style},o.a.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height}))}}])&&jc(e.prototype,n),r&&jc(e,r),a}(r.PureComponent);function Rc(t){return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ac(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dc(t,e){return(Dc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lc(t);if(e){var o=Lc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fc(this,n)}}function Fc(t,e){return!e||"object"!==Rc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lc(t){return(Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Tc={engine:"canvas"},(xc="defaultProps")in(kc=Cc)?Object.defineProperty(kc,xc,{value:Tc,enumerable:!0,configurable:!0,writable:!0}):kc[xc]=Tc,Cc.propTypes={width:v.a.number.isRequired,height:v.a.number.isRequired,style:v.a.object,engine:v.a.oneOf(["canvas","webgl"])};var Hc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dc(t,e)}(i,t);var e,n,r,o=Mc(i);function i(){return qc(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"drawTile",value:function(t){var e=this,n=t.row,r=t.column,o=this.props.tileWidth,i=this.props.tileHeight,a=i*(n-this.props.startYTile),c=o*(r-this.props.startXTile);if(!(n>=this.props.sequences.raw.length)){var u=this.props.sequences.raw[n].sequence;if(!(r>=u.length)){var s=u[r];if(void 0!==s){var l=this.props.colorScheme.getColor(s,r),f=this.getOverlayFactor(s,r),p="".concat(s,"-").concat(l,"-").concat(f),h=this.props.residueTileCache.createTile({key:p,tileWidth:o,tileHeight:i,create:function(t){var o=t.canvas;return e.drawResidue({text:s,canvas:o,row:n,column:r,colorScheme:l,overlayFactor:f})}});this.props.ctx.drawImage(h,0,0,o,i,c,a,o,i)}}}}},{key:"getOverlayFactor",value:function(t,e){if(!this.props.overlayConservation||!this.props.conservation)return 1;var n=this.props.conservation.map[e][t]||0;return Math.floor(5*n)/5}},{key:"drawResidue",value:function(t){t.row,t.column;var e=t.canvas,n=t.colorScheme,r=t.text,o=t.overlayFactor,i=void 0===o?1:o;e.globalAlpha=.7*i,e.fillStyle=n,e.fillRect(0,0,this.props.tileWidth,this.props.tileHeight),this.props.tileWidth<4||(this.props.border&&(e.globalAlpha=1,e.lineWidth=this.props.borderWidth,e.strokeStyle=this.props.borderStyle,e.strokeRect(0,0,this.props.tileWidth,this.props.tileHeight)),e.globalAlpha=Math.min(1,1/6*this.props.tileWidth+-1/6*4),e.fillStyle=this.props.textColor,e.font=this.props.textFont,e.textBaseline="middle",e.textAlign="center",e.fillText(r,this.props.tileWidth/2,this.props.tileHeight/2+1,this.props.tileWidth))}},{key:"draw",value:function(t){this.props=t;for(var e=this.props.startYTile;e<this.props.endYTile;e++)for(var n=this.props.startXTile;n<this.props.endXTile;n++)this.drawTile({row:e,column:n})}}])&&Ac(e.prototype,n),r&&Ac(e,r),i}(Cc);var Bc=function(t,e){return t<e};var Wc=function(t,e){return t&&t.length?Ai(t,Object(Je.a)(e,2),Bc):void 0};function Ic(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Nc=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.maxElements;Ic(this,t),this.maxElements=n||200,this.invalidate()}var e,n,r;return e=t,(n=[{key:"createTile",value:function(t){var e=this,n=t.key,r=t.tileWidth,o=t.tileHeight,i=t.create;if(n in this.cache)return this.cache[n].value;if(this.cachedElements>=this.maxElements){var a=Wc(Object.keys(this.cache),(function(t){return e.cache[t].insertionTime}));delete this.cache[a]}var c=document.createElement("canvas");this.cache[n]={value:c,insertionTime:Date.now()},c.width=r,c.height=o;var u=c.getContext("2d");return this.cachedElements++,i({canvas:u}),c}},{key:"updateTileSpecs",value:function(t){return!fo(t,this.spec)&&(this.invalidate(),this.spec=t,!0)}},{key:"invalidate",value:function(){this.cache={},this.spec={},this.cachedElements=0}}])&&zc(e.prototype,n),r&&zc(e,r),t}();function Vc(t,e){return t-t%e}function Yc(t){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Uc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uc(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Kc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zc(t,e){return(Zc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eu(t);if(e){var o=eu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $c(this,n)}}function $c(t,e){return!e||"object"!==Yc(e)&&"function"!=typeof e?Jc(t):e}function Jc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tu(t,e,n){return(tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eu(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function eu(t){return(eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ru=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zc(t,e)}(i,t);var e,n,r,o=Qc(i);function i(t){var e,n,r,a,c,u,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),nu(Jc(s=o.call(this,t)),"renderTile",(function(t){var e=t.row,n=t.column,r=e+"-"+n;return s.tileCache.createTile({key:r,tileWidth:s.props.tileWidth*s.props.xGridSize,tileHeight:s.props.tileHeight*s.props.yGridSize,create:function(t){var r=t.canvas;s.tilingGridManager.draw(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gc(Object(n),!0).forEach((function(e){nu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({ctx:r,startYTile:e,startXTile:n,residueTileCache:s.residueTileCache,endYTile:e+s.props.yGridSize,endXTile:n+s.props.xGridSize},Lt(s.props,["sequences","colorScheme","textFont","textColor","tileHeight","tileWidth","border","borderWidth","borderColor","overlayConservation","conservation"])))}})})),nu(Jc(s),"onPositionUpdate",(function(t,e){var n={xMovement:t[0]-e[0],yMovement:t[1]-e[1]};s.sendEvent("onPositionUpdate",e),s.props.positionDispatch(Kt(n))})),nu(Jc(s),"updateScrollPosition",(function(){s.draw()})),nu(Jc(s),"onMouseMove",(function(t){if(void 0===s.isInDragPhase&&s.hasOnMouseMoveProps()){var r=s.currentPointerPosition(t),o=s.currentMouseSequencePosition;if(!rn(o,r)&&(void 0!==o&&s.sendEvent("onResidueMouseLeave",o),s.currentMouseSequencePosition=r,s.sendEvent("onResidueMouseEnter",r),s.props.features&&s.props.features.length>0)){var a=s.mouseOverFeatureIds||[],c=s.sequencePositionToFeatureIds(r);rn(a,c)||(s.mouseOverFeatureIds=c,tu((e=Jc(s),eu(i.prototype)),"draw",e).call(e))}}tu((n=Jc(s),eu(i.prototype)),"onMouseMove",n).call(n,t)})),nu(Jc(s),"onMouseLeave",(function(t){s.sendEvent("onResidueMouseLeave",s.currentMouseSequencePosition),s.currentMouseSequencePosition=void 0,s.mouseOverFeatureIds&&(s.mouseOverFeatureIds=void 0,tu((r=Jc(s),eu(i.prototype)),"draw",r).call(r)),tu((a=Jc(s),eu(i.prototype)),"onMouseLeave",a).call(a,t)})),nu(Jc(s),"onClick",(function(t){if(!s.mouseHasMoved){var e=s.currentPointerPosition(t);s.sendEvent("onResidueClick",e),s.props.features&&s.sequencePositionToFeatureIds(e).forEach((function(t){s.sendEvent("onFeatureClick",t)}))}tu((c=Jc(s),eu(i.prototype)),"onClick",c).call(c,t)})),nu(Jc(s),"onDoubleClick",(function(t){var e=s.currentPointerPosition(t);s.sendEvent("onResidueDoubleClick",e),tu((u=Jc(s),eu(i.prototype)),"onDoubleClick",u).call(u,t)})),s.tileCache=new Nc,s.residueTileCache=new Nc,s.tilingGridManager=new Hc,s}return e=i,(n=[{key:"hasOnMouseMoveProps",value:function(){return void 0!==this.props.onResidueMouseEnter||void 0!==this.props.onResidueMouseLeave||this.props.features&&this.props.features.length>0}},{key:"componentDidMount",value:function(){this.hasOnMouseMoveProps()&&this.container.current.addEventListener("mousemove",this.onMouseMove),tu(eu(i.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.hasOnMouseMoveProps()&&this.container.current.removeEventListener("mousemove",this.onMouseMove),tu(eu(i.prototype),"componentWillUnmount",this).call(this)}},{key:"drawScene",value:function(){var t=this.getTilePositions();this.updateTileSpecs(),this.drawTiles(t),this.drawHighlightedRegions(),this.ctx&&this.ctx.canvas.dispatchEvent(new CustomEvent("drawCompleted",{bubbles:!0}))}},{key:"getTilePositions",value:function(){var t=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),e=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),n=Math.min(this.props.sequences.length,e+this.props.nrYTiles+2*this.props.cacheElements);return{startXTile:t,startYTile:e,endXTile:Math.min(this.props.sequences.maxLength,t+this.props.nrXTiles+2*this.props.cacheElements),endYTile:n}}},{key:"drawTiles",value:function(t){for(var e=t.startXTile,n=t.startYTile,r=t.endXTile,o=t.endYTile,i=this.props.xGridSize,a=this.props.yGridSize,c=Vc(n,a),u=Vc(e,i),s=c;s<o;s+=a)for(var l=u;l<r;l+=i){var f=this.renderTile({row:s,column:l,canvas:this.ctx}),p=i*this.props.tileWidth,h=a*this.props.tileHeight,y=(s-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,b=(l-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset;this.ctx.drawImage(f,0,0,p,h,b,y,p,h)}}},{key:"drawHighlightedRegions",value:function(){var t=this;this.props.highlight&&this.drawHighligtedRegion(this.props.highlight),this.props.features&&this.props.features.forEach((function(e){t.drawHighligtedRegion(e)}))}},{key:"drawHighligtedRegion",value:function(t){var e;if(this.ctx&&t){var n=this.props.tileWidth*(1+t.residues.to-t.residues.from),r=this.props.tileHeight*(1+t.sequences.to-t.sequences.from),o=(t.sequences.from-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,i=(t.residues.from-1-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset,a=document.createElement("canvas");a.width=n,a.height=r;var c=a.getContext("2d"),u=null===(e=this.mouseOverFeatureIds)||void 0===e?void 0:e.some((function(e){return e===t.id}));c.globalAlpha=.3,c.fillStyle=u?"green":t.fillColor||"yellow",c.fillRect(0,0,n,r),c.globalAlpha=1,c.strokeStyle=u?"black ":t.borderColor||"red",c.lineWidth="2",c.rect(0,0,n,r),c.stroke(),this.ctx.drawImage(a,0,0,n,r,i,o,n,r)}}},{key:"positionToSequence",value:function(t){var e=this.props.sequences.raw,n=wt(Nt((this.props.position.yPos+t.yPos)/this.props.tileHeight),0,e.length-1),r=e[n],o=wt(Nt((this.props.position.xPos+t.xPos)/this.props.tileWidth),0,r.sequence.length-1);return{i:n,sequence:r,position:o,residue:r.sequence[o]}}},{key:"sequencePositionToFeatureIds",value:function(t){if(this.props.features)return this.props.features.filter((function(e){return e.id&&t.position>=e.residues.from-1&&t.position<=e.residues.to-1&&t.i>=e.sequences.from&&t.i<=e.sequences.to})).map((function(t){return t.id}))}},{key:"currentPointerPosition",value:function(t){var e=Xc(wa.rel(t),2),n=e[0],r=e[1];return this.positionToSequence({xPos:n,yPos:r})}},{key:"sendEvent",value:function(t,e){void 0!==this.props[t]&&this.props[t](e)}},{key:"componentWillUnmount",value:function(){this.tileCache.invalidate(),this.residueTileCache.invalidate()}},{key:"updateTileSpecs",value:function(){var t=["tileWidth","tileHeight","colorScheme","textFont","borderColor","overlayConservation","conservation"];this.tileCache.updateTileSpecs(Lt(this.props,[].concat(t,["xGridSize","yGridSize","sequences"]))),this.residueTileCache.updateTileSpecs(Lt(this.props,t))}},{key:"render",value:function(){return tu(eu(i.prototype),"render",this).call(this)}}])&&Kc(e.prototype,n),r&&Kc(e,r),i}(sc);ru.defaultProps={showModBar:!1,xGridSize:10,yGridSize:10,border:!1,borderColor:"black",borderWidth:1,cacheElements:20,textColor:"black",textFont:"18px Arial",overflow:"hidden",overflowX:"auto",overflowY:"auto",scrollBarPositionX:"bottom",scrollBarPositionY:"right",overlayConservation:!1,conservation:null},ru.propTypes={showModBar:v.a.bool,onResidueMouseEnter:v.a.func,onResidueMouseLeave:v.a.func,onResidueClick:v.a.func,onFeatureClick:v.a.func,highlight:v.a.object,features:v.a.arrayOf(v.a.object),onResidueDoubleClick:v.a.func,xGridSize:v.a.number.isRequired,yGridSize:v.a.number.isRequired,cacheElements:v.a.number.isRequired,border:v.a.bool,borderColor:v.a.string,borderWidth:v.a.number,textColor:v.a.string,textFont:v.a.string,overflow:v.a.oneOf(["hidden","auto","scroll"]),overflowX:v.a.oneOf(["hidden","auto","scroll","initial"]),overflowY:v.a.oneOf(["hidden","auto","scroll","initial"]),scrollBarPositionX:v.a.oneOf(["top","bottom"]),scrollBarPositionY:v.a.oneOf(["left","right"])},ru.propKeys=Object.keys(ru.propTypes);var ou=xo(ru,{withX:!0,withY:!0}),iu=no((function(t){var e=Math.min(t.props.width,t.sequences.maxLength*t.props.tileWidth),n=Math.min(t.props.height,t.sequences.length*t.props.tileHeight);return{sequences:t.sequences,width:e,height:n,tileWidth:t.props.tileWidth,tileHeight:t.props.tileHeight,colorScheme:t.props.colorScheme,overlayConservation:t.props.overlayConservation,conservation:t.props.overlayConservation?t.props.conservation:null,nrXTiles:t.sequenceStats.nrXTiles,nrYTiles:t.sequenceStats.nrYTiles,fullWidth:t.sequenceStats.fullWidth,fullHeight:t.sequenceStats.fullHeight}}))(ou),au=n(601);var cu=function(t,e){var n;return Object($e.a)(t,(function(t,r,o){return!(n=e(t,r,o))})),!!n};var uu=function(t,e,n){var r=Object(u.a)(t)?au.a:cu;return n&&Sn(t,e,n)&&(e=void 0),r(t,Object(Je.a)(e,3))};function su(t){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pu(t,e){return(pu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bu(t);if(e){var o=bu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yu(this,n)}}function yu(t,e){return!e||"object"!==su(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bu(t){return(bu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var du=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pu(t,e)}(i,t);var e,n,r,o=hu(i);function i(){return lu(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"shouldComponentUpdate",value:function(t){var e=this;return!(fo(this.props,t)&&uu(this.props.forwardedPropsKeys.map((function(n){return fo(e.props[n],t[n])}))))}}])&&fu(e.prototype,n),r&&fu(e,r),i}(r.Component);du.propTypes={forwardPropKeys:v.a.array};var vu=du;function mu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ou(t){return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wu(){return(wu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ju(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Su(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pu(t,e){return(Pu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Eu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ku(t);if(e){var o=ku(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _u(this,n)}}function _u(t,e){return!e||"object"!==Ou(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ku(t){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pu(t,e)}(a,t);var e,n,r,i=Eu(a);function a(){return ju(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t={paddingTop:this.props.tileHeight+50};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(si,wu({style:t},this.props.labelsProps)),o.a.createElement("div",null,o.a.createElement(ea,wu({height:50},this.props.overviewBarProps)),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(iu,this.props.sequenceViewerProps),o.a.createElement("div",{style:{height:10}})))}}])&&Su(e.prototype,n),r&&Su(e,r),a}(vu);xu.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mu(Object(n),!0).forEach((function(e){gu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},vu.propTypes);var Tu=no((function(t){return{tileHeight:t.props.tileHeight}}))(xu);function Cu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ru(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qu(t){return(qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Au(){return(Au=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Du(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fu(t,e){return(Fu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Bu(t);if(e){var o=Bu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hu(this,n)}}function Hu(t,e){return!e||"object"!==qu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bu(t){return(Bu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fu(t,e)}(a,t);var e,n,r,i=Lu(a);function a(){return Du(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t={paddingTop:this.props.tileHeight+50};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",null,o.a.createElement(ea,Au({height:50},this.props.overviewBarProps)),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(iu,this.props.sequenceViewerProps)),o.a.createElement(si,Au({style:t},this.props.labelsProps)))}}])&&Mu(e.prototype,n),r&&Mu(e,r),a}(vu);Wu.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cu(Object(n),!0).forEach((function(e){Ru(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},vu.propTypes);var Iu=no((function(t){return{tileHeight:t.props.tileHeight}}))(Wu);function zu(t){return(zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nu(){return(Nu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Vu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xu(t,e){return(Xu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Uu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ku(t);if(e){var o=Ku(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gu(this,n)}}function Gu(t,e){return!e||"object"!==zu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ku(t){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xu(t,e)}(a,t);var e,n,r,i=Uu(a);function a(){return Vu(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(si,this.props.labelsProps),o.a.createElement("div",null,o.a.createElement(iu,null),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement("br",null),o.a.createElement(ea,this.props.overviewBarProps),o.a.createElement("br",null),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(ea,null),o.a.createElement(ea,Nu({},this.props.overviewBarProps,{method:"information-content"}))))}}])&&Yu(e.prototype,n),r&&Yu(e,r),a}(vu);function Qu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ju(t){return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ts(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function es(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ns(t,e){return(ns=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=is(t);if(e){var o=is(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return os(this,n)}}function os(t,e){return!e||"object"!==Ju(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function is(t){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var as=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ns(t,e)}(a,t);var e,n,r,i=rs(a);function a(){return ts(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(iu,this.props.sequenceViewerProps))}}])&&es(e.prototype,n),r&&es(e,r),a}(vu);as.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qu(Object(n),!0).forEach((function(e){$u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},vu.propTypes);var cs=as;function us(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ss(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ls(t){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(){return(fs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ps(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ys(t,e){return(ys=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vs(t);if(e){var o=vs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ds(this,n)}}function ds(t,e){return!e||"object"!==ls(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vs(t){return(vs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ms=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ys(t,e)}(a,t);var e,n,r,i=bs(a);function a(){return ps(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t={paddingTop:this.props.tileHeight};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(si,{style:t}),o.a.createElement("div",null,o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(iu,this.props.sequenceViewerProps),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(ea,this.props.overviewBarProps),o.a.createElement("br",null),o.a.createElement(ma,this.props.positionBarProps)),o.a.createElement(si,fs({style:t},this.props.labelsProps)))}}])&&hs(e.prototype,n),r&&hs(e,r),a}(vu);ms.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?us(Object(n),!0).forEach((function(e){ss(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},vu.propTypes);var gs=no((function(t){return{tileHeight:t.props.tileHeight}}))(ms);function Os(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ws(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function js(t){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ss(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ps(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Es(t,e){return(Es=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xs(t);if(e){var o=xs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ks(this,n)}}function ks(t,e){return!e||"object"!==js(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xs(t){return(xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ts=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Es(t,e)}(a,t);var e,n,r,i=_s(a);function a(){return Ss(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){return o.a.createElement("div",{style:{display:"flex"}},this.props.labelsProps&&this.props.labelsProps.labelStyle&&o.a.createElement(si,this.props.labelsProps),o.a.createElement(iu,this.props.sequenceViewerProps))}}])&&Ps(e.prototype,n),r&&Ps(e,r),a}(vu);function Cs(t){return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rs(){return(Rs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function qs(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function As(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ds(t,e){return(Ds=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ms(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ls(t);if(e){var o=Ls(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fs(this,n)}}function Fs(t,e){return!e||"object"!==Cs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ls(t){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ts.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Os(Object(n),!0).forEach((function(e){ws(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},vu.propTypes);var Hs={basic:Tu,inverse:Iu,full:Zu,compact:cs,funky:gs,nightingale:Ts,default:Tu},Bs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ds(t,e)}(a,t);var e,n,r,i=Ms(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).el=o.a.createRef(),e.forwardedPropsKeys=Object.keys(e.constructor.propsToForward),e}return e=a,(n=[{key:"dispatchEvent",value:function(t){this.el.current.dispatchEvent(t)}},{key:"render",value:function(){var t=this.props,e=t.layout,n=qs(t,["layout"]);if(e in Hs){var r=Hs[e],i=nr(n,this.constructor.propsToForward),a=i.forward,c=i.other;return o.a.createElement("div",Rs({el:this.ref},c),o.a.createElement(r,Rs({},a,{forwardedPropsKeys:this.forwardedPropsKeys})))}console.error("$this.props.layout} is invalid. Please use one of ".concat(Object.keys(Hs)))}}])&&As(e.prototype,n),r&&As(e,r),a}(r.PureComponent);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Bs,"propsToForward",{sequenceViewerProps:{showModBar:er,onResidueMouseEnter:er,onResidueMouseLeave:er,onResidueClick:er,onResidueDoubleClick:er,highlight:er,features:er,onFeatureClick:er,onHighlightMouseEnter:er,onHighlightMouseLeave:er,sequenceBorder:"border",sequenceBorderColor:"borderColor",sequenceBorderWidth:"borderWidth",sequenceTextColor:"textColor",sequenceTextFont:"textFont",sequenceOverflow:"overflow",sequenceOverflowX:"overflowX",sequenceOverflowy:"overflowY",sequenceScrollBarPositionX:"scrollBarPositionX",sequenceScrollBarPositionY:"scrollBarPositionY",sequenceDisableDragging:er},labelsProps:{labelComponent:er,labelStyle:er,labelAttributes:er},positionBarProps:{markerSteps:er,markerStartIndex:"startIndex",markerComponent:er,markerStyle:er,markerAttributes:er},overviewBarProps:{barMethod:"method",barFillColor:"fillColor",barComponent:er,barStyle:er,barAttributes:er}}),Bs.defaultProps={layout:"default"},Bs.propTyes={layout:v.a.oneOf(Object.keys(Hs))};var Ws=Bs;function Is(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zs(t){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ns(){return(Ns=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Vs(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ys(Object(n),!0).forEach((function(e){Us(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Us(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ks(t,e){return(Ks=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Js(t);if(e){var o=Js(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qs(this,n)}}function Qs(t,e){return!e||"object"!==zs(e)&&"function"!=typeof e?$s(t):e}function $s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Js(t){return(Js=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tl={onResidueClick:"residueClick"},el=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ks(t,e)}(a,t);var e,n,r,i=Zs(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).el=o.a.createRef(),e._setupStores(),e.createDomHandler=Object(oe.a)(e.createDomHandler.bind($s(e))),e.forwardProps=po((function(t){return Se(t,["msaStore"])}),e.forwardProps.bind($s(e))),e}return e=a,(n=[{key:"_setupStores",value:function(){var t=this;this.positionStore=X(re),this.positionStore.dispatch(te.updateMainStore(this.props.msaStore.getState())),this.msaStoreUnsubscribe=this.props.msaStore.subscribe((function(){t.positionStore.dispatch(te.updateMainStore(t.props.msaStore.getState()))}))}},{key:"componentWillUnmount",value:function(){this.msaStoreUnsubscribe()}},{key:"getChildContext",value:function(){return{positionMSAStore:this.positionStore}}},{key:"createDomHandler",value:function(t){var e=this;return function(n){var r=new CustomEvent(t,{detail:n,bubbles:!0});e.el.current.dispatchEvent(r)}}},{key:"forwardProps",value:function(t){var e=this,n=Xs({},t);return ke(tl,(function(t,r){r in tl&&!(r in n)&&(n[r]=e.createDomHandler(t))})),n}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.msaStore,r=Vs(t,["children","msaStore"]);return e?o.a.createElement(S,{store:n},o.a.createElement("div",Ns({},r,{ref:this.el}),e)):o.a.createElement(S,{store:n},o.a.createElement("div",{ref:this.el},o.a.createElement(Ws,this.forwardProps(r))))}}])&&Gs(e.prototype,n),r&&Gs(e,r),a}(r.Component);el.childContextTypes={positionMSAStore:v.a.object},el.propTypes={sequences:v.a.arrayOf(Xe).isRequired,width:v.a.number,height:v.a.number,tileWidth:v.a.number,tileHeight:v.a.number,position:Ge,colorScheme:Ue,onResidueMouseEnter:v.a.func,onResidueMouseLeave:v.a.func,onResidueClick:v.a.func,onResidueDoubleClick:v.a.func,onFeatureClick:v.a.func,highlight:v.a.object,features:v.a.arrayOf(v.a.object),layout:v.a.oneOf(["basic","default","inverse","full","compact","funky","nightingale"]),sequenceBorder:v.a.bool,sequenceBorderColor:v.a.string,sequenceBorderWidth:v.a.number,sequenceTextColor:v.a.string,sequenceTextFont:v.a.string,sequenceOverflow:v.a.oneOf(["hidden","auto","scroll"]),sequenceOverflowX:v.a.oneOf(["hidden","auto","scroll","initial"]),sequenceOverflowY:v.a.oneOf(["hidden","auto","scroll","initial"]),sequenceScrollBarPositionX:v.a.oneOf(["top","bottom"]),sequenceScrollBarPositionY:v.a.oneOf(["left","right"]),labelComponent:v.a.oneOfType([v.a.object,v.a.func]),labelStyle:v.a.object,labelAttributes:v.a.object,markerSteps:v.a.number,markerStartIndex:v.a.number,markerComponent:v.a.oneOfType([v.a.object,v.a.func]),markerStyle:v.a.object,markerAttributes:v.a.object,barMethod:v.a.oneOf(["information-content","conservation"]),barFillColor:v.a.string,barStyle:v.a.object,barAttributes:v.a.object,msaStore:v.a.object};var nl,rl=tr(el);rl.defaultProps=Ze,rl.propTypes=Xs({},el.propTypes),el.propTypes=Se(el.propTypes,[].concat(function(t){if(Array.isArray(t))return Is(t)}(nl=Object.keys(Ke))||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(nl)||function(t,e){if(t){if("string"==typeof t)return Is(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Is(t,e):void 0}}(nl)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["sequences","position"]));var ol=rl;function il(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function al(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?il(Object(n),!0).forEach((function(e){cl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}al(al({},mt),te);var ul=ol,sl=n(569);function ll(t){return(ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fl(){return(fl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function pl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hl(t,e,n){return(hl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ml(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function yl(t,e){return(yl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ml(t);if(e){var o=ml(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dl(this,n)}}function dl(t,e){return!e||"object"!==ll(e)&&"function"!=typeof e?vl(t):e}function vl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ml(t){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ol(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gl(Object(n),!0).forEach((function(e){wl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jl={fontSize:"14px",boxSizing:"border-box",display:"flex",flexDirection:"column",flexShrink:0,justifyContent:"center"},Sl=Ol(Ol({},jl),{},{textAlign:"right",paddingRight:"0.25rem"}),Pl=Ol(Ol({},jl),{},{paddingLeft:"0.25rem"}),El=function(t){var e=t.children,n=t.width,r=t.tileHeight,i=t.sequence,a=t.style,c=t.excludeGaps,u=void 0===c||c,s=t.offsetStart,l=void 0!==s&&s;return o.a.createElement("div",{style:Ol(Ol({},a),{},{width:n,height:r})},e-(u&&function(t,e){return(t.slice(0,e-1).match(/-/g)||[]).length}(i.sequence,e))+(l&&i.start&&i.start))},_l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yl(t,e)}(c,t);var e,n,i,a=bl(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).setActiveTrack=t.setActiveTrack.bind(vl(t)),t}return e=c,i=[{key:"properties",get:function(){return{onActiveTrackChange:{type:Function}}}},{key:"observedAttributes",get:function(){return b.a.observedAttributes.concat(["labelwidth","activeLabel","colorscheme","calculate-conservation","overlay-conservation","sample-size-conservation","text-font","coordinate-width","coordinate-left","coordinate-right","coordinate-exclude-gaps","coordinate-offset-seq-start"])}}],(n=[{key:"connectedCallback",value:function(){hl(ml(c.prototype),"connectedCallback",this).call(this),this.hasAttribute("activeLabel")&&(this.activeLabel=this.getAttribute("activeLabel"))}},{key:"setActiveTrack",value:function(t){this.setAttribute("activeLabel",t),this.onActiveTrackChange&&this.onActiveTrackChange(t),this.refresh()}},{key:"getCoordinateWidth",value:function(){return(this["_coordinate-width"]||0)*(this.hasAttribute("coordinate-left")+this.hasAttribute("coordinate-right"))}},{key:"getColorMap",value:function(){var t;return(null==this||null===(t=this.el)||void 0===t?void 0:t.getColorMap())||{}}},{key:"refresh",value:function(){var t=this;!this.activeLabel&&this._data&&this._data[0]&&this.setActiveTrack(this._data[0].name);var e=this.getCoordinateWidth(),n={sequences:this._data,height:this._height,width:this.width-(this._labelwidth||0)-e,tileHeight:20,tileWidth:Math.max(1,this.getSingleBaseWidth()),colorScheme:this._colorscheme||"clustal",layout:"nightingale",sequenceOverflow:"scroll",sequenceOverflowX:"hidden",sequenceDisableDragging:!0,labelComponent:function(e){return function(t){var e=t.sequence,n=t.activeLabel,i=t.setActiveTrack,a={width:t.width,height:t.tileHeight,textAlign:"left",overflow:"hidden",display:"flex",alignItems:"center",fontWeight:"normal",fontSize:"14px",cursor:"pointer",boxSizing:"border-box",padding:"0 0.25rem",borderLeft:"0.2rem solid transparent",color:"#00639A",textTransform:"uppercase",flexShrink:0},c=Ol(Ol({},a),{},{fontWeight:"bold",borderLeft:"0.2rem solid #00639A"}),u=Object(r.useRef)(null);return Object(r.useEffect)((function(){u.current.addEventListener("click",(function(){return i(e.name)}))}),[u]),o.a.createElement("span",{style:e.name===n?c:a,ref:u},e.name)}({sequence:e.sequence,activeLabel:t.activeLabel,setActiveTrack:t.setActiveTrack,width:t._labelwidth,tileHeight:20})}};this.hasAttribute("calculate-conservation")&&(n.calculateConservation=!0),this.hasAttribute("overlay-conservation")&&(n.overlayConservation=!0),this["_sample-size-conservation"]>0&&(n.sampleSizeConservation=this["_sample-size-conservation"]),this["_text-font"]>0&&(n.sequenceTextFont=this.getAttribute("text-font")),this.hasAttribute("coordinate-left")&&(n.leftCoordinateComponent=function(e){var n=e.start,r=e.tileHeight,i=e.sequence;return o.a.createElement(El,{width:t["_coordinate-width"],tileHeight:r,sequence:i,style:Sl,excludeGaps:"true"==t.getAttribute("coordinate-exclude-gaps"),offsetStart:"true"==t.getAttribute("coordinate-offset-seq-start")},n)}),this.hasAttribute("coordinate-right")&&(n.rightCoordinateComponent=function(e){var n=e.end,r=e.tileHeight,i=e.sequence;return o.a.createElement(El,{width:t["_coordinate-width"],tileHeight:r,sequence:i,style:Pl,excludeGaps:"true"==t.getAttribute("coordinate-exclude-gaps"),offsetStart:"true"==t.getAttribute("coordinate-offset-seq-start")},n)}),pt.a.render(o.a.createElement(ul,fl({},n,{ref:function(e){return t.el=e}})),this),window.requestAnimationFrame((function(){t.el&&(t.el.updatePositionByResidue({aaPos:t._displaystart}),1>t.getSingleBaseWidth()&&t.dispatchEvent(new CustomEvent("change",{detail:{displaystart:t._displaystart,displayend:t._displaystart+t.xScale.range()[1]},bubbles:!0,cancelable:!0})))}))}},{key:"activeLabel",get:function(){return this.getAttribute("activeLabel")},set:function(t){this.setAttribute("activeLabel",t)}},{key:"data",set:function(t){var e=this;this._data=t,this.refresh(),window.requestAnimationFrame((function(){e.svg=Object(sl.l)(e).select("div")}))}},{key:"margin",get:function(){return{top:10,right:0,bottom:10,left:this._labelwidth+this["_coordinate-width"]||10}}}])&&pl(e.prototype,n),i&&pl(e,i),c}(b.a),kl=n(630),xl=n(631),Tl=n(111),Cl=n(49),Rl=n(803),ql=n.n(Rl),Al=n(154);function Dl(){return(Dl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ml(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Fl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fl(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ll=["aliphatic","aromatic","buried_index","charged","cinema","clustal","clustal2","helix_propensity","hydro","lesk","mae","negative","nucleotide","polar","positive","purine_pyrimidine","serine_threonine","strand_propensity","taylor","turn_propensity","zappo","conservation"],Hl=function(t){return Math.round(Math.random()*(t-1))},Bl=function(t,e,n){return"".concat(t.substring(0,n)).concat(e).concat(t.substring(n+1))},Wl=function(t,e){for(var n=t,r=0;r<e;r++){var o=Hl(t.length);n=Bl(n,"-",o)}return n},Il=null;e.default=function(){var t=Ml(Object(r.useState)("clustal"),2),e=t[0],n=t[1],i=Ml(Object(r.useState)(!1),2),a=i[0],c=i[1],u=Ml(Object(r.useState)(null),2),s=u[0],l=u[1],f=Ml(Object(r.useState)(!0),2),p=f[0],h=f[1],b=Ml(Object(r.useState)(!0),2),d=b[0],v=b[1],m=Ml(Object(r.useState)(!1),2),g=m[0],O=m[1],w=Ml(Object(r.useState)(!1),2),j=w[0],S=w[1],P=Object(r.useRef)(null),E=Ml(Object(r.useState)(""),2),_=E[0],k=E[1],x=function(t){return k("".concat(_,"\n").concat(t))},T="MAMYDDEFDTKASDLTFSPWVEVENWKDVTTRLRAIKFALQADRDKIPGVLSDLKTNCPYSAFKRFPDKSLYSVLSKEAVIAVAQIQSASGFKRRADEKNAVSGLVSVTPTQISQSASSSAATPVGLATVKPPRESDSAFQEDTFSYAKFDDASTAFHKALAYLEGLSLRPTYRRKFEKDMNVKWGGSGSAPSGAPAGGSSGSAPPTSGSSGSGAAPTPPPNP";Object(r.useEffect)((function(){for(var t=[],e=1;e<=400;e++){var n=Hl(T.length);t.push({name:"seq_".concat(e),sequence:Wl(Bl(T,"ACDEFGHIKLMNPQRSTVWY-"[Math.floor(Math.random()*"ACDEFGHIKLMNPQRSTVWY-".length)],n),20),start:1+Hl(T.length)})}P.current.data=t,P.current.addEventListener("conservationProgress",(function(t){return x("[conservationProgress]: ".concat(100*t.detail.progress,"%"))})),P.current.addEventListener("drawCompleted",(function(){var t=P.current.getColorMap(),e=t.name,n=t.map;e!==Il&&(e&&n&&x("[colors-".concat(e,"]:\n").concat(Object.entries(n).map((function(t){var e=Ml(t,2),n=e[0],r=e[1];return"\t".concat(n,": ").concat(r)})).join("\n"))),Il=e)})),P.current.onActiveTrackChange=function(t){console.log("on active track change:",t)}}),[]),Object(Tl.a)("protvista-msa",_l),Object(Tl.a)("protvista-navigation",kl.a),Object(Tl.a)("protvista-manager",xl.a);var C=function(t){n(t.target.value),x("[setColorScheme]: ".concat(t.target.value))},R={"calculate-conservation":!0};a&&(R["overlay-conservation"]=!0),s>0&&(R["sample-size-conservation"]=s);var q={};return p&&(q["coordinate-left"]=!0),d&&(q["coordinate-right"]=!0),y(q)||(q["coordinate-width"]=30,j&&(q["coordinate-exclude-gaps"]=!0),g&&(q["coordinate-offset-seq-start"]=!0)),o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"protvista-msa"),o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("label",null,"colorScheme:",o.a.createElement("select",{value:e,onChange:C,onBlur:C},Ll.map((function(t){return o.a.createElement("option",{key:t},t)})))),o.a.createElement("label",null,"overlayConservation:",o.a.createElement("input",{type:"checkbox",checked:a,onChange:function(){return c(!a)}})),o.a.createElement("label",null,"sampleSizeConservation:",o.a.createElement("input",{type:"number",value:s||"",onChange:function(t){return l(t.target.value)}})),o.a.createElement("label",null,"show left coordinates:",o.a.createElement("input",{type:"checkbox",checked:p,onChange:function(){return h(!p)}})),o.a.createElement("label",null,"show right coordinates:",o.a.createElement("input",{type:"checkbox",checked:d,onChange:function(){return v(!d)}})),(p||d)&&o.a.createElement(o.a.Fragment,null,o.a.createElement("label",null,"offset coordinates by sequence start:",o.a.createElement("input",{type:"checkbox",checked:g,onChange:function(){return O(!g)}})),o.a.createElement("label",null,"exclude gaps from coordinate count:",o.a.createElement("input",{type:"checkbox",checked:j,onChange:function(){return S(!j)}})))),o.a.createElement("protvista-manager",{attributes:"length displaystart displayend highlight",displaystart:"1",displayend:"50",id:"example"},o.a.createElement("div",{style:{display:"flex",width:"100%"}},o.a.createElement("div",{style:{width:60+(p&&30),flexShrink:0}}),o.a.createElement("protvista-navigation",{length:T.length+1,displaystart:"1",displayend:"50"}),o.a.createElement("div",{style:{width:d&&30,flexShrink:0}})),o.a.createElement("protvista-msa",Dl({id:"msa-track",ref:P,length:T.length,height:"200",displaystart:"1",displayend:"50","use-ctrl-to-zoom":!0,labelWidth:60,colorscheme:e,"text-font":"16px sans-serif"},R,q))),o.a.createElement(Al.default,null,_),o.a.createElement(Cl.default,{content:ql.a}))}},566:function(t,e,n){"use strict";var r=n(567);e.a=function(t){if("string"==typeof t||Object(r.a)(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},567:function(t,e,n){"use strict";var r=n(587),o=n(570);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return"symbol"==i(t)||Object(o.a)(t)&&"[object Symbol]"==Object(r.a)(t)}},571:function(t,e,n){"use strict";var r=n(565),o=n(567);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;e.a=function(t,e){if(Object(r.a)(t))return!1;var n=i(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(o.a)(t))||(c.test(t)||!a.test(t)||null!=e&&t in Object(e))}},574:function(t,e,n){"use strict";var r=n(565),o=n(571),i=n(606);var a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,u=function(t){var e=Object(i.a)(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(a,(function(t,n,r,o){e.push(r?o.replace(c,"$1"):n||t)})),e})),s=n(604);e.a=function(t,e){return Object(r.a)(t)?t:Object(o.a)(t,e)?[t]:u(Object(s.a)(t))}},575:function(t,e,n){"use strict";var r=n(574),o=n(566);e.a=function(t,e){for(var n=0,i=(e=Object(r.a)(e,t)).length;null!=t&&n<i;)t=t[Object(o.a)(e[n++])];return n&&n==i?t:void 0}},578:function(t,e,n){"use strict";var r=n(590),o=n(579),i=n(601),a=n(577);var c=function(t,e,n,r,c,u){var s=1&n,l=t.length,f=e.length;if(l!=f&&!(s&&f>l))return!1;var p=u.get(t);if(p&&u.get(e))return p==e;var h=-1,y=!0,b=2&n?new o.a:void 0;for(u.set(t,e),u.set(e,t);++h<l;){var d=t[h],v=e[h];if(r)var m=s?r(v,d,h,e,t,u):r(d,v,h,t,e,u);if(void 0!==m){if(m)continue;y=!1;break}if(b){if(!Object(i.a)(e,(function(t,e){if(!Object(a.a)(b,e)&&(d===t||c(d,t,n,r,u)))return b.push(e)}))){y=!1;break}}else if(d!==v&&!c(d,v,n,r,u)){y=!1;break}}return u.delete(t),u.delete(e),y},u=n(584),s=n(622),l=n(613);var f=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},p=n(576),h=u.a?u.a.prototype:void 0,y=h?h.valueOf:void 0;var b=function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new s.a(t),new s.a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(l.a)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=f;case"[object Set]":var h=1&r;if(u||(u=p.a),t.size!=e.size&&!h)return!1;var b=a.get(t);if(b)return b==e;r|=2,a.set(t,e);var d=c(u(t),u(e),r,o,i,a);return a.delete(t),d;case"[object Symbol]":if(y)return y.call(t)==y.call(e)}return!1},d=n(623),v=Object.prototype.hasOwnProperty;var m=function(t,e,n,r,o,i){var a=1&n,c=Object(d.a)(t),u=c.length;if(u!=Object(d.a)(e).length&&!a)return!1;for(var s=u;s--;){var l=c[s];if(!(a?l in e:v.call(e,l)))return!1}var f=i.get(t);if(f&&i.get(e))return f==e;var p=!0;i.set(t,e),i.set(e,t);for(var h=a;++s<u;){var y=t[l=c[s]],b=e[l];if(r)var m=a?r(b,y,l,e,t,i):r(y,b,l,t,e,i);if(!(void 0===m?y===b||o(y,b,n,r,i):m)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var g=t.constructor,O=e.constructor;g==O||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof O&&O instanceof O||(p=!1)}return i.delete(t),i.delete(e),p},g=n(608),O=n(565),w=n(611),j=n(620),S="[object Object]",P=Object.prototype.hasOwnProperty;var E=function(t,e,n,o,i,a){var u=Object(O.a)(t),s=Object(O.a)(e),l=u?"[object Array]":Object(g.a)(t),f=s?"[object Array]":Object(g.a)(e),p=(l="[object Arguments]"==l?S:l)==S,h=(f="[object Arguments]"==f?S:f)==S,y=l==f;if(y&&Object(w.a)(t)){if(!Object(w.a)(e))return!1;u=!0,p=!1}if(y&&!p)return a||(a=new r.a),u||Object(j.a)(t)?c(t,e,n,o,i,a):b(t,e,l,n,o,i,a);if(!(1&n)){var d=p&&P.call(t,"__wrapped__"),v=h&&P.call(e,"__wrapped__");if(d||v){var E=d?t.value():t,_=v?e.value():e;return a||(a=new r.a),i(E,_,n,o,a)}}return!!y&&(a||(a=new r.a),m(t,e,n,o,i,a))},_=n(570);e.a=function t(e,n,r,o,i){return e===n||(null==e||null==n||!Object(_.a)(e)&&!Object(_.a)(n)?e!=e&&n!=n:E(e,n,r,o,t,i))}},581:function(t,e,n){"use strict";var r=n(575);e.a=function(t,e,n){var o=null==t?void 0:Object(r.a)(t,e);return void 0===o?n:o}},583:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"d",(function(){return y})),n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return v}));var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,r=void 0===n?-1/0:n,o=e.max,a=void 0===o?1/0:o;i(this,t),this.segments=[],this.max=a,this.min=r,this.regionString=null}var e,n,o;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var r=n.start,o=n.end;if(e)return"".concat(r,":").concat(o);var i=r===t.min?"":r,a=o===t.max?"":o;return"".concat(i,":").concat(a)})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var n=r(t.split(":"),3),o=n[0],i=n[1];if(void 0!==n[2])throw new Error("there should be at most 1 ':' per region. Region: ".concat(t));var a=o?Number(o):e.min,c=i?Number(i):e.max;if(a>c){var u=[c,a];a=u[0],c=u[1]}if(a<e.min&&(a=e.min),c>e.max&&(c=e.max),Number.isNaN(a))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));if(Number.isNaN(c))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));return{start:a,end:c}})):this.segments=[]}}])&&a(e.prototype,n),o&&a(e,o),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},l=function(){function t(e){var n=e.element,r=e.min,o=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.region=new c({min:r,max:o}),this.fixedHighlight=null}var e,n,r;return e=t,(n=[{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(s(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(s(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(s(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(e).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}},{key:"max",set:function(t){this.region.max=t}}])&&u(e.prototype,n),r&&u(e,r),t}();function f(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var p=function(t){return t};function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=l,b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var r=t.split(",").map((function(t){return t.split(":")}));if(r.length<2)throw new Error("There should be at least 2 points to create a scale");e=r.map((function(t){var e=t[0].trim().toUpperCase();if(!f(e))throw new Error("The color '".concat(e," is not valid'"));return e})),n=r.map((function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n}))}return{range:e,domain:n}},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,r=void 0===n?p:n,o=e.valueFormatter,i=void 0===o?p:o;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map((function(t){return t.split(":")})),c={};return a.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));c[r(t[0])]=i(t[1])})),c}return{}},v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var e,n,r;return e=t,(n=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var n=this.element.getBoundingClientRect(),r=n.height,o=n.width,i=n.x,a=n.y;return t>i&&e<i+o&&e>a&&e<a+r}},{key:"wheel",value:function(t){var e=t.x,n=t.y,r=t.timeStamp;this.isWheelEventInsideElement(e,n)?r<this.timeStampWheelOutside+400?this.blockScroll(r):this.setElementScrollable(!0):this.blockScroll(r)}}])&&h(e.prototype,n),r&&h(e,r),t}()},586:function(t,e,n){"use strict";var r=n(590),o=n(578);var i=function(t,e,n,i){var a=n.length,c=a,u=!i;if(null==t)return!c;for(t=Object(t);a--;){var s=n[a];if(u&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++a<c;){var l=(s=n[a])[0],f=t[l],p=s[1];if(u&&s[2]){if(void 0===f&&!(l in t))return!1}else{var h=new r.a;if(i)var y=i(f,p,l,t,e,h);if(!(void 0===y?Object(o.a)(p,f,3,i,h):y))return!1}}return!0},a=n(572);var c=function(t){return t==t&&!Object(a.a)(t)},u=n(573);var s=function(t){for(var e=Object(u.a)(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,c(o)]}return e};var l=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var f=function(t){var e=s(t);return 1==e.length&&e[0][2]?l(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}},p=n(581),h=n(602),y=n(571),b=n(566);var d=function(t,e){return Object(y.a)(t)&&c(e)?l(Object(b.a)(t),e):function(n){var r=Object(p.a)(n,t);return void 0===r&&r===e?Object(h.a)(n,t):Object(o.a)(e,r,3)}},v=n(615),m=n(565);var g=function(t){return function(e){return null==e?void 0:e[t]}},O=n(575);var w=function(t){return function(e){return Object(O.a)(e,t)}};var j=function(t){return Object(y.a)(t)?g(Object(b.a)(t)):w(t)};function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return"function"==typeof t?t:null==t?v.a:"object"==S(t)?Object(m.a)(t)?d(t[0],t[1]):f(t):j(t)}},588:function(t,e,n){"use strict";var r=n(569),o=n(583),i=n(624);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,d(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function h(t,e,n){return(h=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&b(o,n.prototype),o}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(v,t);var e,n,a,u,p,h=(e=v,n=y(),function(){var t,r=d(e);if(n){var o=d(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function v(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),t=h.call(this),v._polyfillElementClosest(),t._updateScaleDomain=t._updateScaleDomain.bind(f(t)),t._initZoom=t._initZoom.bind(f(t)),t.zoomed=t.zoomed.bind(f(t)),t._applyZoomTranslation=t.applyZoomTranslation.bind(f(t)),t._resetEventHandler=t._resetEventHandler.bind(f(t));var e=!1;return t.applyZoomTranslation=function(){e||(e=!0,requestAnimationFrame((function(){e=!1,t._applyZoomTranslation()})))},t._onResize=t._onResize.bind(f(t)),t._listenForResize=t._listenForResize.bind(f(t)),t.trackHighlighter=new o.d({element:f(t),min:1}),t.scrollFilter=new o.b(f(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}return a=v,p=[{key:"_getClickCoords",value:function(){return r.e?[r.e.pageX,r.e.pageY]:null}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"observedAttributes",get:function(){return["displaystart","displayend","length","highlight"]}}],(u=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",(function(t){console.error(t)})),this.addEventListener("click",this._resetEventHandler),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),this.removeEventListener("click",this._resetEventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"getWidthWithMargins",value:function(){return this.width?this.width-this.margin.left-this.margin.right:0}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(r.i)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){var t=this;this._zoom=Object(r.m)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter((function(){if(!(r.e instanceof WheelEvent))return!0;if(t.hasAttribute("scroll-filter")){var e=t.getAttribute("scrollable");if(e)return"true"===e}return!t.hasAttribute("use-ctrl-to-zoom")||r.e.ctrlKey})).on("zoom",this.zoomed)}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"attributeChangedCallback",value:function(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=r.e.transform.rescaleX(this._originXScale),!this.dontDispatch){var t=c(this.xScale.domain(),2),e=t[0],n=t[1];this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,e),displayend:Math.min(this.length,Math.max(n-1,e+1))},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.n.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new i.a(this._onResize),this._ro.observe(this)}},{key:"_resetEventHandler",value:function(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}},{key:"getXFromSeqPosition",value:function(t){return this.margin.left+this.xScale(t)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"createEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;e&&(e=e.feature?e.feature:e);var u={eventtype:t,coords:v._getClickCoords(),feature:e,target:c};return n&&(e&&e.fragments?u.highlight=e.fragments.map((function(t){return"".concat(t.start,":").concat(t.end)})).join(","):r.e&&r.e.shiftKey&&this._highlight?u.highlight="".concat(this._highlight,",").concat(i,":").concat(a):u.highlight=i&&a?"".concat(i,":").concat(a):null),o&&(u.selectedid=e&&e.protvistaFeatureId),new CustomEvent("change",{detail:u,bubbles:!0,cancelable:!0})}},{key:"bindEvents",value:function(t,e){t.on("mouseover",(function(t,n,r){e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,!1,t.start,t.end,r[n]))})).on("mouseout",(function(){e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))})).on("click",(function(t,n,r){e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,!0,t.start,t.end,r[n]))}))}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",set:function(t){this._height=t},get:function(){return this._height}},{key:"length",set:function(t){this._length=t,this.trackHighlighter.max=t},get:function(){return this._length}},{key:"xScale",get:function(){return this._xScale},set:function(t){this._xScale=t}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",set:function(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()},get:function(){return this._svg}},{key:"margin",get:function(){return{top:10,right:10,bottom:10,left:10}}},{key:"fixedHighlight",set:function(t){this.trackHighlighter.setFixedHighlight(t)}}])&&s(a.prototype,u),p&&s(a,p),v}(p(HTMLElement));e.a=v},592:function(t,e,n){"use strict";var r=n(600),o=n(582);var i=function(t,e){return function(n,r){if(null==n)return n;if(!Object(o.a)(n))return t(n,r);for(var i=n.length,a=e?i:-1,c=Object(n);(e?a--:++a<i)&&!1!==r(c[a],a,c););return n}}(r.a);e.a=i},599:function(t,e,n){"use strict";var r=n(572),o=n(567),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;e.a=function(t){if("number"==typeof t)return t;if(Object(o.a)(t))return NaN;if(Object(r.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(r.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=c.test(t);return n||u.test(t)?s(t.slice(2),n?2:8):a.test(t)?NaN:+t}},600:function(t,e,n){"use strict";var r=n(605),o=n(573);e.a=function(t,e){return t&&Object(r.a)(t,e,o.a)}},601:function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},602:function(t,e,n){"use strict";var r=function(t,e){return null!=t&&e in Object(t)},o=n(574),i=n(618),a=n(565),c=n(617),u=n(621),s=n(566);var l=function(t,e,n){for(var r=-1,l=(e=Object(o.a)(e,t)).length,f=!1;++r<l;){var p=Object(s.a)(e[r]);if(!(f=null!=t&&n(t,p)))break;t=t[p]}return f||++r!=l?f:!!(l=null==t?0:t.length)&&Object(u.a)(l)&&Object(c.a)(p,l)&&(Object(a.a)(t)||Object(i.a)(t))};e.a=function(t,e){return null!=t&&l(t,e,r)}},603:function(t,e,n){"use strict";var r=n(599);var o=function(t){return t?(t=Object(r.a)(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};e.a=function(t){var e=o(t),n=e%1;return e==e?n?e-n:e:0}},604:function(t,e,n){"use strict";var r=n(584),o=n(568),i=n(565),a=n(567),c=r.a?r.a.prototype:void 0,u=c?c.toString:void 0;var s=function t(e){if("string"==typeof e)return e;if(Object(i.a)(e))return Object(o.a)(e,t)+"";if(Object(a.a)(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};e.a=function(t){return null==t?"":s(t)}},605:function(t,e,n){"use strict";var r=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),c=a.length;c--;){var u=a[t?c:++o];if(!1===n(i[u],u,i))break}return e}}();e.a=r},606:function(t,e,n){"use strict";var r=n(625);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r.a),n}o.Cache=r.a,e.a=o},619:function(t,e,n){"use strict";var r=n(645),o=n(612);e.a=function(t,e,n,i){var a=!n;n||(n={});for(var c=-1,u=e.length;++c<u;){var s=e[c],l=i?i(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),a?Object(o.a)(n,s,l):Object(r.a)(n,s,l)}return n}},630:function(t,e,n){"use strict";var r=n(569);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)})(t)}function u(t,e,n){return(u=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(h,t);var e,n,o,c,u,p=(e=h,n=s(),function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return a(this,t)});function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=p.call(this))._x=null,t._padding=0,t.dontDispatch=!1,t}return o=h,u=[{key:"observedAttributes",get:function(){return["length","displaystart","displayend","highlightStart","highlightEnd","width","rulerstart"]}}],(c=[{key:"_refreshWidth",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.width>0&&(this._padding=10)}},{key:"connectedCallback",value:function(){this._refreshWidth(),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._rulerstart=parseFloat(this.getAttribute("rulerStart"))||1,this._onResize=this._onResize.bind(this),this._createNavRuler()}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro&&this._ro.unobserve(this),window.removeEventListener("resize",this._onResize)}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&(this["_".concat(t)]=parseFloat(n),this._updateNavRuler())}},{key:"_createNavRuler",value:function(){var t=this;this._x=Object(r.i)().range([this._padding,this.width-this._padding]),this._x.domain([this._rulerstart,this._rulerstart+this._length]),this._svg=Object(r.l)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=Object(r.a)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",40-this._padding),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",40-this._padding).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(r.d)().extent([[this._padding,0],[this.width-this._padding,20.4]]).on("brush",(function(){r.e.selection&&(t._displaystart=Object(r.f)("d")(t._x.invert(r.e.selection[0])),t._displayend=Object(r.f)("d")(t._x.invert(r.e.selection[1])),t.dontDispatch||t.dispatchEvent(new CustomEvent("change",{detail:{displayend:t._displayend,displaystart:t._displaystart,extra:{transform:r.e.transform}},bubbles:!0,cancelable:!0})),t._updateLabels(),t._updatePolygon())})),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}},{key:"_onResize",value:function(){this._refreshWidth(),this._x=this._x.range([this._padding,this.width-this._padding]),this._svg.attr("width",this.width),this._viewport.extent([[this._padding,0],[this.width-this._padding,20.4]]),this._brushG.call(this._viewport),this._updateNavRuler()}},{key:"_updateNavRuler",value:function(){this._x&&(this._x.domain([this._rulerstart,this._rulerstart+this._length]),this._axis.call(this._xAxis),this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}},{key:"_updateLabels",value:function(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}},{key:"_updatePolygon",value:function(){this.polygon&&this.polygon.attr("points","".concat(this._x(this._displaystart),",").concat(20,"\n        ").concat(this._x(this._displayend),",").concat(20,"\n        ").concat(this.width,",").concat(40,"\n        0,").concat(40))}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}}])&&i(o.prototype,c),u&&i(o,u),h}(c(HTMLElement));e.a=p},631:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function s(t,e,n){return(s=l()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&f(o,n.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,r,i,u,s=(e=h,n=l(),function(){var t,r=p(e);if(n){var o=p(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return c(this,t)});function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=s.call(this)).protvistaElements=new Set,t.attributeValues=new Map,t.propertyValues=new Map,t.mouseOver=!1,t}return r=h,u=[{key:"observedAttributes",get:function(){return["attributes","length","displaystart","displayend","highlight"]}}],(i=[{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){if("attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute");this.attributeValues=new Map(this._attributes.filter((function(t){return!h.observedAttributes.includes(t)})).map((function(t){return[t,null]})))}else"length"===t&&(this.length=n),"displaystart"===t&&(this.displaystart=n),"displayend"===t&&(this.displayend=n),"highlight"===t&&(this.highlight=n);this.applyAttributes()}}},{key:"register",value:function(t){this.protvistaElements.add(t),this.applyAttributes()}},{key:"unregister",value:function(t){this.protvistaElements.delete(t)}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"applyAttributes",value:function(){var t=this;this.protvistaElements.forEach((function(e){t.attributeValues.forEach((function(t,n){!1===t||null==t?e.removeAttribute(n):e.setAttribute(n,"boolean"==typeof t?"":t)}))}))}},{key:"applyProperties",value:function(t){var e=this;if(t){var n=this.querySelector("#".concat(t));this.propertyValues.forEach((function(t,e){n[e]=t}))}else this.protvistaElements.forEach((function(t){e.propertyValues.forEach((function(e,n){t[n]=e}))}))}},{key:"isRegisteredAttribute",value:function(t){return o(this.attributeValues.keys()).includes(t)||h.observedAttributes.includes(t)}},{key:"_changeListener",value:function(t){var e=this;switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:this.isRegisteredAttribute(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach((function(n){e.isRegisteredAttribute(n)&&e.attributeValues.set(n,t.detail[n])})),this.applyAttributes()}}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}},{key:"length",set:function(t){this.attributeValues.set("length",t)},get:function(){return this.attributeValues.get("length")}},{key:"displaystart",set:function(t){this.attributeValues.set("displaystart",t)},get:function(){return this.attributeValues.get("displaystart")}},{key:"displayend",set:function(t){this.attributeValues.set("displayend",t)},get:function(){return this.attributeValues.get("displayend")}},{key:"highlight",set:function(t){this.attributeValues.set("highlight",t)},get:function(){return this.attributeValues.get("highlight")}}])&&a(r.prototype,i),u&&a(r,u),h}(u(HTMLElement));e.a=h},633:function(t,e,n){"use strict";var r=n(711),o=n(572),i=n(642);var a=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},c=Object.prototype.hasOwnProperty;var u=function(t){if(!Object(o.a)(t))return a(t);var e=Object(i.a)(t),n=[];for(var r in t)("constructor"!=r||!e&&c.call(t,r))&&n.push(r);return n},s=n(582);e.a=function(t){return Object(s.a)(t)?Object(r.a)(t,!0):u(t)}},636:function(t,e,n){"use strict";var r=n(622);e.a=function(t){var e=new t.constructor(t.byteLength);return new r.a(e).set(new r.a(t)),e}},641:function(t,e,n){"use strict";e.a=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},643:function(t,e,n){"use strict";var r=n(572),o=Object.create,i=function(){function t(){}return function(e){if(!Object(r.a)(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();e.a=i},644:function(t,e,n){"use strict";var r=n(686),o=Object(r.a)(Object.getPrototypeOf,Object);e.a=o},645:function(t,e,n){"use strict";var r=n(612),o=n(613),i=Object.prototype.hasOwnProperty;e.a=function(t,e,n){var a=t[e];i.call(t,e)&&Object(o.a)(a,n)&&(void 0!==n||e in t)||Object(r.a)(t,e,n)}},649:function(t,e,n){"use strict";var r=n(662),o=n(644),i=n(650),a=n(687),c=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Object(r.a)(e,Object(i.a)(t)),t=Object(o.a)(t);return e}:a.a;e.a=c},652:function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},660:function(t,e,n){"use strict";(function(t){var r=n(607);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,a=i&&"object"==o(t)&&t&&!t.nodeType&&t,c=a&&a.exports===i?r.a.Buffer:void 0,u=c?c.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(648)(t))},661:function(t,e,n){"use strict";var r=n(643),o=n(644),i=n(642);e.a=function(t){return"function"!=typeof t.constructor||Object(i.a)(t)?{}:Object(r.a)(Object(o.a)(t))}},663:function(t,e,n){"use strict";var r=n(636);e.a=function(t,e){var n=e?Object(r.a)(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},664:function(t,e,n){"use strict";var r=n(688),o=n(649),i=n(633);e.a=function(t){return Object(r.a)(t,i.a,o.a)}},674:function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,s=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?s=u.concat(s):f=-1,s.length&&h())}function h(){if(!l){var t=c(p);l=!0;for(var e=s.length;e;){for(u=s,s=[];++f<e;)u&&u[f].run();f=-1,e=s.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function b(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new y(t,e)),1!==s.length||l||c(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},700:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=a(n(0)),i=a(n(56));function a(t){return t&&t.__esModule?t:{default:t}}var c=function(t){var e=t.children,n=t.width,i=t.height,a=t.style,c=void 0===a?{}:a,u=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["children","width","height","style"]);return o.default.createElement("svg",r({children:e,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:i,width:n,style:c},u))};c.propTypes={children:i.default.node.isRequired,width:i.default.oneOfType([i.default.number,i.default.string]),height:i.default.oneOfType([i.default.number,i.default.string]),style:i.default.object},e.default=c},701:function(t,e,n){t.exports=function(){return new Worker(n.p+"62b53c9c107e960ca50a.worker.js")}},706:function(t,e,n){"use strict";var r=n(590),o=n(652),i=n(645),a=n(619),c=n(573);var u=function(t,e){return t&&Object(a.a)(e,Object(c.a)(e),t)},s=n(633);var l=function(t,e){return t&&Object(a.a)(e,Object(s.a)(e),t)},f=n(660),p=n(641),h=n(650);var y=function(t,e){return Object(a.a)(t,Object(h.a)(t),e)},b=n(649);var d=function(t,e){return Object(a.a)(t,Object(b.a)(t),e)},v=n(623),m=n(664),g=n(608),O=Object.prototype.hasOwnProperty;var w=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&O.call(t,"index")&&(n.index=t.index,n.input=t.input),n},j=n(636);var S=function(t,e){var n=e?Object(j.a)(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},P=/\w*$/;var E=function(t){var e=new t.constructor(t.source,P.exec(t));return e.lastIndex=t.lastIndex,e},_=n(584),k=_.a?_.a.prototype:void 0,x=k?k.valueOf:void 0;var T=function(t){return x?Object(x.call(t)):{}},C=n(663);var R=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return Object(j.a)(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return S(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Object(C.a)(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return E(t);case"[object Set]":return new r;case"[object Symbol]":return T(t)}},q=n(661),A=n(565),D=n(611),M=n(570);var F=function(t){return Object(M.a)(t)&&"[object Map]"==Object(g.a)(t)},L=n(614),H=n(651),B=H.a&&H.a.isMap,W=B?Object(L.a)(B):F,I=n(572);var z=function(t){return Object(M.a)(t)&&"[object Set]"==Object(g.a)(t)},N=H.a&&H.a.isSet,V=N?Object(L.a)(N):z,Y={};Y["[object Arguments]"]=Y["[object Array]"]=Y["[object ArrayBuffer]"]=Y["[object DataView]"]=Y["[object Boolean]"]=Y["[object Date]"]=Y["[object Float32Array]"]=Y["[object Float64Array]"]=Y["[object Int8Array]"]=Y["[object Int16Array]"]=Y["[object Int32Array]"]=Y["[object Map]"]=Y["[object Number]"]=Y["[object Object]"]=Y["[object RegExp]"]=Y["[object Set]"]=Y["[object String]"]=Y["[object Symbol]"]=Y["[object Uint8Array]"]=Y["[object Uint8ClampedArray]"]=Y["[object Uint16Array]"]=Y["[object Uint32Array]"]=!0,Y["[object Error]"]=Y["[object Function]"]=Y["[object WeakMap]"]=!1;e.a=function t(e,n,a,s,h,b){var O,j=1&n,S=2&n,P=4&n;if(a&&(O=h?a(e,s,h,b):a(e)),void 0!==O)return O;if(!Object(I.a)(e))return e;var E=Object(A.a)(e);if(E){if(O=w(e),!j)return Object(p.a)(e,O)}else{var _=Object(g.a)(e),k="[object Function]"==_||"[object GeneratorFunction]"==_;if(Object(D.a)(e))return Object(f.a)(e,j);if("[object Object]"==_||"[object Arguments]"==_||k&&!h){if(O=S||k?{}:Object(q.a)(e),!j)return S?d(e,l(O,e)):y(e,u(O,e))}else{if(!Y[_])return h?e:{};O=R(e,_,j)}}b||(b=new r.a);var x=b.get(e);if(x)return x;b.set(e,O),V(e)?e.forEach((function(r){O.add(t(r,n,a,r,e,b))})):W(e)&&e.forEach((function(r,o){O.set(o,t(r,n,a,o,e,b))}));var T=P?S?m.a:v.a:S?keysIn:c.a,C=E?void 0:T(e);return Object(o.a)(C||e,(function(r,o){C&&(r=e[o=r]),Object(i.a)(O,o,t(r,n,a,o,e,b))})),O}},794:function(t,e,n){"use strict";(function(t,r){var o,i=n(795);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var a=Object(i.a)(o);e.a=a}).call(this,n(112),n(648)(t))},795:function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",(function(){return r}))},796:function(t,e,n){"use strict";(function(e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(114);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0}function a(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var c=n(797),u=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l="foo"===function(){}.name;function f(t){return Object.prototype.toString.call(t)}function p(t){return!a(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var h=t.exports=g,y=/\s*function\s+([^\(\s]*)\s*/;function b(t){if(c.isFunction(t)){if(l)return t.name;var e=t.toString().match(y);return e&&e[1]}}function d(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function v(t){if(l||!c.isFunction(t))return c.inspect(t);var e=b(t);return"[Function"+(e?": "+e:"")+"]"}function m(t,e,n,r,o){throw new h.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function g(t,e){t||m(t,!0,e,"==",h.ok)}function O(t,e,n,o){if(t===e)return!0;if(a(t)&&a(e))return 0===i(t,e);if(c.isDate(t)&&c.isDate(e))return t.getTime()===e.getTime();if(c.isRegExp(t)&&c.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===r(t)||null!==e&&"object"===r(e)){if(p(t)&&p(e)&&f(t)===f(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(a(t)!==a(e))return!1;var u=(o=o||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===o.expected.indexOf(e)||(o.actual.push(t),o.expected.push(e),function(t,e,n,r){if(null==t||null==e)return!1;if(c.isPrimitive(t)||c.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=w(t),i=w(e);if(o&&!i||!o&&i)return!1;if(o)return t=s.call(t),e=s.call(e),O(t,e,n);var a,u,l=P(t),f=P(e);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),u=l.length-1;u>=0;u--)if(l[u]!==f[u])return!1;for(u=l.length-1;u>=0;u--)if(a=l[u],!O(t[a],e[a],n,r))return!1;return!0}(t,e,n,o))}return n?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function j(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t,e,n,r){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&m(o,n,"Missing expected exception"+r);var i="string"==typeof r,a=!t&&o&&!n;if((!t&&c.isError(o)&&i&&j(o,n)||a)&&m(o,n,"Got unwanted exception"+r),t&&o&&n&&!j(o,n)||!t&&o)throw o}h.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return d(v(t.actual),128)+" "+t.operator+" "+d(v(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,o=b(e),i=r.indexOf("\n"+o);if(i>=0){var a=r.indexOf("\n",i+1);r=r.substring(a+1)}this.stack=r}}},c.inherits(h.AssertionError,Error),h.fail=m,h.ok=g,h.equal=function(t,e,n){t!=e&&m(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&m(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){O(t,e,!1)||m(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){O(t,e,!0)||m(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){O(t,e,!1)&&m(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,r){O(e,n,!0)&&m(e,n,r,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&m(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&m(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){S(!0,t,e,n)},h.doesNotThrow=function(t,e,n){S(!1,t,e,n)},h.ifError=function(t){if(t)throw t},h.strict=o((function t(e,n){e||m(e,!0,n,"==",t)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var P=Object.keys||function(t){var e=[];for(var n in t)u.call(t,n)&&e.push(n);return e}}).call(this,n(112))},797:function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(u(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),c=r[n];n<o;c=r[++n])d(c)||!w(c)?a+=" "+c:a+=" "+u(c);return a},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var a,c={};function u(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(n)?r.showHidden=n:n&&e._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),f(r,t,r.depth)}function s(t,e){var n=u.styles[e];return n?"["+u.colors[n][0]+"m"+t+"["+u.colors[n][1]+"m":t}function l(t,e){return t}function f(t,n,r){if(t.customInspect&&n&&P(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return m(o)||(o=f(t,o,r)),o}var i=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(v(e))return t.stylize(""+e,"number");if(b(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,n);if(i)return i;var a=Object.keys(n),c=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(P(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(O(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(j(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return p(n)}var s,l="",w=!1,E=["{","}"];(y(n)&&(w=!0,E=["[","]"]),P(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return O(n)&&(l=" "+RegExp.prototype.toString.call(n)),j(n)&&(l=" "+Date.prototype.toUTCString.call(n)),S(n)&&(l=" "+p(n)),0!==a.length||w&&0!=n.length?r<0?O(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),s=w?function(t,e,n,r,o){for(var i=[],a=0,c=e.length;a<c;++a)T(e,String(a))?i.push(h(t,e,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(h(t,e,n,r,o,!0))})),i}(t,n,r,c,a):a.map((function(e){return h(t,n,r,c,e,w)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(s,l,E)):E[0]+l+E[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,o,i){var a,c,u;if((u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?c=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(c=t.stylize("[Setter]","special")),T(r,o)||(a="["+o+"]"),c||(t.seen.indexOf(u.value)<0?(c=d(n)?f(t,u.value,null):f(t,u.value,n-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+c.split("\n").map((function(t){return"   "+t})).join("\n")):c=t.stylize("[Circular]","special")),g(a)){if(i&&o.match(/^\d+$/))return c;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+c}function y(t){return Array.isArray(t)}function b(t){return"boolean"==typeof t}function d(t){return null===t}function v(t){return"number"==typeof t}function m(t){return"string"==typeof t}function g(t){return void 0===t}function O(t){return w(t)&&"[object RegExp]"===E(t)}function w(t){return"object"===r(t)&&null!==t}function j(t){return w(t)&&"[object Date]"===E(t)}function S(t){return w(t)&&("[object Error]"===E(t)||t instanceof Error)}function P(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}function _(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(g(a)&&(a=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!c[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=t.pid;c[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else c[n]=function(){};return c[n]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=y,e.isBoolean=b,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=m,e.isSymbol=function(t){return"symbol"===r(t)},e.isUndefined=g,e.isRegExp=O,e.isObject=w,e.isDate=j,e.isError=S,e.isFunction=P,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===r(t)||void 0===t},e.isBuffer=n(798);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(){var t=new Date,e=[_(t.getHours()),_(t.getMinutes()),_(t.getSeconds())].join(":");return[t.getDate(),k[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",x(),e.format.apply(e,arguments))},e.inherits=n(799),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(C&&t[C]){var e;if("function"!=typeof(e=t[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,C,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,o)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),C&&Object.defineProperty(e,C,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,o(t))},e.promisify.custom=C,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,n).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(R,e,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,o(e)),n}}).call(this,n(674))},798:function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return t&&"object"===n(t)&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},799:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},800:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=a(n(0)),i=a(n(700));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},t),o.default.createElement("path",{d:"M4 0H0v4h1V1h3V0zm11 0h-3v1h3v3h1V0h-1zM1 15v-3H0v4h4v-1H1zm14-3v3h-3v1h4v-4h-1zm-2-3l-.008-.003L11.5 10.5 9 8l2.5-2.5L12.971 7H13V3H9v.03l1.5 1.47L8 7 5.5 4.5 7 3.03V3H3v4l1.5-1.5L7 8l-2.5 2.5L3 9v4h4l-1.5-1.5L8 9l2.5 2.5L9 13h4V9z"}))}},801:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=a(n(0)),i=a(n(700));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},t),o.default.createElement("path",{d:"M.013 1.012V15h13.999V1.012H.013zm10.999 7.995H8.013v2.999h-2V9.007h-3V7.008h3V4.01h2v2.998h2.999v1.999z"}))}},802:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=a(n(0)),i=a(n(700));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},t),o.default.createElement("path",{d:"M.004 1v14h14V1h-14zM11 9H3V7h8v2z"}))}},803:function(t,e){t.exports='<h1 id="protvista-msa">protvista-msa</h1>\n<p>A custom element that visualises multiple sequences alignments. It is basically a wrapper of <a href="https://github.com/ebi-webcomponents/react-msa-viewer">react-msa-viewer</a> that plays along with other nightingale components.</p>\n<p>It currently uses the <code>clustal</code> color scheme, and only displays the alignment, none of the other components includede in <code>react-msa-viewer</code>. it uses the scroll only to move vertically.</p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;protvista-msa\n  id=&quot;msa-track&quot;\n  length=&quot;300&quot;\n  height=&quot;200&quot;\n  displaystart=&quot;10&quot;\n  displayend=&quot;30&quot;\n  use-ctrl-to-zoom\n  labelWidth=&quot;100&quot;\n  colorscheme=&quot;clustal&quot;\n  activeLabel=&quot;seq_1&quot;\n/&gt;</code></pre>\n<p>This readme is been use as a road map. A  emoji indicates that this feature is under construction.</p>\n<h2 id="features">Features</h2>\n<ul>\n<li> Inherits from <code>protvista-zoomable</code> and supports updates from the <code>protvista-manager</code></li>\n<li> Refreshes when the property <code>data</code> is updated</li>\n<li> Renders the sequence names if there is space assigned in the attribute <code>labelwidth</code></li>\n<li> Forces the zoom to stay at a level thet there is at least a pixel per base.</li>\n<li> Find an alternative to be able to zoom farther.</li>\n<li> Changes in color schema</li>\n<li> Highlights a region</li>\n<li> Adding other components to the layout. eg. scale, conservancy plot, etc.</li>\n<li> Calculates conservation of the alignment. This calculations runs as in a separate web worker.</li>\n<li> Can use the conservation either as a colorscheme or as an overlay of the current colorscheme.</li>\n</ul>\n<h2 id="api-reference">API reference</h2>\n<h3 id="parameters">Parameters</h3>\n<h5 id="width"><code>width</code></h5>\n<p>The width assigned for the component, including anything reseved for the sequence names</p>\n<p>type: <code>number</code>\ndefaultValue: calculated based onavailable space.</p>\n<h5 id="height"><code>height</code></h5>\n<p>Height of the component</p>\n<p>type: <code>number</code></p>\n<h5 id="labelwidth"><code>labelwidth</code></h5>\n<p>The space assigned for the sequence labels. This will be taken from the total <code>width</code>. Which means that if the <code>width</code> is <code>1000</code> and <code>labelwidth</code> is <code>200</code>, the alignment will be using <code>800</code>.</p>\n<p>If a value of <code>0</code> is assigned, the rendering of labels will be avoided completely.</p>\n<p>type: <code>number</code>\ndefaultValue: 0</p>\n<h5 id="colorscheme"><code>colorscheme</code></h5>\n<p>The colour scheme to use when painting the alignment tiles.</p>\n<p>Note: The conservation color scheme has to calculate some values. The current approach is to do the calculation in a web worker, if the component requests using the <code>&#39;conservation&#39;</code> scheme before the calculation is completed, it paint all the background in white, and repaints it once the calculations are done.</p>\n<p>type: <code>enum(&#39;buried_index&#39;|&#39;clustal&#39;|&#39;clustal2&#39;|&#39;cinema&#39;|&#39;helix_propensity&#39;|&#39;hydro&#39;|&#39;lesk&#39;|&#39;mae&#39;|&#39;nucleotide&#39;|&#39;purine_pyrimidine&#39;|&#39;strand_propensity&#39;|&#39;taylor&#39;|&#39;turn_propensity&#39;|&#39;zappo&#39;|&#39;conservation&#39;)</code>\ndefaultValue: <code>&#39;clustal&#39;</code></p>\n<h5 id="text-font"><code>text-font</code></h5>\n<p>The font for the bases in the alignment. It should be in the format <code>&quot;[size]px [font]&quot;</code>. Where <code>[size]</code> is a number and <code>[font]</code> should be a valid font name.</p>\n<p>type: <code>string</code>\ndefault: <code>&#39;18px Arial&#39;</code></p>\n<h5 id="calculate-conservation"><code>calculate-conservation</code></h5>\n<p>A flag that enable the calculation of the conservation values per base in the alignment.</p>\n<p>The calculation is executed on a web worker to avoid any interrruption on the main thread.</p>\n<p>type: <code>boolean</code>\ndefaultValue: <code>false</code></p>\n<h4 id="activelabel"><code>activeLabel</code></h4>\n<p>The value of the active label/track to be selected in the visualisation.</p>\n<h5 id="other-inherit-from-protvista-zoomable">Other inherit from <code>protvista-zoomable</code></h5>\n<p>displaystart, displayend, length, highlight</p>\n<p>See more <a href="https://github.com/ebi-webcomponents/nightingale/tree/master/packages/protvista-zoomable">here</a></p>\n<h5 id="overlay-conservation"><code>overlay-conservation</code></h5>\n<p>It uses the calculated conservation to define opacity values for the background of the residues.\nThis way highly conservated areas will be full coloured, while mutations will have a white background.</p>\n<p>type: <code>boolean</code>\ndefaultValue: <code>false</code></p>\n<h5 id="sample-size-conservation"><code>sample-size-conservation</code></h5>\n<p>If present, the value given here indicates how many sequences will be considered when calculating the conservation.\nThis way alignments with many sequences won&#39;t require a full analysis of the conservation, but it will be estimated based on a sample.\nIf not present, the conservation analysis will be executed with the all the sequences in the alignment.</p>\n<p>type: <code>number</code>\ndefaultValue: <code>undefined</code></p>\n<h3 id="properties">Properties</h3>\n<h4 id="data"><code>data</code></h4>\n<p>The sequences to be displayed. The should be in the following shape:</p>\n<pre><code class="language-javascript">[\n  {\n    name: &quot;seq1&quot;,\n    sequence: &quot;MAMYDDEFDTKASDLTFSPWVEVE&quot;,\n  },\n  // ...\n];</code></pre>\n<h4 id="onactivetrackchange"><code>onActiveTrackChange</code></h4>\n<p>The value of <code>onActiveTrackChange</code> should be a callback function to fire for when the active label/track is changed. Usage:</p>\n<pre><code>// msaTrack is a reference to &lt;protvista-msa /&gt; element\nmsaTrack.current.onActiveTrackChange = (trackId) =&gt; {\n  console.log(&quot;active track changed:&quot;, trackId);\n};</code></pre><p>type: <code>array</code></p>\n<h3 id="methods">Methods</h3>\n<h4 id="getcolormap"><code>getColorMap()</code></h4>\n<p>Return an object that contains the name of the current colorscheme in usage, and a map, that is a dictionary indicating the colorMapping used. For example the default scheme <code>&#39;clustal&#39;</code> would return something like:</p>\n<pre><code class="language-javascript">{\n  name: &#39;clustal&#39;,\n  map: {\n    A: &quot;orange&quot;,\n    B: &quot;#fff&quot;,\n    C: &quot;green&quot;,\n    D: &quot;red&quot;,\n    E: &quot;red&quot;,\n    F: &quot;blue&quot;,\n    G: &quot;orange&quot;,\n    H: &quot;red&quot;,\n    I: &quot;green&quot;,\n    J: &quot;#fff&quot;,\n    K: &quot;red&quot;,\n    L: &quot;green&quot;,\n    M: &quot;green&quot;,\n    N: &quot;#fff&quot;,\n    O: &quot;#fff&quot;,\n    P: &quot;orange&quot;,\n    Q: &quot;#fff&quot;,\n    R: &quot;red&quot;,\n    S: &quot;orange&quot;,\n    T: &quot;orange&quot;,\n    U: &quot;#fff&quot;,\n    V: &quot;green&quot;,\n    W: &quot;blue&quot;,\n    X: &quot;#fff&quot;,\n    Y: &quot;blue&quot;,\n    Z: &quot;#fff&quot;,\n    Gap: &quot;#fff&quot;\n  }\n}</code></pre>\n<h3 id="events">Events</h3>\n<h4 id="conservationprogress"><code>conservationProgress</code></h4>\n<p>It notifies progress at calculating the conservation. The detail of the event is an event with the progress, and the current count of bases per position in the current sequence.\nWhen the progress is equal to 1, then the current values of the sum is divided by the number of sequences.</p>\n<pre><code class="language-javascript">// in the middle of the calculation\n{\n  progress: 0.5,\n  conservation: [\n    {M:5, A:3},\n    {E:4, S:4},\n  ]\n}\n\n//When the conservation calculation has been completed\n{\n  progress: 1,\n  conservation: [\n    {M:0.5, A:0.375, P:0.125},\n    {E:0.375, S:0.375, -:0.5},\n  ]\n}\n</code></pre>\n<h4 id="drawcompleted"><code>drawCompleted</code></h4>\n<p>Evrytime the component redraws the alignment this event is raised. There are multiple actions to redraw the alignment, for instance, changes in the props, or dragging the viewport.</p>\n<p>It doesn&#39;t have any data in the details.</p>\n'}}]);